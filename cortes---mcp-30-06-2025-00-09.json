=ewogICJjcmVhdGVkQXQiOiAiMjAyNS0wNi0yOFQxOToyNDoxMy4wOTNaIiwKICAidXBkYXRlZEF0IjogIjIwMjUtMDYtMjlUMDU6NDE6MTQuMDAwWiIsCiAgImlkIjogIm82Y3JVV1lPZEpLVTRIQ1MiLAogICJuYW1lIjogIkNvcnRlcyAtIE1DUCIsCiAgImFjdGl2ZSI6IGZhbHNlLAogICJpc0FyY2hpdmVkIjogdHJ1ZSwKICAibm9kZXMiOiBbCiAgICB7CiAgICAgICJwYXJhbWV0ZXJzIjogewogICAgICAgICJ0cmlnZ2VyVGltZXMiOiB7CiAgICAgICAgICAiaXRlbSI6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICJtb2RlIjogImV2ZXJ5SG91ciIsCiAgICAgICAgICAgICAgIm1pbnV0ZSI6IDEwCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAibW9kZSI6ICJldmVyeUhvdXIiLAogICAgICAgICAgICAgICJtaW51dGUiOiAyMAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgIm1vZGUiOiAiZXZlcnlIb3VyIiwKICAgICAgICAgICAgICAibWludXRlIjogMzAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICJtb2RlIjogImV2ZXJ5SG91ciIsCiAgICAgICAgICAgICAgIm1pbnV0ZSI6IDQwCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAibW9kZSI6ICJldmVyeUhvdXIiLAogICAgICAgICAgICAgICJtaW51dGUiOiA1MAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgIm1vZGUiOiAiZXZlcnlIb3VyIgogICAgICAgICAgICB9CiAgICAgICAgICBdCiAgICAgICAgfQogICAgICB9LAogICAgICAibmFtZSI6ICJFdmVyeSAxMCBNaW51dGVzIiwKICAgICAgInR5cGUiOiAibjhuLW5vZGVzLWJhc2UuY3JvbiIsCiAgICAgICJ0eXBlVmVyc2lvbiI6IDEsCiAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAtMjYwLAogICAgICAgIC03NDAKICAgICAgXSwKICAgICAgImlkIjogImNjYTc4MDhkLTFkNjItNDg1OC04YTM2LWI4YjA0YjQyMWZmZSIsCiAgICAgICJub3Rlc0luRmxvdyI6IHRydWUsCiAgICAgICJub3RlcyI6ICJTZSBlamVjdXRhIGNhZGEgMTAgbWludXRvcyIKICAgIH0sCiAgICB7CiAgICAgICJwYXJhbWV0ZXJzIjogewogICAgICAgICJmdW5jdGlvbkNvZGUiOiAiLy8gQ29uZmlndXJhY2nDs24gRVNQRUPDjUZJQ0EgcGFyYSBwcm95ZWN0byBDb3J0ZXMgZW4gTWFjXG5jb25zdCBiYXNlUHJvamVjdFBhdGggPSAnL2RhdGEvY29ydGVzJztcbmNvbnN0IGNvcnRlc0FwcFBhdGggPSAnL2RhdGEvY29ydGVzL0NvcnRlcyc7XG5jb25zdCBjb250ZXh0UGF0aCA9ICcvZGF0YS9jb3J0ZXMvY29ydGVzLWNvbnRleHQnO1xuY29uc3QgbWFjUHJvamVjdFBhdGggPSAnL1VzZXJzL21vbGluZXNtYWMvRG9jdW1lbnRzL0NvcnRlcyc7XG5jb25zdCBtYWNDb250ZXh0UGF0aCA9ICcvVXNlcnMvbW9saW5lc21hYy9Eb2N1bWVudHMvQ29ydGVzL2NvcnRlcy1jb250ZXh0JztcblxuY29uc3QgY29uZmlnID0ge1xuICBwcm9qZWN0X3BhdGg6IGJhc2VQcm9qZWN0UGF0aCxcbiAgY29ydGVzX2FwcF9wYXRoOiBjb3J0ZXNBcHBQYXRoLFxuICBjb250ZXh0X3BhdGg6IGNvbnRleHRQYXRoLFxuICBtYWNfcHJvamVjdF9wYXRoOiBtYWNQcm9qZWN0UGF0aCxcbiAgbWFjX2NvbnRleHRfcGF0aDogbWFjQ29udGV4dFBhdGgsXG4gIGRldGVjdGVkX2F1dG9tYXRpY2FsbHk6IHRydWUsXG4gIHJlYWxfcGF0aF9mb3VuZDogdHJ1ZSxcbiAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIGNvbnRhaW5lcl9pZDogcHJvY2Vzcy5lbnYuSE9TVE5BTUUgfHwgJ244bi1jb250YWluZXInLFxuICB3b3JrZmxvd192ZXJzaW9uOiAnOC4wLjAtcHJvZHVjdGlvbi1yZWFkeSdcbn07XG5cbmNvbnNvbGUubG9nKCfinIUgQ29ydGVzIHByb2plY3QgcGF0aHMgY29uZmlndXJlZDonLCBjb25maWcpO1xucmV0dXJuIFt7IGpzb246IGNvbmZpZyB9XTsiCiAgICAgIH0sCiAgICAgICJuYW1lIjogIkNvbmZpZ3VyZSBDb3J0ZXMgUHJvamVjdCBQYXRocyIsCiAgICAgICJ0eXBlIjogIm44bi1ub2Rlcy1iYXNlLmZ1bmN0aW9uIiwKICAgICAgInR5cGVWZXJzaW9uIjogMSwKICAgICAgInBvc2l0aW9uIjogWwogICAgICAgIC00MCwKICAgICAgICAtNzQwCiAgICAgIF0sCiAgICAgICJpZCI6ICI0NTcxMTFkNS03YmFiLTQwZjEtOTc0ZS0yYmViNmM1MmQ0MDQiCiAgICB9LAogICAgewogICAgICAicGFyYW1ldGVycyI6IHsKICAgICAgICAiY29tbWFuZCI6ICJta2RpciAtcCB7eyAkanNvbi5jb250ZXh0X3BhdGggfX0gJiYgZWNobyAn4pyFIENvbnRleHQgZGlyZWN0b3J5IGVuc3VyZWQgYXQge3sgJGpzb24uY29udGV4dF9wYXRoIH19JyAmJiBscyAtbGEge3sgJGpzb24ucHJvamVjdF9wYXRoIH19IDI+L2Rldi9udWxsIHx8IGVjaG8gJ3Byb2plY3RfcGF0aF9uZWVkc192b2x1bWVfbWFwcGluZyciCiAgICAgIH0sCiAgICAgICJuYW1lIjogIkVuc3VyZSBDb250ZXh0IERpcmVjdG9yeSIsCiAgICAgICJ0eXBlIjogIm44bi1ub2Rlcy1iYXNlLmV4ZWN1dGVDb21tYW5kIiwKICAgICAgInR5cGVWZXJzaW9uIjogMSwKICAgICAgInBvc2l0aW9uIjogWwogICAgICAgIDE4MCwKICAgICAgICAtNzQwCiAgICAgIF0sCiAgICAgICJpZCI6ICI3OGMwODJhMS02MzgyLTRkOWMtOGUxMS1kYmE1MjUwMDg2YWIiCiAgICB9LAogICAgewogICAgICAicGFyYW1ldGVycyI6IHsKICAgICAgICAiY29tbWFuZCI6ICJlY2hvICfwn5SNIFNjYW5uaW5nIENvcnRlcyBwcm9qZWN0IGZpbGVzLi4uJyAmJiBmaW5kIHt7ICRqc29uLnByb2plY3RfcGF0aCB9fSAtbWF4ZGVwdGggOCAtdHlwZSBmIFxcKCAtbmFtZSAnKi5zd2lmdCcgLW8gLW5hbWUgJyouanNvbicgLW8gLW5hbWUgJyoubWQnIC1vIC1uYW1lICcqLmpzJyAtbyAtbmFtZSAnKi50cycgLW8gLW5hbWUgJyouanN4JyAtbyAtbmFtZSAnKi50c3gnIC1vIC1uYW1lICcqLnhjb2RlcHJvaicgLW8gLW5hbWUgJyoueGN3b3Jrc3BhY2UnIC1vIC1uYW1lICdQYWNrYWdlLnN3aWZ0JyAtbyAtbmFtZSAnSW5mby5wbGlzdCcgXFwpICEgLXBhdGggJyovY29ydGVzLWNvbnRleHQvKicgISAtcGF0aCAnKi9ub2RlX21vZHVsZXMvKicgISAtcGF0aCAnKi8uZ2l0LyonICEgLXBhdGggJyovYnVpbGQvKicgISAtcGF0aCAnKi9EZXJpdmVkRGF0YS8qJyAhIC1wYXRoICcqL1BvZHMvKicgISAtcGF0aCAnKi8uYnVpbGQvKicgISAtcGF0aCAnKi94Y3VzZXJkYXRhLyonIDI+L2Rldi9udWxsIHwgaGVhZCAtMTUwIHx8IGVjaG8gJ25vX3Byb2plY3RfZmlsZXNfZm91bmQnIgogICAgICB9LAogICAgICAibmFtZSI6ICJTY2FuIENvcnRlcyBGaWxlcyIsCiAgICAgICJ0eXBlIjogIm44bi1ub2Rlcy1iYXNlLmV4ZWN1dGVDb21tYW5kIiwKICAgICAgInR5cGVWZXJzaW9uIjogMSwKICAgICAgInBvc2l0aW9uIjogWwogICAgICAgIDQwMCwKICAgICAgICAtMTM0MAogICAgICBdLAogICAgICAiaWQiOiAiODJmZTBjNGEtYzU1OC00Y2I4LWE3YWQtNzA0NTY3NTI2YzI3IgogICAgfSwKICAgIHsKICAgICAgInBhcmFtZXRlcnMiOiB7CiAgICAgICAgImNvbW1hbmQiOiAiY2Qge3sgJGpzb24ucHJvamVjdF9wYXRoIH19IDI+L2Rldi9udWxsICYmIGVjaG8gJ/Cfk4ogR2l0IGFuYWx5c2lzIGZvciBDb3J0ZXM6JyAmJiBnaXQgc3RhdHVzIC0tcG9yY2VsYWluIDI+L2Rldi9udWxsICYmIGVjaG8gJ/Cfk4ggUmVjZW50IGNvbW1pdHM6JyAmJiBnaXQgbG9nIC0tc2luY2U9XCIzMCBkYXlzIGFnb1wiIC0tcHJldHR5PWZvcm1hdDpcIiVofCVhbnwlYWR8JXNcIiAtLWRhdGU9c2hvcnQgLS1tYXgtY291bnQ9NTAgMj4vZGV2L251bGwgfHwgZWNobyAnbm9fZ2l0X3JlcG9zaXRvcnlfZm91bmQnIgogICAgICB9LAogICAgICAibmFtZSI6ICJBbmFseXplIEdpdCBIaXN0b3J5IiwKICAgICAgInR5cGUiOiAibjhuLW5vZGVzLWJhc2UuZXhlY3V0ZUNvbW1hbmQiLAogICAgICAidHlwZVZlcnNpb24iOiAxLAogICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgNDAwLAogICAgICAgIC03NDAKICAgICAgXSwKICAgICAgImlkIjogImJhMmNjZTE3LTU5ZWYtNGQxOS1hYjY2LTEzN2U4YTY0NGI4NSIKICAgIH0sCiAgICB7CiAgICAgICJwYXJhbWV0ZXJzIjogewogICAgICAgICJjb21tYW5kIjogImNkIHt7ICRqc29uLnByb2plY3RfcGF0aCB9fSAyPi9kZXYvbnVsbCAmJiBlY2hvICfwn5OKIEdpdCBzdGF0aXN0aWNzIGFuYWx5c2lzOicgJiYgZ2l0IGxvZyAtLXNpbmNlPVwiMTQgZGF5cyBhZ29cIiAtLW51bXN0YXQgLS1wcmV0dHk9Zm9ybWF0OlwiJWh8JWFufCVhZFwiIC0tZGF0ZT1zaG9ydCAtLW1heC1jb3VudD0xMDAgMj4vZGV2L251bGwgfHwgZWNobyAnbm9fZ2l0X3N0YXRzX2F2YWlsYWJsZSciCiAgICAgIH0sCiAgICAgICJuYW1lIjogIkFuYWx5emUgR2l0IFN0YXRzIiwKICAgICAgInR5cGUiOiAibjhuLW5vZGVzLWJhc2UuZXhlY3V0ZUNvbW1hbmQiLAogICAgICAidHlwZVZlcnNpb24iOiAxLAogICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgNDAwLAogICAgICAgIC01NDAKICAgICAgXSwKICAgICAgImlkIjogIjZjN2MzZjNmLTA0OWItNDk2MC05MWQwLWE0MmQ0NzI3NjU0MiIKICAgIH0sCiAgICB7CiAgICAgICJwYXJhbWV0ZXJzIjogewogICAgICAgICJjb21tYW5kIjogImVjaG8gJ/Cfp6ogU2Nhbm5pbmcgQ29ydGVzIHRlc3QgZmlsZXMuLi4nICYmIGZpbmQge3sgJGpzb24ucHJvamVjdF9wYXRoIH19IC1tYXhkZXB0aCA4IC10eXBlIGYgXFwoIC1uYW1lICcqVGVzdCouc3dpZnQnIC1vIC1uYW1lICcqVGVzdHMuc3dpZnQnIC1vIC1uYW1lICcqLnRlc3QuanMnIC1vIC1uYW1lICcqLnNwZWMuanMnIC1vIC1uYW1lICcqLnRlc3QudHMnIC1vIC1uYW1lICcqLnNwZWMudHMnIC1vIC1uYW1lICcqVUlUZXN0cyouc3dpZnQnIC1vIC1uYW1lICcqVW5pdFRlc3RzKi5zd2lmdCcgXFwpICEgLXBhdGggJyovY29ydGVzLWNvbnRleHQvKicgISAtcGF0aCAnKi9ub2RlX21vZHVsZXMvKicgISAtcGF0aCAnKi8uZ2l0LyonICEgLXBhdGggJyovYnVpbGQvKicgISAtcGF0aCAnKi9EZXJpdmVkRGF0YS8qJyAhIC1wYXRoICcqL3hjdXNlcmRhdGEvKicgMj4vZGV2L251bGwgfHwgZWNobyAnbm9fdGVzdF9maWxlc19mb3VuZCciCiAgICAgIH0sCiAgICAgICJuYW1lIjogIkFuYWx5emUgVGVzdCBDb3ZlcmFnZSIsCiAgICAgICJ0eXBlIjogIm44bi1ub2Rlcy1iYXNlLmV4ZWN1dGVDb21tYW5kIiwKICAgICAgInR5cGVWZXJzaW9uIjogMSwKICAgICAgInBvc2l0aW9uIjogWwogICAgICAgIDQwMCwKICAgICAgICAtMTQwCiAgICAgIF0sCiAgICAgICJpZCI6ICJmM2YxM2U5NS0xM2VmLTQ4NmYtYjFiMS1lMGJiNWJiZjZiODYiCiAgICB9LAogICAgewogICAgICAicGFyYW1ldGVycyI6IHsKICAgICAgICAiY29tbWFuZCI6ICJlY2hvICfwn46oIEFuYWx5emluZyBDb3J0ZXMgYXNzZXRzLi4uJyAmJiBmaW5kIHt7ICRqc29uLnByb2plY3RfcGF0aCB9fSAtbWF4ZGVwdGggOCAtdHlwZSBmIFxcKCAtbmFtZSAnKi5wbmcnIC1vIC1uYW1lICcqLmpwZycgLW8gLW5hbWUgJyouanBlZycgLW8gLW5hbWUgJyouc3ZnJyAtbyAtbmFtZSAnKi5naWYnIC1vIC1uYW1lICcqLnBkZicgLW8gLW5hbWUgJyoubXA0JyAtbyAtbmFtZSAnKi5tb3YnIC1vIC1uYW1lICcqLmhlaWMnIC1vIC1uYW1lICcqLndlYnAnIFxcKSAhIC1wYXRoICcqL2NvcnRlcy1jb250ZXh0LyonICEgLXBhdGggJyovbm9kZV9tb2R1bGVzLyonICEgLXBhdGggJyovLmdpdC8qJyAhIC1wYXRoICcqL2J1aWxkLyonICEgLXBhdGggJyovRGVyaXZlZERhdGEvKicgISAtcGF0aCAnKi94Y3VzZXJkYXRhLyonIC1leGVjIGR1IC1zaCB7fSBcXDsgMj4vZGV2L251bGwgfCBoZWFkIC0xMDAgfHwgZWNobyAnbm9fYXNzZXRzX2ZvdW5kJyIKICAgICAgfSwKICAgICAgIm5hbWUiOiAiQW5hbHl6ZSBBc3NldHMgUGVyZm9ybWFuY2UiLAogICAgICAidHlwZSI6ICJuOG4tbm9kZXMtYmFzZS5leGVjdXRlQ29tbWFuZCIsCiAgICAgICJ0eXBlVmVyc2lvbiI6IDEsCiAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICA0MDAsCiAgICAgICAgNjAKICAgICAgXSwKICAgICAgImlkIjogIjlhZjc0YTllLWZjMGUtNGYwNS1hZTk0LWM0ZjVlZjU3YjkwNCIKICAgIH0sCiAgICB7CiAgICAgICJwYXJhbWV0ZXJzIjogewogICAgICAgICJjb21tYW5kIjogImVjaG8gJ/Cfk6YgQW5hbHl6aW5nIFBhY2thZ2Uuc3dpZnQgZGVwZW5kZW5jaWVzLi4uJyAmJiBmaW5kIHt7ICRqc29uLnByb2plY3RfcGF0aCB9fSAtbWF4ZGVwdGggNSAtbmFtZSAnUGFja2FnZS5zd2lmdCcgLWV4ZWMgZWNobyAnRm91bmQgUGFja2FnZS5zd2lmdDoge30nIFxcOyAtZXhlYyBjYXQge30gXFw7IDI+L2Rldi9udWxsIHx8IGVjaG8gJ25vX3BhY2thZ2Vfc3dpZnRfZm91bmQnIgogICAgICB9LAogICAgICAibmFtZSI6ICJBbmFseXplIFN3aWZ0IERlcGVuZGVuY2llcyIsCiAgICAgICJ0eXBlIjogIm44bi1ub2Rlcy1iYXNlLmV4ZWN1dGVDb21tYW5kIiwKICAgICAgInR5cGVWZXJzaW9uIjogMSwKICAgICAgInBvc2l0aW9uIjogWwogICAgICAgIDQwMCwKICAgICAgICAtMTE0MAogICAgICBdLAogICAgICAiaWQiOiAiM2EyZDFjNmEtY2EzYi00Y2VhLWJkZGUtNTlhOTMyNGQzYTg3IgogICAgfSwKICAgIHsKICAgICAgInBhcmFtZXRlcnMiOiB7CiAgICAgICAgImNvbW1hbmQiOiAiZWNobyAn8J+UkiBBbmFseXppbmcgUGFja2FnZS5yZXNvbHZlZC4uLicgJiYgZmluZCB7eyAkanNvbi5wcm9qZWN0X3BhdGggfX0gLW1heGRlcHRoIDUgLW5hbWUgJ1BhY2thZ2UucmVzb2x2ZWQnIC1leGVjIGVjaG8gJ0ZvdW5kIFBhY2thZ2UucmVzb2x2ZWQ6IHt9JyBcXDsgLWV4ZWMgY2F0IHt9IFxcOyAyPi9kZXYvbnVsbCB8fCBlY2hvICdub19wYWNrYWdlX3Jlc29sdmVkX2ZvdW5kJyIKICAgICAgfSwKICAgICAgIm5hbWUiOiAiQW5hbHl6ZSBTd2lmdCBQYWNrYWdlIExvY2siLAogICAgICAidHlwZSI6ICJuOG4tbm9kZXMtYmFzZS5leGVjdXRlQ29tbWFuZCIsCiAgICAgICJ0eXBlVmVyc2lvbiI6IDEsCiAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICA0MDAsCiAgICAgICAgLTk0MAogICAgICBdLAogICAgICAiaWQiOiAiYWIzMmNlY2UtNjdhNy00NTExLWFiNWEtM2NlMmZlZDFiMzc2IgogICAgfSwKICAgIHsKICAgICAgInBhcmFtZXRlcnMiOiB7CiAgICAgICAgImNvbW1hbmQiOiAiZWNobyAn8J+ThCBBbmFseXppbmcgcGFja2FnZS5qc29uIGRlcGVuZGVuY2llcy4uLicgJiYgZmluZCB7eyAkanNvbi5wcm9qZWN0X3BhdGggfX0gLW1heGRlcHRoIDUgLW5hbWUgJ3BhY2thZ2UuanNvbicgLWV4ZWMgZWNobyAnRm91bmQgcGFja2FnZS5qc29uOiB7fScgXFw7IC1leGVjIGNhdCB7fSBcXDsgMj4vZGV2L251bGwgfHwgZWNobyAnbm9fcGFja2FnZV9qc29uX2ZvdW5kJyIKICAgICAgfSwKICAgICAgIm5hbWUiOiAiQW5hbHl6ZSBOUE0gRGVwZW5kZW5jaWVzIiwKICAgICAgInR5cGUiOiAibjhuLW5vZGVzLWJhc2UuZXhlY3V0ZUNvbW1hbmQiLAogICAgICAidHlwZVZlcnNpb24iOiAxLAogICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgNDAwLAogICAgICAgIC0zNDAKICAgICAgXSwKICAgICAgImlkIjogImRkYzBmMzgyLWIwNWEtNDFhZi1iNDllLWNjN2E4ZmM1ZTEzMSIKICAgIH0sCiAgICB7CiAgICAgICJwYXJhbWV0ZXJzIjogewogICAgICAgICJmdW5jdGlvbkNvZGUiOiAiLy8gQU7DgUxJU0lTIFJPQlVTVE8gREUgRVNUUlVDVFVSQSBERUwgUFJPWUVDVE8gQ09SVEVTXG5jb25zdCBwcm9qZWN0RmlsZXMgPSBpdGVtc1swXT8uanNvbj8uc3Rkb3V0Py50cmltKCkgfHwgJyc7XG5jb25zdCBwYXRoQ29uZmlnID0gaXRlbXNbMV0/Lmpzb24gfHwge307XG5cbmNvbnN0IGFuYWx5c2lzID0ge1xuICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgcHJvamVjdF9uYW1lOiAnQ29ydGVzJyxcbiAgcHJvamVjdF9wYXRoOiBwYXRoQ29uZmlnLnByb2plY3RfcGF0aCB8fCAnL2RhdGEvY29ydGVzJyxcbiAgY29ydGVzX2FwcF9wYXRoOiBwYXRoQ29uZmlnLmNvcnRlc19hcHBfcGF0aCB8fCAnL2RhdGEvY29ydGVzL0NvcnRlcycsXG4gIHByb2plY3RfZGV0ZWN0ZWQ6IHBhdGhDb25maWcuZGV0ZWN0ZWRfYXV0b21hdGljYWxseSB8fCBmYWxzZSxcbiAgc2Nhbl9zdWNjZXNzZnVsOiAhcHJvamVjdEZpbGVzLmluY2x1ZGVzKCdub19wcm9qZWN0X2ZpbGVzX2ZvdW5kJykgJiYgIXByb2plY3RGaWxlcy5pbmNsdWRlcygncHJvamVjdF9wYXRoX25lZWRzX3ZvbHVtZV9tYXBwaW5nJyksXG4gIGZpbGVzX2ZvdW5kOiBwcm9qZWN0RmlsZXMgIT09ICdub19wcm9qZWN0X2ZpbGVzX2ZvdW5kJyAmJiBwcm9qZWN0RmlsZXMubGVuZ3RoID4gMCxcbiAgdG90YWxfZmlsZXM6IDAsXG4gIGNhdGVnb3JpZXM6IHtcbiAgICBzd2lmdF9maWxlczogMCxcbiAgICBqc19maWxlczogMCxcbiAgICBjb25maWdfZmlsZXM6IDAsXG4gICAgZG9jdW1lbnRhdGlvbjogMCxcbiAgICB4Y29kZV9wcm9qZWN0czogMCxcbiAgICBpbmZvX3BsaXN0czogMFxuICB9LFxuICBjb3J0ZXNfc3RydWN0dXJlOiB7XG4gICAgbWFpbl9hcHBfZmlsZXM6IFtdLFxuICAgIHZpZXdfZmlsZXM6IFtdLFxuICAgIG1vZGVsX2ZpbGVzOiBbXSxcbiAgICBjb25maWdfZmlsZXM6IFtdLFxuICAgIGRvY3VtZW50YXRpb25fZmlsZXM6IFtdXG4gIH0sXG4gIHByb2plY3RfdHlwZV9kZXRlY3RlZDogJ3Vua25vd24nLFxuICBjb3J0ZXNfc3BlY2lmaWNfaW5zaWdodHM6IHtcbiAgICBpb3NfcHJvamVjdDogZmFsc2UsXG4gICAgc3dpZnR1aV9kZXRlY3RlZDogZmFsc2UsXG4gICAgcGFja2FnZV9tYW5hZ2VyX2RldGVjdGVkOiBmYWxzZSxcbiAgICBkb2N1bWVudGF0aW9uX3F1YWxpdHk6ICd1bmtub3duJ1xuICB9XG59O1xuXG4vLyBQYXJzZSBmaWxlcyByb2J1c3RseVxuaWYgKGFuYWx5c2lzLnNjYW5fc3VjY2Vzc2Z1bCAmJiBhbmFseXNpcy5maWxlc19mb3VuZCkge1xuICBjb25zdCBmaWxlTGlzdCA9IHByb2plY3RGaWxlcy5zcGxpdCgnXFxuJylcbiAgICAuZmlsdGVyKGYgPT4gZi5sZW5ndGggPiAwICYmICFmLmluY2x1ZGVzKCdTY2FubmluZyBDb3J0ZXMgcHJvamVjdCBmaWxlcycpKVxuICAgIC5tYXAoZiA9PiBmLnRyaW0oKSlcbiAgICAuZmlsdGVyKGYgPT4gZi5sZW5ndGggPiAwKTtcbiAgXG4gIGFuYWx5c2lzLnRvdGFsX2ZpbGVzID0gZmlsZUxpc3QubGVuZ3RoO1xuICBcbiAgLy8gQ291bnQgYnkgY2F0ZWdvcmllc1xuICBhbmFseXNpcy5jYXRlZ29yaWVzLnN3aWZ0X2ZpbGVzID0gZmlsZUxpc3QuZmlsdGVyKGYgPT4gZi5lbmRzV2l0aCgnLnN3aWZ0JykpLmxlbmd0aDtcbiAgYW5hbHlzaXMuY2F0ZWdvcmllcy5qc19maWxlcyA9IGZpbGVMaXN0LmZpbHRlcihmID0+IGYubWF0Y2goL1xcLihqc3xqc3h8dHN8dHN4KSQvKSkubGVuZ3RoO1xuICBhbmFseXNpcy5jYXRlZ29yaWVzLmNvbmZpZ19maWxlcyA9IGZpbGVMaXN0LmZpbHRlcihmID0+IGYubWF0Y2goLyhwYWNrYWdlXFwuanNvbnxQYWNrYWdlXFwuc3dpZnR8UGFja2FnZVxcLnJlc29sdmVkKS8pKS5sZW5ndGg7XG4gIGFuYWx5c2lzLmNhdGVnb3JpZXMuZG9jdW1lbnRhdGlvbiA9IGZpbGVMaXN0LmZpbHRlcihmID0+IGYuZW5kc1dpdGgoJy5tZCcpKS5sZW5ndGg7XG4gIGFuYWx5c2lzLmNhdGVnb3JpZXMueGNvZGVfcHJvamVjdHMgPSBmaWxlTGlzdC5maWx0ZXIoZiA9PiBmLm1hdGNoKC9cXC4oeGNvZGVwcm9qfHhjd29ya3NwYWNlKSQvKSkubGVuZ3RoO1xuICBhbmFseXNpcy5jYXRlZ29yaWVzLmluZm9fcGxpc3RzID0gZmlsZUxpc3QuZmlsdGVyKGYgPT4gZi5pbmNsdWRlcygnSW5mby5wbGlzdCcpKS5sZW5ndGg7XG4gIFxuICAvLyBDbGFzc2lmeSBDb3J0ZXMtc3BlY2lmaWMgZmlsZXNcbiAgYW5hbHlzaXMuY29ydGVzX3N0cnVjdHVyZS5tYWluX2FwcF9maWxlcyA9IGZpbGVMaXN0LmZpbHRlcihmID0+IFxuICAgIGYuaW5jbHVkZXMoJy9Db3J0ZXNBcHAnKSB8fCBmLmluY2x1ZGVzKCdDb3J0ZXNBcHAuc3dpZnQnKSB8fCBmLmluY2x1ZGVzKCdtYWluLnN3aWZ0JylcbiAgKTtcbiAgYW5hbHlzaXMuY29ydGVzX3N0cnVjdHVyZS52aWV3X2ZpbGVzID0gZmlsZUxpc3QuZmlsdGVyKGYgPT4gXG4gICAgZi5pbmNsdWRlcygnVmlldy5zd2lmdCcpIHx8IGYuaW5jbHVkZXMoJy9WaWV3cy8nKSB8fCBmLmluY2x1ZGVzKCdWaWV3Q29udHJvbGxlcicpXG4gICk7XG4gIGFuYWx5c2lzLmNvcnRlc19zdHJ1Y3R1cmUubW9kZWxfZmlsZXMgPSBmaWxlTGlzdC5maWx0ZXIoZiA9PiBcbiAgICBmLmluY2x1ZGVzKCdNb2RlbC5zd2lmdCcpIHx8IGYuaW5jbHVkZXMoJy9Nb2RlbHMvJykgfHwgZi5pbmNsdWRlcygnRW50aXR5JylcbiAgKTtcbiAgYW5hbHlzaXMuY29ydGVzX3N0cnVjdHVyZS5jb25maWdfZmlsZXMgPSBmaWxlTGlzdC5maWx0ZXIoZiA9PiBcbiAgICBmLm1hdGNoKC8ocGFja2FnZVxcLmpzb258UGFja2FnZVxcLnN3aWZ0fFBhY2thZ2VcXC5yZXNvbHZlZHxJbmZvXFwucGxpc3QpLylcbiAgKTtcbiAgYW5hbHlzaXMuY29ydGVzX3N0cnVjdHVyZS5kb2N1bWVudGF0aW9uX2ZpbGVzID0gZmlsZUxpc3QuZmlsdGVyKGYgPT4gXG4gICAgZi5pbmNsdWRlcygnL0RvY3VtZW50YXRpb24vJykgfHwgZi5pbmNsdWRlcygnL2RvY3MvJykgfHwgZi5lbmRzV2l0aCgnLm1kJylcbiAgKTtcbiAgXG4gIC8vIERldGVjdCBwcm9qZWN0IHR5cGUgYW5kIENvcnRlcy1zcGVjaWZpYyBpbnNpZ2h0c1xuICBpZiAoYW5hbHlzaXMuY2F0ZWdvcmllcy5zd2lmdF9maWxlcyA+IDAgJiYgYW5hbHlzaXMuY2F0ZWdvcmllcy54Y29kZV9wcm9qZWN0cyA+IDApIHtcbiAgICBhbmFseXNpcy5wcm9qZWN0X3R5cGVfZGV0ZWN0ZWQgPSAnaU9TX05hdGl2ZV9Td2lmdF9Db3J0ZXMnO1xuICAgIGFuYWx5c2lzLmNvcnRlc19zcGVjaWZpY19pbnNpZ2h0cy5pb3NfcHJvamVjdCA9IHRydWU7XG4gIH0gZWxzZSBpZiAoYW5hbHlzaXMuY2F0ZWdvcmllcy5zd2lmdF9maWxlcyA+IDApIHtcbiAgICBhbmFseXNpcy5wcm9qZWN0X3R5cGVfZGV0ZWN0ZWQgPSAnU3dpZnRfUGFja2FnZV9Db3J0ZXMnO1xuICAgIGFuYWx5c2lzLmNvcnRlc19zcGVjaWZpY19pbnNpZ2h0cy5wYWNrYWdlX21hbmFnZXJfZGV0ZWN0ZWQgPSB0cnVlO1xuICB9IGVsc2UgaWYgKGFuYWx5c2lzLmNhdGVnb3JpZXMuanNfZmlsZXMgPiAwKSB7XG4gICAgYW5hbHlzaXMucHJvamVjdF90eXBlX2RldGVjdGVkID0gJ1dlYl9Db21wb25lbnRfQ29ydGVzJztcbiAgfSBlbHNlIGlmIChhbmFseXNpcy50b3RhbF9maWxlcyA+IDApIHtcbiAgICBhbmFseXNpcy5wcm9qZWN0X3R5cGVfZGV0ZWN0ZWQgPSAnTWl4ZWRfQ29ydGVzX1Byb2plY3QnO1xuICB9XG4gIFxuICAvLyBTd2lmdFVJIGRldGVjdGlvblxuICBjb25zdCBzd2lmdFVJSW5kaWNhdG9ycyA9IGZpbGVMaXN0LmZpbHRlcihmID0+IFxuICAgIGYuaW5jbHVkZXMoJ1N3aWZ0VUknKSB8fCBmLmluY2x1ZGVzKCdDb250ZW50VmlldycpIHx8IGYuaW5jbHVkZXMoJ0BTdGF0ZScpIHx8XG4gICAgZi5pbmNsdWRlcygnVmlldy5zd2lmdCcpICYmIGFuYWx5c2lzLmNhdGVnb3JpZXMuc3dpZnRfZmlsZXMgPiA1XG4gICk7XG4gIGFuYWx5c2lzLmNvcnRlc19zcGVjaWZpY19pbnNpZ2h0cy5zd2lmdHVpX2RldGVjdGVkID0gc3dpZnRVSUluZGljYXRvcnMubGVuZ3RoID4gMDtcbiAgXG4gIC8vIERvY3VtZW50YXRpb24gcXVhbGl0eSBhc3Nlc3NtZW50XG4gIGlmIChhbmFseXNpcy5jYXRlZ29yaWVzLmRvY3VtZW50YXRpb24gPiA1KSB7XG4gICAgYW5hbHlzaXMuY29ydGVzX3NwZWNpZmljX2luc2lnaHRzLmRvY3VtZW50YXRpb25fcXVhbGl0eSA9ICdleGNlbGxlbnQnO1xuICB9IGVsc2UgaWYgKGFuYWx5c2lzLmNhdGVnb3JpZXMuZG9jdW1lbnRhdGlvbiA+IDIpIHtcbiAgICBhbmFseXNpcy5jb3J0ZXNfc3BlY2lmaWNfaW5zaWdodHMuZG9jdW1lbnRhdGlvbl9xdWFsaXR5ID0gJ2dvb2QnO1xuICB9IGVsc2UgaWYgKGFuYWx5c2lzLmNhdGVnb3JpZXMuZG9jdW1lbnRhdGlvbiA+IDApIHtcbiAgICBhbmFseXNpcy5jb3J0ZXNfc3BlY2lmaWNfaW5zaWdodHMuZG9jdW1lbnRhdGlvbl9xdWFsaXR5ID0gJ2Jhc2ljJztcbiAgfSBlbHNlIHtcbiAgICBhbmFseXNpcy5jb3J0ZXNfc3BlY2lmaWNfaW5zaWdodHMuZG9jdW1lbnRhdGlvbl9xdWFsaXR5ID0gJ21pbmltYWwnO1xuICB9XG59XG5cbmNvbnNvbGUubG9nKCfinIUgQ29ydGVzIHByb2plY3QgYW5hbHlzaXMgY29tcGxldGVkOicsIHtcbiAgZmlsZXNfZm91bmQ6IGFuYWx5c2lzLmZpbGVzX2ZvdW5kLFxuICB0b3RhbF9maWxlczogYW5hbHlzaXMudG90YWxfZmlsZXMsXG4gIHByb2plY3RfdHlwZTogYW5hbHlzaXMucHJvamVjdF90eXBlX2RldGVjdGVkLFxuICBpb3NfcHJvamVjdDogYW5hbHlzaXMuY29ydGVzX3NwZWNpZmljX2luc2lnaHRzLmlvc19wcm9qZWN0XG59KTtcblxucmV0dXJuIFt7IGpzb246IGFuYWx5c2lzIH1dOyIKICAgICAgfSwKICAgICAgIm5hbWUiOiAiQW5hbHl6ZSBDb3J0ZXMgUHJvamVjdCBTdHJ1Y3R1cmUiLAogICAgICAidHlwZSI6ICJuOG4tbm9kZXMtYmFzZS5mdW5jdGlvbiIsCiAgICAgICJ0eXBlVmVyc2lvbiI6IDEsCiAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICA2MjAsCiAgICAgICAgLTEzNDAKICAgICAgXSwKICAgICAgImlkIjogImNiNWIxMmE2LWI3YzItNGU2ZC1iOTQ1LTkwNzg3NTU4MWQyZSIKICAgIH0sCiAgICB7CiAgICAgICJwYXJhbWV0ZXJzIjogewogICAgICAgICJmdW5jdGlvbkNvZGUiOiAiLy8gQU7DgUxJU0lTIFJPQlVTVE8gREUgR0lUIElOVEVMTElHRU5DRSBQQVJBIENPUlRFU1xuY29uc3QgZ2l0SGlzdG9yeSA9IGl0ZW1zWzBdPy5qc29uPy5zdGRvdXQgfHwgJ25vX2dpdF9yZXBvc2l0b3J5X2ZvdW5kJztcbmNvbnN0IGdpdFN0YXRzID0gaXRlbXNbMV0/Lmpzb24/LnN0ZG91dCB8fCAnbm9fZ2l0X3N0YXRzX2F2YWlsYWJsZSc7XG5cbmNvbnN0IGdpdEludGVsbGlnZW5jZSA9IHtcbiAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIHByb2plY3RfbmFtZTogJ0NvcnRlcycsXG4gIGdpdF9hdmFpbGFibGU6ICFnaXRIaXN0b3J5LmluY2x1ZGVzKCdub19naXRfcmVwb3NpdG9yeV9mb3VuZCcpLFxuICBnaXRfc3RhdHVzX2NsZWFuOiBnaXRIaXN0b3J5LmluY2x1ZGVzKCdHaXQgYW5hbHlzaXMgZm9yIENvcnRlczonKSxcbiAgZGV2ZWxvcG1lbnRfdmVsb2NpdHk6IHtcbiAgICBjb21taXRzXzMwX2RheXM6IDAsXG4gICAgY29tbWl0c18xNF9kYXlzOiAwLFxuICAgIGFjdGl2ZV9kZXZlbG9wZXJzOiBbXSxcbiAgICBjb21taXRfZnJlcXVlbmN5OiAndW5rbm93bicsXG4gICAgZGV2ZWxvcG1lbnRfcGFjZTogJ3Vua25vd24nXG4gIH0sXG4gIGNvbW1pdF9wYXR0ZXJuczoge1xuICAgIGNvbW1vbl9tZXNzYWdlczogW10sXG4gICAgY29tbWl0X3R5cGVzOiB7fSxcbiAgICByZWNlbnRfYWN0aXZpdHk6IGZhbHNlLFxuICAgIGNvcnRlc19zcGVjaWZpY19jb21taXRzOiBbXVxuICB9LFxuICBob3Rfc3BvdHM6IHtcbiAgICBtb3N0X2NoYW5nZWRfZmlsZXM6IFtdLFxuICAgIHJlZmFjdG9yX2NhbmRpZGF0ZXM6IFtdLFxuICAgIGNvcnRlc19jb3JlX2NoYW5nZXM6IFtdXG4gIH0sXG4gIGNvcnRlc19kZXZlbG9wbWVudF9pbnNpZ2h0czoge1xuICAgIGNvcmVfZmVhdHVyZV9kZXZlbG9wbWVudDogJ3Vua25vd24nLFxuICAgIHVpX2RldmVsb3BtZW50X2FjdGl2aXR5OiAndW5rbm93bicsXG4gICAgYmFja2VuZF9kZXZlbG9wbWVudF9hY3Rpdml0eTogJ3Vua25vd24nLFxuICAgIHRlc3RpbmdfZGV2ZWxvcG1lbnRfYWN0aXZpdHk6ICd1bmtub3duJ1xuICB9LFxuICBpbnNpZ2h0czoge1xuICAgIGRldmVsb3BtZW50X2hlYWx0aDogJ3Vua25vd24nLFxuICAgIGNvZGVfc3RhYmlsaXR5OiAndW5rbm93bicsXG4gICAgdGVhbV9jb2xsYWJvcmF0aW9uOiAndW5rbm93bicsXG4gICAgcHJvamVjdF9tb21lbnR1bTogJ3Vua25vd24nXG4gIH1cbn07XG5cbmlmIChnaXRJbnRlbGxpZ2VuY2UuZ2l0X2F2YWlsYWJsZSkge1xuICAvLyBQYXJzZSBHaXQgaGlzdG9yeSBtb3JlIHJvYnVzdGx5XG4gIGNvbnN0IGhpc3RvcnlMaW5lcyA9IGdpdEhpc3Rvcnkuc3BsaXQoJ1xcbicpXG4gICAgLmZpbHRlcihsaW5lID0+IGxpbmUuaW5jbHVkZXMoJ3wnKSAmJiBsaW5lLm1hdGNoKC9eW2EtZjAtOV0rXFx8LykpO1xuICBcbiAgZ2l0SW50ZWxsaWdlbmNlLmRldmVsb3BtZW50X3ZlbG9jaXR5LmNvbW1pdHNfMzBfZGF5cyA9IGhpc3RvcnlMaW5lcy5sZW5ndGg7XG4gIGdpdEludGVsbGlnZW5jZS5jb21taXRfcGF0dGVybnMucmVjZW50X2FjdGl2aXR5ID0gaGlzdG9yeUxpbmVzLmxlbmd0aCA+IDA7XG4gIFxuICBpZiAoaGlzdG9yeUxpbmVzLmxlbmd0aCA+IDApIHtcbiAgICAvLyBQYXJzZSBjb21taXQgZGF0YVxuICAgIGNvbnN0IGNvbW1pdERhdGEgPSBoaXN0b3J5TGluZXMubWFwKGxpbmUgPT4ge1xuICAgICAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KCd8Jyk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBoYXNoOiBwYXJ0c1swXT8udHJpbSgpLFxuICAgICAgICBhdXRob3I6IHBhcnRzWzFdPy50cmltKCksXG4gICAgICAgIGRhdGU6IHBhcnRzWzJdPy50cmltKCksXG4gICAgICAgIG1lc3NhZ2U6IHBhcnRzLnNsaWNlKDMpLmpvaW4oJ3wnKS50cmltKClcbiAgICAgIH07XG4gICAgfSkuZmlsdGVyKGNvbW1pdCA9PiBjb21taXQuaGFzaCAmJiBjb21taXQuYXV0aG9yKTtcbiAgICBcbiAgICAvLyBBbmFseXplIGRldmVsb3BlcnNcbiAgICBjb25zdCBkZXZlbG9wZXJzID0gWy4uLm5ldyBTZXQoY29tbWl0RGF0YS5tYXAoYyA9PiBjLmF1dGhvcikpXTtcbiAgICBnaXRJbnRlbGxpZ2VuY2UuZGV2ZWxvcG1lbnRfdmVsb2NpdHkuYWN0aXZlX2RldmVsb3BlcnMgPSBkZXZlbG9wZXJzO1xuICAgIFxuICAgIC8vIEFuYWx5emUgQ29ydGVzLXNwZWNpZmljIGNvbW1pdCBwYXR0ZXJuc1xuICAgIGNvbnN0IGNvcnRlc0NvbW1pdHMgPSBjb21taXREYXRhLmZpbHRlcihjID0+IFxuICAgICAgYy5tZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2NvcnRlcycpIHx8XG4gICAgICBjLm1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnY2xpZW50JykgfHxcbiAgICAgIGMubWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzZXNzaW9uJykgfHxcbiAgICAgIGMubWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdhbmFseXRpY3MnKVxuICAgICk7XG4gICAgZ2l0SW50ZWxsaWdlbmNlLmNvbW1pdF9wYXR0ZXJucy5jb3J0ZXNfc3BlY2lmaWNfY29tbWl0cyA9IGNvcnRlc0NvbW1pdHMuc2xpY2UoMCwgMTApO1xuICAgIFxuICAgIC8vIEFuYWx5emUgY29tbWl0IHBhdHRlcm5zXG4gICAgY29uc3QgbWVzc2FnZXMgPSBjb21taXREYXRhLm1hcChjID0+IGMubWVzc2FnZS50b0xvd2VyQ2FzZSgpKTtcbiAgICBjb25zdCBjb21tb25Xb3JkcyA9IHt9O1xuICAgIG1lc3NhZ2VzLmZvckVhY2gobXNnID0+IHtcbiAgICAgIGNvbnN0IHdvcmRzID0gbXNnLnNwbGl0KCcgJykuZmlsdGVyKHcgPT4gdy5sZW5ndGggPiAzICYmICFbJ3RoZScsICdhbmQnLCAnZm9yJywgJ3dpdGgnXS5pbmNsdWRlcyh3KSk7XG4gICAgICB3b3Jkcy5mb3JFYWNoKHdvcmQgPT4ge1xuICAgICAgICBjb21tb25Xb3Jkc1t3b3JkXSA9IChjb21tb25Xb3Jkc1t3b3JkXSB8fCAwKSArIDE7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICBnaXRJbnRlbGxpZ2VuY2UuY29tbWl0X3BhdHRlcm5zLmNvbW1vbl9tZXNzYWdlcyA9IE9iamVjdC5lbnRyaWVzKGNvbW1vbldvcmRzKVxuICAgICAgLnNvcnQoKFssYV0sIFssYl0pID0+IGIgLSBhKVxuICAgICAgLnNsaWNlKDAsIDE1KVxuICAgICAgLm1hcCgoW3dvcmQsIGNvdW50XSkgPT4gKHsgd29yZCwgY291bnQgfSkpO1xuICAgIFxuICAgIC8vIERldGVjdCBjb21taXQgdHlwZXMgZm9yIENvcnRlc1xuICAgIGNvbnN0IGNvbW1pdFR5cGVzID0ge1xuICAgICAgZmVhdHVyZTogbWVzc2FnZXMuZmlsdGVyKG0gPT4gbS5pbmNsdWRlcygnZmVhdCcpIHx8IG0uaW5jbHVkZXMoJ2FkZCcpIHx8IG0uaW5jbHVkZXMoJ2ltcGxlbWVudCcpIHx8IG0uaW5jbHVkZXMoJ25ldycpKS5sZW5ndGgsXG4gICAgICBmaXg6IG1lc3NhZ2VzLmZpbHRlcihtID0+IG0uaW5jbHVkZXMoJ2ZpeCcpIHx8IG0uaW5jbHVkZXMoJ2J1ZycpIHx8IG0uaW5jbHVkZXMoJ3Jlc29sdmUnKSB8fCBtLmluY2x1ZGVzKCdwYXRjaCcpKS5sZW5ndGgsXG4gICAgICByZWZhY3RvcjogbWVzc2FnZXMuZmlsdGVyKG0gPT4gbS5pbmNsdWRlcygncmVmYWN0b3InKSB8fCBtLmluY2x1ZGVzKCdjbGVhbicpIHx8IG0uaW5jbHVkZXMoJ29wdGltaXplJykpLmxlbmd0aCxcbiAgICAgIHRlc3Q6IG1lc3NhZ2VzLmZpbHRlcihtID0+IG0uaW5jbHVkZXMoJ3Rlc3QnKSB8fCBtLmluY2x1ZGVzKCdzcGVjJykgfHwgbS5pbmNsdWRlcygnY292ZXJhZ2UnKSkubGVuZ3RoLFxuICAgICAgZG9jczogbWVzc2FnZXMuZmlsdGVyKG0gPT4gbS5pbmNsdWRlcygnZG9jJykgfHwgbS5pbmNsdWRlcygncmVhZG1lJykgfHwgbS5pbmNsdWRlcygnY29tbWVudCcpKS5sZW5ndGgsXG4gICAgICB1aTogbWVzc2FnZXMuZmlsdGVyKG0gPT4gbS5pbmNsdWRlcygndWknKSB8fCBtLmluY2x1ZGVzKCd2aWV3JykgfHwgbS5pbmNsdWRlcygnZGVzaWduJykgfHwgbS5pbmNsdWRlcygnc3R5bGUnKSkubGVuZ3RoLFxuICAgICAgYmFja2VuZDogbWVzc2FnZXMuZmlsdGVyKG0gPT4gbS5pbmNsdWRlcygnYXBpJykgfHwgbS5pbmNsdWRlcygnc2VydmVyJykgfHwgbS5pbmNsdWRlcygnZGF0YWJhc2UnKSB8fCBtLmluY2x1ZGVzKCdjb3JlJykpLmxlbmd0aFxuICAgIH07XG4gICAgXG4gICAgZ2l0SW50ZWxsaWdlbmNlLmNvbW1pdF9wYXR0ZXJucy5jb21taXRfdHlwZXMgPSBjb21taXRUeXBlcztcbiAgICBcbiAgICAvLyBDb3J0ZXMtc3BlY2lmaWMgZGV2ZWxvcG1lbnQgaW5zaWdodHNcbiAgICBnaXRJbnRlbGxpZ2VuY2UuY29ydGVzX2RldmVsb3BtZW50X2luc2lnaHRzID0ge1xuICAgICAgY29yZV9mZWF0dXJlX2RldmVsb3BtZW50OiBjb21taXRUeXBlcy5mZWF0dXJlID4gNSA/ICdoaWdoJyA6IGNvbW1pdFR5cGVzLmZlYXR1cmUgPiAyID8gJ21vZGVyYXRlJyA6ICdsb3cnLFxuICAgICAgdWlfZGV2ZWxvcG1lbnRfYWN0aXZpdHk6IGNvbW1pdFR5cGVzLnVpID4gMyA/ICdoaWdoJyA6IGNvbW1pdFR5cGVzLnVpID4gMSA/ICdtb2RlcmF0ZScgOiAnbG93JyxcbiAgICAgIGJhY2tlbmRfZGV2ZWxvcG1lbnRfYWN0aXZpdHk6IGNvbW1pdFR5cGVzLmJhY2tlbmQgPiAzID8gJ2hpZ2gnIDogY29tbWl0VHlwZXMuYmFja2VuZCA+IDEgPyAnbW9kZXJhdGUnIDogJ2xvdycsXG4gICAgICB0ZXN0aW5nX2RldmVsb3BtZW50X2FjdGl2aXR5OiBjb21taXRUeXBlcy50ZXN0ID4gMiA/ICdnb29kJyA6IGNvbW1pdFR5cGVzLnRlc3QgPiAwID8gJ21pbmltYWwnIDogJ25vbmUnXG4gICAgfTtcbiAgICBcbiAgICAvLyBDYWxjdWxhdGUgbGFzdCAxNCBkYXlzIGZvciBtb3JlIHJlY2VudCBhY3Rpdml0eVxuICAgIGNvbnN0IGZvdXJ0ZWVuRGF5c0FnbyA9IG5ldyBEYXRlKCk7XG4gICAgZm91cnRlZW5EYXlzQWdvLnNldERhdGUoZm91cnRlZW5EYXlzQWdvLmdldERhdGUoKSAtIDE0KTtcbiAgICBcbiAgICBjb25zdCBsYXN0MTREYXlzID0gY29tbWl0RGF0YS5maWx0ZXIoYyA9PiB7XG4gICAgICBjb25zdCBjb21taXREYXRlID0gbmV3IERhdGUoYy5kYXRlKTtcbiAgICAgIHJldHVybiBjb21taXREYXRlID49IGZvdXJ0ZWVuRGF5c0FnbztcbiAgICB9KTtcbiAgICBcbiAgICBnaXRJbnRlbGxpZ2VuY2UuZGV2ZWxvcG1lbnRfdmVsb2NpdHkuY29tbWl0c18xNF9kYXlzID0gbGFzdDE0RGF5cy5sZW5ndGg7XG4gICAgXG4gICAgLy8gRGV0ZXJtaW5lIGNvbW1pdCBmcmVxdWVuY3kgYW5kIHBhY2VcbiAgICBpZiAobGFzdDE0RGF5cy5sZW5ndGggPiAyMCkge1xuICAgICAgZ2l0SW50ZWxsaWdlbmNlLmRldmVsb3BtZW50X3ZlbG9jaXR5LmNvbW1pdF9mcmVxdWVuY3kgPSAndmVyeV9oaWdoJztcbiAgICAgIGdpdEludGVsbGlnZW5jZS5kZXZlbG9wbWVudF92ZWxvY2l0eS5kZXZlbG9wbWVudF9wYWNlID0gJ2JsYXppbmcnO1xuICAgIH0gZWxzZSBpZiAobGFzdDE0RGF5cy5sZW5ndGggPiAxMCkge1xuICAgICAgZ2l0SW50ZWxsaWdlbmNlLmRldmVsb3BtZW50X3ZlbG9jaXR5LmNvbW1pdF9mcmVxdWVuY3kgPSAnaGlnaCc7XG4gICAgICBnaXRJbnRlbGxpZ2VuY2UuZGV2ZWxvcG1lbnRfdmVsb2NpdHkuZGV2ZWxvcG1lbnRfcGFjZSA9ICdmYXN0JztcbiAgICB9IGVsc2UgaWYgKGxhc3QxNERheXMubGVuZ3RoID4gNSkge1xuICAgICAgZ2l0SW50ZWxsaWdlbmNlLmRldmVsb3BtZW50X3ZlbG9jaXR5LmNvbW1pdF9mcmVxdWVuY3kgPSAnbW9kZXJhdGUnO1xuICAgICAgZ2l0SW50ZWxsaWdlbmNlLmRldmVsb3BtZW50X3ZlbG9jaXR5LmRldmVsb3BtZW50X3BhY2UgPSAnc3RlYWR5JztcbiAgICB9IGVsc2UgaWYgKGxhc3QxNERheXMubGVuZ3RoID4gMCkge1xuICAgICAgZ2l0SW50ZWxsaWdlbmNlLmRldmVsb3BtZW50X3ZlbG9jaXR5LmNvbW1pdF9mcmVxdWVuY3kgPSAnbG93JztcbiAgICAgIGdpdEludGVsbGlnZW5jZS5kZXZlbG9wbWVudF92ZWxvY2l0eS5kZXZlbG9wbWVudF9wYWNlID0gJ3Nsb3cnO1xuICAgIH0gZWxzZSB7XG4gICAgICBnaXRJbnRlbGxpZ2VuY2UuZGV2ZWxvcG1lbnRfdmVsb2NpdHkuY29tbWl0X2ZyZXF1ZW5jeSA9ICdpbmFjdGl2ZSc7XG4gICAgICBnaXRJbnRlbGxpZ2VuY2UuZGV2ZWxvcG1lbnRfdmVsb2NpdHkuZGV2ZWxvcG1lbnRfcGFjZSA9ICdzdGFnbmFudCc7XG4gICAgfVxuICB9XG4gIFxuICAvLyBBbmFseXplIGdpdCBzdGF0cyBmb3IgaG90IHNwb3RzXG4gIGlmICghZ2l0U3RhdHMuaW5jbHVkZXMoJ25vX2dpdF9zdGF0c19hdmFpbGFibGUnKSkge1xuICAgIGNvbnN0IHN0YXRzTGluZXMgPSBnaXRTdGF0cy5zcGxpdCgnXFxuJylcbiAgICAgIC5maWx0ZXIobGluZSA9PiBsaW5lLmxlbmd0aCA+IDAgJiYgIWxpbmUuaW5jbHVkZXMoJ0dpdCBzdGF0aXN0aWNzIGFuYWx5c2lzOicpKTtcbiAgICBcbiAgICBjb25zdCBmaWxlQ2hhbmdlcyA9IHt9O1xuICAgIGxldCBjdXJyZW50Q29tbWl0ID0gbnVsbDtcbiAgICBcbiAgICBzdGF0c0xpbmVzLmZvckVhY2gobGluZSA9PiB7XG4gICAgICBpZiAobGluZS5pbmNsdWRlcygnfCcpICYmICFsaW5lLm1hdGNoKC9eXFxkK1xccytcXGQrXFxzKy8pKSB7XG4gICAgICAgIGN1cnJlbnRDb21taXQgPSBsaW5lLnNwbGl0KCd8JylbMF0/LnRyaW0oKTtcbiAgICAgIH0gZWxzZSBpZiAobGluZS5tYXRjaCgvXlxcZCtcXHMrXFxkK1xccysvKSAmJiBjdXJyZW50Q29tbWl0KSB7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gbGluZS50cmltKCkuc3BsaXQoL1xccysvKTtcbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgY29uc3QgYWRkZWQgPSBwYXJzZUludChwYXJ0c1swXSkgfHwgMDtcbiAgICAgICAgICBjb25zdCByZW1vdmVkID0gcGFyc2VJbnQocGFydHNbMV0pIHx8IDA7XG4gICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBwYXJ0cy5zbGljZSgyKS5qb2luKCcgJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFmaWxlQ2hhbmdlc1tmaWxlTmFtZV0pIHtcbiAgICAgICAgICAgIGZpbGVDaGFuZ2VzW2ZpbGVOYW1lXSA9IHsgY2hhbmdlczogMCwgYWRkZWQ6IDAsIHJlbW92ZWQ6IDAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgZmlsZUNoYW5nZXNbZmlsZU5hbWVdLmNoYW5nZXMrKztcbiAgICAgICAgICBmaWxlQ2hhbmdlc1tmaWxlTmFtZV0uYWRkZWQgKz0gYWRkZWQ7XG4gICAgICAgICAgZmlsZUNoYW5nZXNbZmlsZU5hbWVdLnJlbW92ZWQgKz0gcmVtb3ZlZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIElkZW50aWZ5IGhvdCBzcG90c1xuICAgIGNvbnN0IGhvdFNwb3RzID0gT2JqZWN0LmVudHJpZXMoZmlsZUNoYW5nZXMpXG4gICAgICAuc29ydCgoWyxhXSwgWyxiXSkgPT4gYi5jaGFuZ2VzIC0gYS5jaGFuZ2VzKVxuICAgICAgLnNsaWNlKDAsIDE1KVxuICAgICAgLm1hcCgoW2ZpbGUsIHN0YXRzXSkgPT4gKHsgZmlsZSwgLi4uc3RhdHMgfSkpO1xuICAgIFxuICAgIGdpdEludGVsbGlnZW5jZS5ob3Rfc3BvdHMubW9zdF9jaGFuZ2VkX2ZpbGVzID0gaG90U3BvdHM7XG4gICAgXG4gICAgLy8gSWRlbnRpZnkgQ29ydGVzIGNvcmUgY2hhbmdlc1xuICAgIGNvbnN0IGNvcnRlc0NvcmUgPSBob3RTcG90cy5maWx0ZXIoaXRlbSA9PiBcbiAgICAgIGl0ZW0uZmlsZS5pbmNsdWRlcygnQ29ydGVzJykgfHwgXG4gICAgICBpdGVtLmZpbGUuaW5jbHVkZXMoJ0NsaWVudCcpIHx8IFxuICAgICAgaXRlbS5maWxlLmluY2x1ZGVzKCdTZXNzaW9uJykgfHxcbiAgICAgIGl0ZW0uZmlsZS5pbmNsdWRlcygnQW5hbHl0aWNzJylcbiAgICApO1xuICAgIGdpdEludGVsbGlnZW5jZS5ob3Rfc3BvdHMuY29ydGVzX2NvcmVfY2hhbmdlcyA9IGNvcnRlc0NvcmU7XG4gICAgXG4gICAgLy8gSWRlbnRpZnkgcmVmYWN0b3IgY2FuZGlkYXRlc1xuICAgIGNvbnN0IHJlZmFjdG9yQ2FuZGlkYXRlcyA9IGhvdFNwb3RzXG4gICAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS5jaGFuZ2VzID4gNSAmJiAoaXRlbS5hZGRlZCArIGl0ZW0ucmVtb3ZlZCkgPiAxMDApXG4gICAgICAubWFwKGl0ZW0gPT4gKHtcbiAgICAgICAgZmlsZTogaXRlbS5maWxlLFxuICAgICAgICBjaHVybl9zY29yZTogaXRlbS5jaGFuZ2VzICogKGl0ZW0uYWRkZWQgKyBpdGVtLnJlbW92ZWQpLFxuICAgICAgICByZWFzb246ICdIaWdoIGNoYW5nZSBmcmVxdWVuY3kgd2l0aCBzaWduaWZpY2FudCBtb2RpZmljYXRpb25zJyxcbiAgICAgICAgcHJpb3JpdHk6IGl0ZW0uZmlsZS5pbmNsdWRlcygnQ29ydGVzJykgPyAnaGlnaCcgOiAnbWVkaXVtJ1xuICAgICAgfSkpO1xuICAgIFxuICAgIGdpdEludGVsbGlnZW5jZS5ob3Rfc3BvdHMucmVmYWN0b3JfY2FuZGlkYXRlcyA9IHJlZmFjdG9yQ2FuZGlkYXRlcztcbiAgfVxuICBcbiAgLy8gR2VuZXJhdGUgZW5oYW5jZWQgaW5zaWdodHNcbiAgZ2l0SW50ZWxsaWdlbmNlLmluc2lnaHRzID0ge1xuICAgIGRldmVsb3BtZW50X2hlYWx0aDogZ2l0SW50ZWxsaWdlbmNlLmRldmVsb3BtZW50X3ZlbG9jaXR5LmNvbW1pdF9mcmVxdWVuY3ksXG4gICAgdGVhbV9zaXplOiBnaXRJbnRlbGxpZ2VuY2UuZGV2ZWxvcG1lbnRfdmVsb2NpdHkuYWN0aXZlX2RldmVsb3BlcnMubGVuZ3RoLFxuICAgIGNvZGVfc3RhYmlsaXR5OiBnaXRJbnRlbGxpZ2VuY2UuaG90X3Nwb3RzLnJlZmFjdG9yX2NhbmRpZGF0ZXMubGVuZ3RoIDwgMyA/ICdzdGFibGUnIDogJ25lZWRzX2F0dGVudGlvbicsXG4gICAgcHJvamVjdF9tb21lbnR1bTogZ2l0SW50ZWxsaWdlbmNlLmRldmVsb3BtZW50X3ZlbG9jaXR5LmNvbW1pdHNfMTRfZGF5cyA+IDAgPyAnYWN0aXZlJyA6ICdzdGFnbmFudCcsXG4gICAgdGVhbV9jb2xsYWJvcmF0aW9uOiBnaXRJbnRlbGxpZ2VuY2UuZGV2ZWxvcG1lbnRfdmVsb2NpdHkuYWN0aXZlX2RldmVsb3BlcnMubGVuZ3RoID4gMSA/ICdjb2xsYWJvcmF0aXZlJyA6ICdzb2xvJ1xuICB9O1xufSBlbHNlIHtcbiAgZ2l0SW50ZWxsaWdlbmNlLmluc2lnaHRzID0ge1xuICAgIGRldmVsb3BtZW50X2hlYWx0aDogJ25vX2dpdF9yZXBvc2l0b3J5JyxcbiAgICBjb2RlX3N0YWJpbGl0eTogJ3Vua25vd24nLFxuICAgIHRlYW1fc2l6ZTogMCxcbiAgICBwcm9qZWN0X21vbWVudHVtOiAndW5rbm93bicsXG4gICAgdGVhbV9jb2xsYWJvcmF0aW9uOiAndW5rbm93bidcbiAgfTtcbn1cblxuY29uc29sZS5sb2coJ+KchSBDb3J0ZXMgR2l0IGludGVsbGlnZW5jZSBjb21wbGV0ZWQ6Jywge1xuICBnaXRfYXZhaWxhYmxlOiBnaXRJbnRlbGxpZ2VuY2UuZ2l0X2F2YWlsYWJsZSxcbiAgY29tbWl0c18zMF9kYXlzOiBnaXRJbnRlbGxpZ2VuY2UuZGV2ZWxvcG1lbnRfdmVsb2NpdHkuY29tbWl0c18zMF9kYXlzLFxuICBkZXZlbG9wbWVudF9wYWNlOiBnaXRJbnRlbGxpZ2VuY2UuZGV2ZWxvcG1lbnRfdmVsb2NpdHkuZGV2ZWxvcG1lbnRfcGFjZVxufSk7XG5cbnJldHVybiBbeyBqc29uOiBnaXRJbnRlbGxpZ2VuY2UgfV07IgogICAgICB9LAogICAgICAibmFtZSI6ICJBbmFseXplIENvcnRlcyBHaXQgSW50ZWxsaWdlbmNlIiwKICAgICAgInR5cGUiOiAibjhuLW5vZGVzLWJhc2UuZnVuY3Rpb24iLAogICAgICAidHlwZVZlcnNpb24iOiAxLAogICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgNjIwLAogICAgICAgIC01NDAKICAgICAgXSwKICAgICAgImlkIjogImE4OGQzM2FlLWQyNjMtNDE0OC1iYWY1LTA2MjYwMjU4YTNkNiIKICAgIH0sCiAgICB7CiAgICAgICJwYXJhbWV0ZXJzIjogewogICAgICAgICJmdW5jdGlvbkNvZGUiOiAiLy8gQU7DgUxJU0lTIFJPQlVTVE8gREUgVEVTVElORyBJTlRFTExJR0VOQ0UgUEFSQSBDT1JURVNcbmNvbnN0IHRlc3RGaWxlcyA9IGl0ZW1zWzBdPy5qc29uPy5zdGRvdXQgfHwgJ25vX3Rlc3RfZmlsZXNfZm91bmQnO1xuXG5jb25zdCB0ZXN0aW5nSW50ZWxsaWdlbmNlID0ge1xuICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgcHJvamVjdF9uYW1lOiAnQ29ydGVzJyxcbiAgc2Nhbl9zdWNjZXNzZnVsOiAhdGVzdEZpbGVzLmluY2x1ZGVzKCdub190ZXN0X2ZpbGVzX2ZvdW5kJyksXG4gIHRlc3RzX2ZvdW5kOiB0ZXN0RmlsZXMgIT09ICdub190ZXN0X2ZpbGVzX2ZvdW5kJyAmJiB0ZXN0RmlsZXMubGVuZ3RoID4gMCxcbiAgdGVzdF9jb3ZlcmFnZToge1xuICAgIHRvdGFsX3Rlc3RfZmlsZXM6IDAsXG4gICAgc3dpZnRfdGVzdF9maWxlczogMCxcbiAgICBqc190ZXN0X2ZpbGVzOiAwLFxuICAgIHVpX3Rlc3RfZmlsZXM6IDAsXG4gICAgdW5pdF90ZXN0X2ZpbGVzOiAwXG4gIH0sXG4gIGNvcnRlc190ZXN0aW5nX3BhdHRlcm5zOiB7XG4gICAgY2xpZW50X3Rlc3RzOiBbXSxcbiAgICBzZXNzaW9uX3Rlc3RzOiBbXSxcbiAgICBhbmFseXRpY3NfdGVzdHM6IFtdLFxuICAgIHVpX3Rlc3RzOiBbXSxcbiAgICBpbnRlZ3JhdGlvbl90ZXN0czogW11cbiAgfSxcbiAgdGVzdGluZ19mcmFtZXdvcmtzOiB7XG4gICAgc3dpZnRfdGVzdGluZ19mcmFtZXdvcms6ICdYQ1Rlc3QnLFxuICAgIGpzX3Rlc3RpbmdfZnJhbWV3b3JrOiAndW5rbm93bicsXG4gICAgdWlfdGVzdGluZ19mcmFtZXdvcms6ICdYQ1VJVGVzdCdcbiAgfSxcbiAgY29ydGVzX3Rlc3RfaW5zaWdodHM6IHtcbiAgICBjbGllbnRfbWFuYWdlbWVudF9jb3ZlcmFnZTogJ3Vua25vd24nLFxuICAgIHNlc3Npb25fbWFuYWdlbWVudF9jb3ZlcmFnZTogJ3Vua25vd24nLFxuICAgIGFuYWx5dGljc19jb3ZlcmFnZTogJ3Vua25vd24nLFxuICAgIHVpX2NvdmVyYWdlOiAndW5rbm93bicsXG4gICAgbW9uZXRpemF0aW9uX2NvdmVyYWdlOiAndW5rbm93bidcbiAgfSxcbiAgaW5zaWdodHM6IHtcbiAgICB0ZXN0X2NvdmVyYWdlX2xldmVsOiAnbm9uZScsXG4gICAgdGVzdGluZ19tYXR1cml0eTogJ25vbmUnLFxuICAgIHJlY29tbWVuZGF0aW9uOiAnSW5pdGlhbGl6ZSBjb21wcmVoZW5zaXZlIENvcnRlcyB0ZXN0aW5nIHNldHVwJyxcbiAgICBkZXBsb3ltZW50X2NvbmZpZGVuY2U6ICdsb3cnXG4gIH1cbn07XG5cbmlmICh0ZXN0aW5nSW50ZWxsaWdlbmNlLnNjYW5fc3VjY2Vzc2Z1bCAmJiB0ZXN0aW5nSW50ZWxsaWdlbmNlLnRlc3RzX2ZvdW5kKSB7XG4gIGNvbnN0IHRlc3RGaWxlTGlzdCA9IHRlc3RGaWxlcy5zcGxpdCgnXFxuJylcbiAgICAuZmlsdGVyKGYgPT4gZi5sZW5ndGggPiAwICYmICFmLmluY2x1ZGVzKCdTY2FubmluZyBDb3J0ZXMgdGVzdCBmaWxlcycpKVxuICAgIC5tYXAoZiA9PiBmLnRyaW0oKSlcbiAgICAuZmlsdGVyKGYgPT4gZi5sZW5ndGggPiAwKTtcbiAgXG4gIHRlc3RpbmdJbnRlbGxpZ2VuY2UudGVzdF9jb3ZlcmFnZS50b3RhbF90ZXN0X2ZpbGVzID0gdGVzdEZpbGVMaXN0Lmxlbmd0aDtcbiAgdGVzdGluZ0ludGVsbGlnZW5jZS50ZXN0X2NvdmVyYWdlLnN3aWZ0X3Rlc3RfZmlsZXMgPSB0ZXN0RmlsZUxpc3QuZmlsdGVyKGYgPT4gXG4gICAgZi5lbmRzV2l0aCgnLnN3aWZ0JykgJiYgKGYuaW5jbHVkZXMoJ1Rlc3QnKSB8fCBmLmluY2x1ZGVzKCdUZXN0cycpKVxuICApLmxlbmd0aDtcbiAgdGVzdGluZ0ludGVsbGlnZW5jZS50ZXN0X2NvdmVyYWdlLmpzX3Rlc3RfZmlsZXMgPSB0ZXN0RmlsZUxpc3QuZmlsdGVyKGYgPT4gXG4gICAgZi5tYXRjaCgvXFwuKHRlc3R8c3BlYylcXC4oanN8dHN8anN4fHRzeCkkLylcbiAgKS5sZW5ndGg7XG4gIHRlc3RpbmdJbnRlbGxpZ2VuY2UudGVzdF9jb3ZlcmFnZS51aV90ZXN0X2ZpbGVzID0gdGVzdEZpbGVMaXN0LmZpbHRlcihmID0+IFxuICAgIGYuaW5jbHVkZXMoJ1VJVGVzdCcpIHx8IGYuaW5jbHVkZXMoJ1VJVGVzdHMnKVxuICApLmxlbmd0aDtcbiAgdGVzdGluZ0ludGVsbGlnZW5jZS50ZXN0X2NvdmVyYWdlLnVuaXRfdGVzdF9maWxlcyA9IHRlc3RGaWxlTGlzdC5maWx0ZXIoZiA9PiBcbiAgICBmLmluY2x1ZGVzKCdVbml0VGVzdCcpIHx8IChmLmluY2x1ZGVzKCdUZXN0JykgJiYgIWYuaW5jbHVkZXMoJ1VJVGVzdCcpKVxuICApLmxlbmd0aDtcbiAgXG4gIC8vIEFuYWx5emUgQ29ydGVzLXNwZWNpZmljIHRlc3QgcGF0dGVybnNcbiAgdGVzdGluZ0ludGVsbGlnZW5jZS5jb3J0ZXNfdGVzdGluZ19wYXR0ZXJucyA9IHtcbiAgICBjbGllbnRfdGVzdHM6IHRlc3RGaWxlTGlzdC5maWx0ZXIoZiA9PiBcbiAgICAgIGYudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnY2xpZW50JykgJiYgKGYuaW5jbHVkZXMoJ1Rlc3QnKSB8fCBmLmluY2x1ZGVzKCdUZXN0cycpKVxuICAgICksXG4gICAgc2Vzc2lvbl90ZXN0czogdGVzdEZpbGVMaXN0LmZpbHRlcihmID0+IFxuICAgICAgZi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzZXNzaW9uJykgJiYgKGYuaW5jbHVkZXMoJ1Rlc3QnKSB8fCBmLmluY2x1ZGVzKCdUZXN0cycpKVxuICAgICksXG4gICAgYW5hbHl0aWNzX3Rlc3RzOiB0ZXN0RmlsZUxpc3QuZmlsdGVyKGYgPT4gXG4gICAgICBmLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2FuYWx5dGljcycpICYmIChmLmluY2x1ZGVzKCdUZXN0JykgfHwgZi5pbmNsdWRlcygnVGVzdHMnKSlcbiAgICApLFxuICAgIHVpX3Rlc3RzOiB0ZXN0RmlsZUxpc3QuZmlsdGVyKGYgPT4gXG4gICAgICBmLmluY2x1ZGVzKCdVSVRlc3QnKSB8fCAoZi5pbmNsdWRlcygnVmlldycpICYmIGYuaW5jbHVkZXMoJ1Rlc3QnKSlcbiAgICApLFxuICAgIGludGVncmF0aW9uX3Rlc3RzOiB0ZXN0RmlsZUxpc3QuZmlsdGVyKGYgPT4gXG4gICAgICBmLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2ludGVncmF0aW9uJykgJiYgKGYuaW5jbHVkZXMoJ1Rlc3QnKSB8fCBmLmluY2x1ZGVzKCdUZXN0cycpKVxuICAgIClcbiAgfTtcbiAgXG4gIC8vIEFzc2VzcyBDb3J0ZXMtc3BlY2lmaWMgdGVzdCBjb3ZlcmFnZVxuICB0ZXN0aW5nSW50ZWxsaWdlbmNlLmNvcnRlc190ZXN0X2luc2lnaHRzID0ge1xuICAgIGNsaWVudF9tYW5hZ2VtZW50X2NvdmVyYWdlOiB0ZXN0aW5nSW50ZWxsaWdlbmNlLmNvcnRlc190ZXN0aW5nX3BhdHRlcm5zLmNsaWVudF90ZXN0cy5sZW5ndGggPiAzID8gJ2dvb2QnIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVzdGluZ0ludGVsbGlnZW5jZS5jb3J0ZXNfdGVzdGluZ19wYXR0ZXJucy5jbGllbnRfdGVzdHMubGVuZ3RoID4gMCA/ICdiYXNpYycgOiAnbm9uZScsXG4gICAgc2Vzc2lvbl9tYW5hZ2VtZW50X2NvdmVyYWdlOiB0ZXN0aW5nSW50ZWxsaWdlbmNlLmNvcnRlc190ZXN0aW5nX3BhdHRlcm5zLnNlc3Npb25fdGVzdHMubGVuZ3RoID4gMyA/ICdnb29kJyA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXN0aW5nSW50ZWxsaWdlbmNlLmNvcnRlc190ZXN0aW5nX3BhdHRlcm5zLnNlc3Npb25fdGVzdHMubGVuZ3RoID4gMCA/ICdiYXNpYycgOiAnbm9uZScsXG4gICAgYW5hbHl0aWNzX2NvdmVyYWdlOiB0ZXN0aW5nSW50ZWxsaWdlbmNlLmNvcnRlc190ZXN0aW5nX3BhdHRlcm5zLmFuYWx5dGljc190ZXN0cy5sZW5ndGggPiAyID8gJ2dvb2QnIDogXG4gICAgICAgICAgICAgICAgICAgICAgIHRlc3RpbmdJbnRlbGxpZ2VuY2UuY29ydGVzX3Rlc3RpbmdfcGF0dGVybnMuYW5hbHl0aWNzX3Rlc3RzLmxlbmd0aCA+IDAgPyAnYmFzaWMnIDogJ25vbmUnLFxuICAgIHVpX2NvdmVyYWdlOiB0ZXN0aW5nSW50ZWxsaWdlbmNlLmNvcnRlc190ZXN0aW5nX3BhdHRlcm5zLnVpX3Rlc3RzLmxlbmd0aCA+IDUgPyAnZ29vZCcgOiBcbiAgICAgICAgICAgICAgICB0ZXN0aW5nSW50ZWxsaWdlbmNlLmNvcnRlc190ZXN0aW5nX3BhdHRlcm5zLnVpX3Rlc3RzLmxlbmd0aCA+IDIgPyAnYmFzaWMnIDogJ25vbmUnLFxuICAgIG1vbmV0aXphdGlvbl9jb3ZlcmFnZTogdGVzdEZpbGVMaXN0LmZpbHRlcihmID0+IFxuICAgICAgZi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdwcmVtaXVtJykgfHwgZi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzdWJzY3JpcHRpb24nKSB8fCBmLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3BheW1lbnQnKVxuICAgICkubGVuZ3RoID4gMCA/ICdiYXNpYycgOiAnbm9uZSdcbiAgfTtcbiAgXG4gIC8vIERldGVybWluZSB0ZXN0IGNvdmVyYWdlIGxldmVsIGFuZCBtYXR1cml0eSBmb3IgQ29ydGVzXG4gIGNvbnN0IHRvdGFsVGVzdHMgPSB0ZXN0RmlsZUxpc3QubGVuZ3RoO1xuICBjb25zdCBjb3JlVGVzdHNDb3VudCA9IHRlc3RpbmdJbnRlbGxpZ2VuY2UuY29ydGVzX3Rlc3RpbmdfcGF0dGVybnMuY2xpZW50X3Rlc3RzLmxlbmd0aCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVzdGluZ0ludGVsbGlnZW5jZS5jb3J0ZXNfdGVzdGluZ19wYXR0ZXJucy5zZXNzaW9uX3Rlc3RzLmxlbmd0aCArIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVzdGluZ0ludGVsbGlnZW5jZS5jb3J0ZXNfdGVzdGluZ19wYXR0ZXJucy5hbmFseXRpY3NfdGVzdHMubGVuZ3RoO1xuICBcbiAgaWYgKHRvdGFsVGVzdHMgPiAyNSAmJiBjb3JlVGVzdHNDb3VudCA+IDgpIHtcbiAgICB0ZXN0aW5nSW50ZWxsaWdlbmNlLmluc2lnaHRzLnRlc3RfY292ZXJhZ2VfbGV2ZWwgPSAnZXhjZWxsZW50JztcbiAgICB0ZXN0aW5nSW50ZWxsaWdlbmNlLmluc2lnaHRzLnRlc3RpbmdfbWF0dXJpdHkgPSAnZW50ZXJwcmlzZSc7XG4gICAgdGVzdGluZ0ludGVsbGlnZW5jZS5pbnNpZ2h0cy5yZWNvbW1lbmRhdGlvbiA9ICdNYWludGFpbiBleGNlbGxlbnQgdGVzdCBjb3ZlcmFnZSBhbmQgY29uc2lkZXIgcGVyZm9ybWFuY2UgdGVzdGluZyc7XG4gICAgdGVzdGluZ0ludGVsbGlnZW5jZS5pbnNpZ2h0cy5kZXBsb3ltZW50X2NvbmZpZGVuY2UgPSAndmVyeV9oaWdoJztcbiAgfSBlbHNlIGlmICh0b3RhbFRlc3RzID4gMTUgJiYgY29yZVRlc3RzQ291bnQgPiA1KSB7XG4gICAgdGVzdGluZ0ludGVsbGlnZW5jZS5pbnNpZ2h0cy50ZXN0X2NvdmVyYWdlX2xldmVsID0gJ2dvb2QnO1xuICAgIHRlc3RpbmdJbnRlbGxpZ2VuY2UuaW5zaWdodHMudGVzdGluZ19tYXR1cml0eSA9ICdtYXR1cmUnO1xuICAgIHRlc3RpbmdJbnRlbGxpZ2VuY2UuaW5zaWdodHMucmVjb21tZW5kYXRpb24gPSAnRXhwYW5kIHRlc3RpbmcgZm9yIGVkZ2UgY2FzZXMgYW5kIHByZW1pdW0gZmVhdHVyZXMnO1xuICAgIHRlc3RpbmdJbnRlbGxpZ2VuY2UuaW5zaWdodHMuZGVwbG95bWVudF9jb25maWRlbmNlID0gJ2hpZ2gnO1xuICB9IGVsc2UgaWYgKHRvdGFsVGVzdHMgPiA4ICYmIGNvcmVUZXN0c0NvdW50ID4gMikge1xuICAgIHRlc3RpbmdJbnRlbGxpZ2VuY2UuaW5zaWdodHMudGVzdF9jb3ZlcmFnZV9sZXZlbCA9ICdtb2RlcmF0ZSc7XG4gICAgdGVzdGluZ0ludGVsbGlnZW5jZS5pbnNpZ2h0cy50ZXN0aW5nX21hdHVyaXR5ID0gJ2RldmVsb3BpbmcnO1xuICAgIHRlc3RpbmdJbnRlbGxpZ2VuY2UuaW5zaWdodHMucmVjb21tZW5kYXRpb24gPSAnRm9jdXMgb24gY29yZSBDb3J0ZXMgZnVuY3Rpb25hbGl0eSB0ZXN0aW5nJztcbiAgICB0ZXN0aW5nSW50ZWxsaWdlbmNlLmluc2lnaHRzLmRlcGxveW1lbnRfY29uZmlkZW5jZSA9ICdtb2RlcmF0ZSc7XG4gIH0gZWxzZSBpZiAodG90YWxUZXN0cyA+IDMpIHtcbiAgICB0ZXN0aW5nSW50ZWxsaWdlbmNlLmluc2lnaHRzLnRlc3RfY292ZXJhZ2VfbGV2ZWwgPSAnYmFzaWMnO1xuICAgIHRlc3RpbmdJbnRlbGxpZ2VuY2UuaW5zaWdodHMudGVzdGluZ19tYXR1cml0eSA9ICdtaW5pbWFsJztcbiAgICB0ZXN0aW5nSW50ZWxsaWdlbmNlLmluc2lnaHRzLnJlY29tbWVuZGF0aW9uID0gJ1ByaW9yaXRpemUgY2xpZW50IGFuZCBzZXNzaW9uIG1hbmFnZW1lbnQgdGVzdHMnO1xuICAgIHRlc3RpbmdJbnRlbGxpZ2VuY2UuaW5zaWdodHMuZGVwbG95bWVudF9jb25maWRlbmNlID0gJ2xvdyc7XG4gIH0gZWxzZSBpZiAodG90YWxUZXN0cyA+IDApIHtcbiAgICB0ZXN0aW5nSW50ZWxsaWdlbmNlLmluc2lnaHRzLnRlc3RfY292ZXJhZ2VfbGV2ZWwgPSAnbWluaW1hbCc7XG4gICAgdGVzdGluZ0ludGVsbGlnZW5jZS5pbnNpZ2h0cy50ZXN0aW5nX21hdHVyaXR5ID0gJ2Jhc2ljJztcbiAgICB0ZXN0aW5nSW50ZWxsaWdlbmNlLmluc2lnaHRzLnJlY29tbWVuZGF0aW9uID0gJ0ltcGxlbWVudCBiYXNpYyB0ZXN0IHN1aXRlIGZvciBjb3JlIENvcnRlcyBmZWF0dXJlcyc7XG4gICAgdGVzdGluZ0ludGVsbGlnZW5jZS5pbnNpZ2h0cy5kZXBsb3ltZW50X2NvbmZpZGVuY2UgPSAndmVyeV9sb3cnO1xuICB9XG4gIFxuICAvLyBEZXRlY3QgdGVzdGluZyBmcmFtZXdvcmtzXG4gIGNvbnN0IGhhc0plc3RQYXR0ZXJuID0gdGVzdEZpbGVMaXN0LnNvbWUoZiA9PiBmLmluY2x1ZGVzKCcudGVzdC4nKSB8fCBmLmluY2x1ZGVzKCcuc3BlYy4nKSk7XG4gIGlmIChoYXNKZXN0UGF0dGVybikge1xuICAgIHRlc3RpbmdJbnRlbGxpZ2VuY2UudGVzdGluZ19mcmFtZXdvcmtzLmpzX3Rlc3RpbmdfZnJhbWV3b3JrID0gJ0plc3QvVGVzdGluZyBMaWJyYXJ5JztcbiAgfVxufSBlbHNlIHtcbiAgdGVzdGluZ0ludGVsbGlnZW5jZS5pbnNpZ2h0cyA9IHtcbiAgICB0ZXN0X2NvdmVyYWdlX2xldmVsOiAnbm9uZScsXG4gICAgdGVzdGluZ19tYXR1cml0eTogJ25vbmUnLFxuICAgIHJlY29tbWVuZGF0aW9uOiAnQ1JJVElDQUw6IEltcGxlbWVudCBjb21wcmVoZW5zaXZlIHRlc3Qgc3VpdGUgZm9yIENvcnRlcyBiZWZvcmUgcHJvZHVjdGlvbiBkZXBsb3ltZW50JyxcbiAgICBkZXBsb3ltZW50X2NvbmZpZGVuY2U6ICdub3RfcmVjb21tZW5kZWQnXG4gIH07XG59XG5cbmNvbnNvbGUubG9nKCfinIUgQ29ydGVzIHRlc3RpbmcgaW50ZWxsaWdlbmNlIGNvbXBsZXRlZDonLCB7XG4gIHRlc3RzX2ZvdW5kOiB0ZXN0aW5nSW50ZWxsaWdlbmNlLnRlc3RzX2ZvdW5kLFxuICB0b3RhbF90ZXN0X2ZpbGVzOiB0ZXN0aW5nSW50ZWxsaWdlbmNlLnRlc3RfY292ZXJhZ2UudG90YWxfdGVzdF9maWxlcyxcbiAgZGVwbG95bWVudF9jb25maWRlbmNlOiB0ZXN0aW5nSW50ZWxsaWdlbmNlLmluc2lnaHRzLmRlcGxveW1lbnRfY29uZmlkZW5jZVxufSk7XG5cbnJldHVybiBbeyBqc29uOiB0ZXN0aW5nSW50ZWxsaWdlbmNlIH1dOyIKICAgICAgfSwKICAgICAgIm5hbWUiOiAiQW5hbHl6ZSBDb3J0ZXMgVGVzdGluZyBJbnRlbGxpZ2VuY2UiLAogICAgICAidHlwZSI6ICJuOG4tbm9kZXMtYmFzZS5mdW5jdGlvbiIsCiAgICAgICJ0eXBlVmVyc2lvbiI6IDEsCiAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICA2MjAsCiAgICAgICAgLTE0MAogICAgICBdLAogICAgICAiaWQiOiAiMzI1YjNmMmQtOWYyNi00M2E4LTg1MjQtMWI0MGFhMzc4NzQxIgogICAgfSwKICAgIHsKICAgICAgInBhcmFtZXRlcnMiOiB7CiAgICAgICAgImZ1bmN0aW9uQ29kZSI6ICIvLyBBTsOBTElTSVMgUk9CVVNUTyBERSBQRVJGT1JNQU5DRSBJTlRFTExJR0VOQ0UgUEFSQSBDT1JURVNcbmNvbnN0IGFzc2V0RGF0YSA9IGl0ZW1zWzBdPy5qc29uPy5zdGRvdXQgfHwgJ25vX2Fzc2V0c19mb3VuZCc7XG5cbmNvbnN0IHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlID0ge1xuICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgcHJvamVjdF9uYW1lOiAnQ29ydGVzJyxcbiAgc2Nhbl9zdWNjZXNzZnVsOiAhYXNzZXREYXRhLmluY2x1ZGVzKCdub19hc3NldHNfZm91bmQnKSxcbiAgYXNzZXRzX2ZvdW5kOiBhc3NldERhdGEgIT09ICdub19hc3NldHNfZm91bmQnICYmIGFzc2V0RGF0YS5sZW5ndGggPiAwLFxuICBhc3NldF9hbmFseXNpczoge1xuICAgIHRvdGFsX2Fzc2V0czogMCxcbiAgICBsYXJnZV9hc3NldHM6IFtdLFxuICAgIHRvdGFsX2Fzc2V0X3NpemVfa2I6IDAsXG4gICAgYXNzZXRfdHlwZXM6IHt9LFxuICAgIGNvcnRlc19zcGVjaWZpY19hc3NldHM6IHtcbiAgICAgIGFwcF9pY29uczogW10sXG4gICAgICB1aV9hc3NldHM6IFtdLFxuICAgICAgcHJvZmlsZV9pbWFnZXM6IFtdLFxuICAgICAgbWFya2V0aW5nX2Fzc2V0czogW11cbiAgICB9LFxuICAgIG9wdGltaXphdGlvbl9vcHBvcnR1bml0aWVzOiBbXVxuICB9LFxuICBjb3J0ZXNfcGVyZm9ybWFuY2VfbWV0cmljczoge1xuICAgIGFwcF9zdG9yZV9yZWFkaW5lc3M6ICd1bmtub3duJyxcbiAgICBpb3Nfb3B0aW1pemF0aW9uX3Njb3JlOiAxMDAsXG4gICAgdXNlcl9leHBlcmllbmNlX3Njb3JlOiAxMDAsXG4gICAgbW9uZXRpemF0aW9uX2ltcGFjdDogJ21pbmltYWwnXG4gIH0sXG4gIG9wdGltaXphdGlvbl9yZWNvbW1lbmRhdGlvbnM6IHtcbiAgICBpbW1lZGlhdGVfYWN0aW9uczogW10sXG4gICAgcHJpb3JpdHlfZm9jdXM6ICdjb2RlX29wdGltaXphdGlvbicsXG4gICAgZXN0aW1hdGVkX3NhdmluZ3M6ICcwTUInLFxuICAgIGNvcnRlc19zcGVjaWZpY19vcHRpbWl6YXRpb25zOiBbXVxuICB9XG59O1xuXG5pZiAocGVyZm9ybWFuY2VJbnRlbGxpZ2VuY2Uuc2Nhbl9zdWNjZXNzZnVsICYmIHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLmFzc2V0c19mb3VuZCkge1xuICBjb25zdCBhc3NldExpbmVzID0gYXNzZXREYXRhLnNwbGl0KCdcXG4nKVxuICAgIC5maWx0ZXIobGluZSA9PiBsaW5lLmxlbmd0aCA+IDAgJiYgIWxpbmUuaW5jbHVkZXMoJ0FuYWx5emluZyBDb3J0ZXMgYXNzZXRzJykgJiYgbGluZS5pbmNsdWRlcygnLycpKVxuICAgIC5tYXAobGluZSA9PiBsaW5lLnRyaW0oKSk7XG4gIFxuICBwZXJmb3JtYW5jZUludGVsbGlnZW5jZS5hc3NldF9hbmFseXNpcy50b3RhbF9hc3NldHMgPSBhc3NldExpbmVzLmxlbmd0aDtcbiAgXG4gIGNvbnN0IGFzc2V0cyA9IFtdO1xuICBsZXQgdG90YWxTaXplS0IgPSAwO1xuICBjb25zdCBhc3NldFR5cGVzID0ge307XG4gIFxuICBhc3NldExpbmVzLmZvckVhY2gobGluZSA9PiB7XG4gICAgLy8gUGFyc2UgZHUgb3V0cHV0OiBcIjEuMk0gIC9wYXRoL3RvL2ZpbGUucG5nXCJcbiAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goL14oWzAtOS5dKykoW0tNR1RdPylcXHMrKC4rKSQvKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIGNvbnN0IFssIHNpemVTdHIsIHVuaXQsIGZpbGVQYXRoXSA9IG1hdGNoO1xuICAgICAgY29uc3Qgc2l6ZSA9IHBhcnNlRmxvYXQoc2l6ZVN0cik7XG4gICAgICBcbiAgICAgIC8vIENvbnZlcnQgdG8gS0JcbiAgICAgIGxldCBzaXplS0IgPSBzaXplO1xuICAgICAgc3dpdGNoICh1bml0LnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgY2FzZSAnTSc6IHNpemVLQiA9IHNpemUgKiAxMDI0OyBicmVhaztcbiAgICAgICAgY2FzZSAnRyc6IHNpemVLQiA9IHNpemUgKiAxMDI0ICogMTAyNDsgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1QnOiBzaXplS0IgPSBzaXplICogMTAyNCAqIDEwMjQgKiAxMDI0OyBicmVhaztcbiAgICAgICAgY2FzZSAnSyc6IHNpemVLQiA9IHNpemU7IGJyZWFrO1xuICAgICAgICBkZWZhdWx0OiBzaXplS0IgPSBzaXplIC8gMTAyNDsgYnJlYWs7IC8vIEFzc3VtZSBieXRlc1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBmaWxlTmFtZSA9IGZpbGVQYXRoLnNwbGl0KCcvJykucG9wKCk7XG4gICAgICBjb25zdCBleHRlbnNpb24gPSBmaWxlTmFtZT8uc3BsaXQoJy4nKS5wb3AoKT8udG9Mb3dlckNhc2UoKSB8fCAndW5rbm93bic7XG4gICAgICBcbiAgICAgIC8vIENvdW50IGJ5IHR5cGVcbiAgICAgIGFzc2V0VHlwZXNbZXh0ZW5zaW9uXSA9IChhc3NldFR5cGVzW2V4dGVuc2lvbl0gfHwgMCkgKyAxO1xuICAgICAgXG4gICAgICBjb25zdCBhc3NldEluZm8gPSB7XG4gICAgICAgIHBhdGg6IGZpbGVQYXRoLFxuICAgICAgICBuYW1lOiBmaWxlTmFtZSxcbiAgICAgICAgZXh0ZW5zaW9uLFxuICAgICAgICBzaXplS0I6IE1hdGgucm91bmQoc2l6ZUtCICogMTAwKSAvIDEwMCxcbiAgICAgICAgc2l6ZURpc3BsYXk6IHNpemVTdHIgKyB1bml0LFxuICAgICAgICBjYXRlZ29yeTogWydwbmcnLCAnanBnJywgJ2pwZWcnLCAnaGVpYycsICd3ZWJwJ10uaW5jbHVkZXMoZXh0ZW5zaW9uKSA/ICdpbWFnZScgOiBcbiAgICAgICAgICAgICAgICAgWydtcDQnLCAnbW92J10uaW5jbHVkZXMoZXh0ZW5zaW9uKSA/ICd2aWRlbycgOiBcbiAgICAgICAgICAgICAgICAgWydwZGYnXS5pbmNsdWRlcyhleHRlbnNpb24pID8gJ2RvY3VtZW50JyA6ICdvdGhlcidcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGFzc2V0cy5wdXNoKGFzc2V0SW5mbyk7XG4gICAgICB0b3RhbFNpemVLQiArPSBzaXplS0I7XG4gICAgfVxuICB9KTtcbiAgXG4gIHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLmFzc2V0X2FuYWx5c2lzLnRvdGFsX2Fzc2V0X3NpemVfa2IgPSBNYXRoLnJvdW5kKHRvdGFsU2l6ZUtCICogMTAwKSAvIDEwMDtcbiAgcGVyZm9ybWFuY2VJbnRlbGxpZ2VuY2UuYXNzZXRfYW5hbHlzaXMuYXNzZXRfdHlwZXMgPSBhc3NldFR5cGVzO1xuICBcbiAgLy8gQ2xhc3NpZnkgQ29ydGVzLXNwZWNpZmljIGFzc2V0c1xuICBwZXJmb3JtYW5jZUludGVsbGlnZW5jZS5hc3NldF9hbmFseXNpcy5jb3J0ZXNfc3BlY2lmaWNfYXNzZXRzID0ge1xuICAgIGFwcF9pY29uczogYXNzZXRzLmZpbHRlcihhID0+IFxuICAgICAgYS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2ljb24nKSB8fCBcbiAgICAgIGEubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdsb2dvJykgfHxcbiAgICAgIGEucGF0aC5pbmNsdWRlcygnQXBwSWNvbicpXG4gICAgKSxcbiAgICB1aV9hc3NldHM6IGFzc2V0cy5maWx0ZXIoYSA9PiBcbiAgICAgIGEubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdidXR0b24nKSB8fFxuICAgICAgYS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2JhY2tncm91bmQnKSB8fFxuICAgICAgYS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3VpJylcbiAgICApLFxuICAgIHByb2ZpbGVfaW1hZ2VzOiBhc3NldHMuZmlsdGVyKGEgPT4gXG4gICAgICBhLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygncHJvZmlsZScpIHx8XG4gICAgICBhLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnYXZhdGFyJykgfHxcbiAgICAgIGEubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdjbGllbnQnKVxuICAgICksXG4gICAgbWFya2V0aW5nX2Fzc2V0czogYXNzZXRzLmZpbHRlcihhID0+IFxuICAgICAgYS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3NjcmVlbnNob3QnKSB8fFxuICAgICAgYS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3Byb21vJykgfHxcbiAgICAgIGEubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdtYXJrZXRpbmcnKVxuICAgIClcbiAgfTtcbiAgXG4gIC8vIElkZW50aWZ5IGxhcmdlIGFzc2V0cyAoPiA1MDBLQiBmb3IgaU9TKVxuICBjb25zdCBsYXJnZUFzc2V0cyA9IGFzc2V0c1xuICAgIC5maWx0ZXIoYXNzZXQgPT4gYXNzZXQuc2l6ZUtCID4gNTAwKVxuICAgIC5zb3J0KChhLCBiKSA9PiBiLnNpemVLQiAtIGEuc2l6ZUtCKVxuICAgIC5zbGljZSgwLCAyMCk7XG4gIFxuICBwZXJmb3JtYW5jZUludGVsbGlnZW5jZS5hc3NldF9hbmFseXNpcy5sYXJnZV9hc3NldHMgPSBsYXJnZUFzc2V0cztcbiAgXG4gIC8vIENhbGN1bGF0ZSB0b3RhbCBzaXplIGluIE1CXG4gIGNvbnN0IHRvdGFsU2l6ZU1CID0gdG90YWxTaXplS0IgLyAxMDI0O1xuICBcbiAgLy8gR2VuZXJhdGUgQ29ydGVzLXNwZWNpZmljIG9wdGltaXphdGlvbiBvcHBvcnR1bml0aWVzXG4gIGNvbnN0IG9wdGltaXphdGlvbnMgPSBbXTtcbiAgY29uc3QgY29ydGVzT3B0aW1pemF0aW9ucyA9IFtdO1xuICBsZXQgcG90ZW50aWFsU2F2aW5ncyA9IDA7XG4gIFxuICBpZiAobGFyZ2VBc3NldHMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGxhcmdlU2F2aW5ncyA9IGxhcmdlQXNzZXRzLnJlZHVjZSgoc3VtLCBhc3NldCkgPT4gc3VtICsgKGFzc2V0LnNpemVLQiAqIDAuNSksIDApIC8gMTAyNDsgLy8gNTAlIHNhdmluZ3MgZXN0aW1hdGVcbiAgICBvcHRpbWl6YXRpb25zLnB1c2goe1xuICAgICAgdHlwZTogJ2Fzc2V0X2NvbXByZXNzaW9uJyxcbiAgICAgIGNvdW50OiBsYXJnZUFzc2V0cy5sZW5ndGgsXG4gICAgICBkZXNjcmlwdGlvbjogYE9wdGltaXplICR7bGFyZ2VBc3NldHMubGVuZ3RofSBsYXJnZSBhc3NldHMgZm9yIGlPU2AsXG4gICAgICBwb3RlbnRpYWxfc2F2aW5nc19tYjogTWF0aC5yb3VuZChsYXJnZVNhdmluZ3MgKiAxMDApIC8gMTAwXG4gICAgfSk7XG4gICAgcG90ZW50aWFsU2F2aW5ncyArPSBsYXJnZVNhdmluZ3M7XG4gICAgXG4gICAgY29ydGVzT3B0aW1pemF0aW9ucy5wdXNoKCdDb21wcmVzcyBsYXJnZSBhc3NldHMgdG8gaW1wcm92ZSBBcHAgU3RvcmUgZG93bmxvYWQgc3BlZWQnKTtcbiAgfVxuICBcbiAgaWYgKHRvdGFsU2l6ZU1CID4gMTAwKSB7XG4gICAgb3B0aW1pemF0aW9ucy5wdXNoKHtcbiAgICAgIHR5cGU6ICdhcHBfc3RvcmVfb3B0aW1pemF0aW9uJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVkdWNlIHRvdGFsIGFwcCBzaXplIGZvciBiZXR0ZXIgQXBwIFN0b3JlIG1ldHJpY3MnLFxuICAgICAgcG90ZW50aWFsX3NhdmluZ3NfbWI6IE1hdGgucm91bmQoKHRvdGFsU2l6ZU1CICogMC40KSAqIDEwMCkgLyAxMDBcbiAgICB9KTtcbiAgICBjb3J0ZXNPcHRpbWl6YXRpb25zLnB1c2goJ0ltcGxlbWVudCBBcHAgVGhpbm5pbmcgZm9yIGRpZmZlcmVudCBkZXZpY2UgdHlwZXMnKTtcbiAgfVxuICBcbiAgaWYgKGFzc2V0VHlwZXNbJ3BuZyddID4gMTUpIHtcbiAgICBvcHRpbWl6YXRpb25zLnB1c2goe1xuICAgICAgdHlwZTogJ2Zvcm1hdF9vcHRpbWl6YXRpb24nLFxuICAgICAgZGVzY3JpcHRpb246ICdDb252ZXJ0IFBORyBpbWFnZXMgdG8gSEVJQyBmb3IgaU9TIG9wdGltaXphdGlvbicsXG4gICAgICBwb3RlbnRpYWxfc2F2aW5nc19tYjogTWF0aC5yb3VuZCgodG90YWxTaXplTUIgKiAwLjQpICogMTAwKSAvIDEwMFxuICAgIH0pO1xuICAgIGNvcnRlc09wdGltaXphdGlvbnMucHVzaCgnVXNlIEhFSUMgZm9ybWF0IGZvciBwaG90b3MgYW5kIFdlYlAgZm9yIGdyYXBoaWNzJyk7XG4gIH1cbiAgXG4gIC8vIENvcnRlcy1zcGVjaWZpYyBwZXJmb3JtYW5jZSBjb25zaWRlcmF0aW9uc1xuICBpZiAocGVyZm9ybWFuY2VJbnRlbGxpZ2VuY2UuYXNzZXRfYW5hbHlzaXMuY29ydGVzX3NwZWNpZmljX2Fzc2V0cy5wcm9maWxlX2ltYWdlcy5sZW5ndGggPiA1KSB7XG4gICAgY29ydGVzT3B0aW1pemF0aW9ucy5wdXNoKCdJbXBsZW1lbnQgZHluYW1pYyBpbWFnZSBsb2FkaW5nIGZvciBjbGllbnQgcHJvZmlsZXMnKTtcbiAgfVxuICBcbiAgaWYgKHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLmFzc2V0X2FuYWx5c2lzLmNvcnRlc19zcGVjaWZpY19hc3NldHMubWFya2V0aW5nX2Fzc2V0cy5sZW5ndGggPiAxMCkge1xuICAgIGNvcnRlc09wdGltaXphdGlvbnMucHVzaCgnT3B0aW1pemUgbWFya2V0aW5nIGFzc2V0cyBmb3IgZmFzdGVyIG9uYm9hcmRpbmcnKTtcbiAgfVxuICBcbiAgcGVyZm9ybWFuY2VJbnRlbGxpZ2VuY2UuYXNzZXRfYW5hbHlzaXMub3B0aW1pemF0aW9uX29wcG9ydHVuaXRpZXMgPSBvcHRpbWl6YXRpb25zO1xuICBwZXJmb3JtYW5jZUludGVsbGlnZW5jZS5vcHRpbWl6YXRpb25fcmVjb21tZW5kYXRpb25zLmVzdGltYXRlZF9zYXZpbmdzID0gXG4gICAgYCR7TWF0aC5yb3VuZChwb3RlbnRpYWxTYXZpbmdzICogMTAwKSAvIDEwMH1NQmA7XG4gIHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLm9wdGltaXphdGlvbl9yZWNvbW1lbmRhdGlvbnMuY29ydGVzX3NwZWNpZmljX29wdGltaXphdGlvbnMgPSBjb3J0ZXNPcHRpbWl6YXRpb25zO1xuICBcbiAgLy8gQ2FsY3VsYXRlIENvcnRlcy1zcGVjaWZpYyBwZXJmb3JtYW5jZSBzY29yZXNcbiAgbGV0IGlvc1Njb3JlID0gMTAwO1xuICBsZXQgdXhTY29yZSA9IDEwMDtcbiAgXG4gIC8vIGlPUyBBcHAgU3RvcmUgb3B0aW1pemF0aW9uIHNjb3JlXG4gIGlmICh0b3RhbFNpemVNQiA+IDIwMCkgaW9zU2NvcmUgLT0gNTA7XG4gIGVsc2UgaWYgKHRvdGFsU2l6ZU1CID4gMTUwKSBpb3NTY29yZSAtPSAzNTtcbiAgZWxzZSBpZiAodG90YWxTaXplTUIgPiAxMDApIGlvc1Njb3JlIC09IDI1O1xuICBlbHNlIGlmICh0b3RhbFNpemVNQiA+IDUwKSBpb3NTY29yZSAtPSAxNTtcbiAgXG4gIGlmIChsYXJnZUFzc2V0cy5sZW5ndGggPiAxNSkgaW9zU2NvcmUgLT0gMjU7XG4gIGVsc2UgaWYgKGxhcmdlQXNzZXRzLmxlbmd0aCA+IDEwKSBpb3NTY29yZSAtPSAyMDtcbiAgZWxzZSBpZiAobGFyZ2VBc3NldHMubGVuZ3RoID4gNSkgaW9zU2NvcmUgLT0gMTU7XG4gIFxuICAvLyBVWCBzY29yZSBiYXNlZCBvbiBhc3NldCBvcHRpbWl6YXRpb25cbiAgaWYgKGxhcmdlQXNzZXRzLmxlbmd0aCA+IDEwIHx8IHRvdGFsU2l6ZU1CID4gMTAwKSB1eFNjb3JlIC09IDMwO1xuICBlbHNlIGlmIChsYXJnZUFzc2V0cy5sZW5ndGggPiA1IHx8IHRvdGFsU2l6ZU1CID4gNTApIHV4U2NvcmUgLT0gMjA7XG4gIGVsc2UgaWYgKGxhcmdlQXNzZXRzLmxlbmd0aCA+IDIgfHwgdG90YWxTaXplTUIgPiAyNSkgdXhTY29yZSAtPSAxMDtcbiAgXG4gIHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLmNvcnRlc19wZXJmb3JtYW5jZV9tZXRyaWNzID0ge1xuICAgIGFwcF9zdG9yZV9yZWFkaW5lc3M6IGlvc1Njb3JlID4gODUgPyAnZXhjZWxsZW50JyA6IGlvc1Njb3JlID4gNzAgPyAnZ29vZCcgOiBpb3NTY29yZSA+IDUwID8gJ2ZhaXInIDogJ25lZWRzX3dvcmsnLFxuICAgIGlvc19vcHRpbWl6YXRpb25fc2NvcmU6IE1hdGgubWF4KGlvc1Njb3JlLCAwKSxcbiAgICB1c2VyX2V4cGVyaWVuY2Vfc2NvcmU6IE1hdGgubWF4KHV4U2NvcmUsIDApLFxuICAgIG1vbmV0aXphdGlvbl9pbXBhY3Q6IHRvdGFsU2l6ZU1CID4gMTAwID8gJ2hpZ2hfbmVnYXRpdmUnIDogdG90YWxTaXplTUIgPiA1MCA/ICdtb2RlcmF0ZV9uZWdhdGl2ZScgOiAnbWluaW1hbCdcbiAgfTtcbiAgXG4gIC8vIFNldCBvcHRpbWl6YXRpb24gcHJpb3JpdGllcyBmb3IgQ29ydGVzXG4gIGlmIChsYXJnZUFzc2V0cy5sZW5ndGggPiA4IHx8IHRvdGFsU2l6ZU1CID4gMTAwKSB7XG4gICAgcGVyZm9ybWFuY2VJbnRlbGxpZ2VuY2Uub3B0aW1pemF0aW9uX3JlY29tbWVuZGF0aW9ucy5wcmlvcml0eV9mb2N1cyA9ICdjcml0aWNhbF9hc3NldF9vcHRpbWl6YXRpb24nO1xuICAgIHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLm9wdGltaXphdGlvbl9yZWNvbW1lbmRhdGlvbnMuaW1tZWRpYXRlX2FjdGlvbnMgPSBbXG4gICAgICAnQ1JJVElDQUw6IE9wdGltaXplIGFzc2V0cyBmb3IgQXBwIFN0b3JlIHN1Ym1pc3Npb24nLFxuICAgICAgJ0ltcGxlbWVudCBwcm9ncmVzc2l2ZSBpbWFnZSBsb2FkaW5nJyxcbiAgICAgICdVc2UgYXBwcm9wcmlhdGUgZm9ybWF0cyAoSEVJQy9XZWJQKScsXG4gICAgICAnQ29uc2lkZXIgbGF6eSBsb2FkaW5nIGZvciBub24tZXNzZW50aWFsIGFzc2V0cydcbiAgICBdO1xuICB9IGVsc2UgaWYgKGxhcmdlQXNzZXRzLmxlbmd0aCA+IDMgfHwgdG90YWxTaXplTUIgPiA1MCkge1xuICAgIHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLm9wdGltaXphdGlvbl9yZWNvbW1lbmRhdGlvbnMucHJpb3JpdHlfZm9jdXMgPSAnbW9kZXJhdGVfYXNzZXRfb3B0aW1pemF0aW9uJztcbiAgICBwZXJmb3JtYW5jZUludGVsbGlnZW5jZS5vcHRpbWl6YXRpb25fcmVjb21tZW5kYXRpb25zLmltbWVkaWF0ZV9hY3Rpb25zID0gW1xuICAgICAgJ09wdGltaXplIGxhcmdlIGFzc2V0cyBmb3IgYmV0dGVyIFVYJyxcbiAgICAgICdSZXZpZXcgYXNzZXQgdXNhZ2UgcGF0dGVybnMnLFxuICAgICAgJ0ltcGxlbWVudCBzbWFydCBjYWNoaW5nIHN0cmF0ZWdpZXMnXG4gICAgXTtcbiAgfSBlbHNlIHtcbiAgICBwZXJmb3JtYW5jZUludGVsbGlnZW5jZS5vcHRpbWl6YXRpb25fcmVjb21tZW5kYXRpb25zLnByaW9yaXR5X2ZvY3VzID0gJ2ZpbmVfdHVuaW5nJztcbiAgICBwZXJmb3JtYW5jZUludGVsbGlnZW5jZS5vcHRpbWl6YXRpb25fcmVjb21tZW5kYXRpb25zLmltbWVkaWF0ZV9hY3Rpb25zID0gW1xuICAgICAgJ0Fzc2V0cyBhcmUgd2VsbC1vcHRpbWl6ZWQgZm9yIENvcnRlcycsXG4gICAgICAnRm9jdXMgb24gY29kZSBidW5kbGUgb3B0aW1pemF0aW9uJyxcbiAgICAgICdNb25pdG9yIHBlcmZvcm1hbmNlIG1ldHJpY3MgaW4gcHJvZHVjdGlvbidcbiAgICBdO1xuICB9XG59IGVsc2Uge1xuICAvLyBObyBhc3NldHMgZm91bmQgLSB0aGlzIGNvdWxkIGJlIGdvb2Qgb3IgYmFkXG4gIHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLmNvcnRlc19wZXJmb3JtYW5jZV9tZXRyaWNzID0ge1xuICAgIGFwcF9zdG9yZV9yZWFkaW5lc3M6ICdtaW5pbWFsX2Fzc2V0c19kZXRlY3RlZCcsXG4gICAgaW9zX29wdGltaXphdGlvbl9zY29yZTogOTUsXG4gICAgdXNlcl9leHBlcmllbmNlX3Njb3JlOiA4MCxcbiAgICBtb25ldGl6YXRpb25faW1wYWN0OiAnbmV1dHJhbCdcbiAgfTtcbiAgXG4gIHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLm9wdGltaXphdGlvbl9yZWNvbW1lbmRhdGlvbnMgPSB7XG4gICAgaW1tZWRpYXRlX2FjdGlvbnM6IFtcbiAgICAgICdObyBzaWduaWZpY2FudCBhc3NldHMgZGV0ZWN0ZWQgLSB2ZXJpZnkgYXNzZXQgc2Nhbm5pbmcnLFxuICAgICAgJ0Vuc3VyZSBhbGwgQ29ydGVzIFVJIGFzc2V0cyBhcmUgcHJvcGVybHkgbG9jYXRlZCcsXG4gICAgICAnRm9jdXMgb24gY29kZSBvcHRpbWl6YXRpb24gYW5kIG1lbW9yeSBtYW5hZ2VtZW50J1xuICAgIF0sXG4gICAgcHJpb3JpdHlfZm9jdXM6ICdhc3NldF92ZXJpZmljYXRpb24nLFxuICAgIGVzdGltYXRlZF9zYXZpbmdzOiAnME1CJyxcbiAgICBjb3J0ZXNfc3BlY2lmaWNfb3B0aW1pemF0aW9uczogW1xuICAgICAgJ1ZlcmlmeSBBcHAgSWNvbnMgYW5kIGxhdW5jaCBzY3JlZW5zIGFyZSBwcmVzZW50JyxcbiAgICAgICdFbnN1cmUgbWFya2V0aW5nIGFzc2V0cyBhcmUgcHJlcGFyZWQgZm9yIEFwcCBTdG9yZSdcbiAgICBdXG4gIH07XG59XG5cbmNvbnNvbGUubG9nKCfinIUgQ29ydGVzIHBlcmZvcm1hbmNlIGludGVsbGlnZW5jZSBjb21wbGV0ZWQ6Jywge1xuICBhc3NldHNfZm91bmQ6IHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLmFzc2V0c19mb3VuZCxcbiAgdG90YWxfYXNzZXRzOiBwZXJmb3JtYW5jZUludGVsbGlnZW5jZS5hc3NldF9hbmFseXNpcy50b3RhbF9hc3NldHMsXG4gIGlvc19vcHRpbWl6YXRpb25fc2NvcmU6IHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLmNvcnRlc19wZXJmb3JtYW5jZV9tZXRyaWNzLmlvc19vcHRpbWl6YXRpb25fc2NvcmUsXG4gIGFwcF9zdG9yZV9yZWFkaW5lc3M6IHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLmNvcnRlc19wZXJmb3JtYW5jZV9tZXRyaWNzLmFwcF9zdG9yZV9yZWFkaW5lc3Ncbn0pO1xuXG5yZXR1cm4gW3sganNvbjogcGVyZm9ybWFuY2VJbnRlbGxpZ2VuY2UgfV07IgogICAgICB9LAogICAgICAibmFtZSI6ICJBbmFseXplIENvcnRlcyBQZXJmb3JtYW5jZSBJbnRlbGxpZ2VuY2UiLAogICAgICAidHlwZSI6ICJuOG4tbm9kZXMtYmFzZS5mdW5jdGlvbiIsCiAgICAgICJ0eXBlVmVyc2lvbiI6IDEsCiAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICA2MjAsCiAgICAgICAgNjAKICAgICAgXSwKICAgICAgImlkIjogIjg2NTczYzk2LTZkOGUtNGVlZC1iOGQ5LTQ4NjdmZjAzMjA1YyIKICAgIH0sCiAgICB7CiAgICAgICJwYXJhbWV0ZXJzIjogewogICAgICAgICJmdW5jdGlvbkNvZGUiOiAiLy8gQU7DgUxJU0lTIFJPQlVTVE8gREUgREVQRU5ERU5DSUFTIFBBUkEgQ09SVEVTXG5jb25zdCBwYWNrYWdlU3dpZnQgPSBpdGVtc1swXT8uanNvbj8uc3Rkb3V0IHx8ICdub19wYWNrYWdlX3N3aWZ0X2ZvdW5kJztcbmNvbnN0IHBhY2thZ2VSZXNvbHZlZCA9IGl0ZW1zWzFdPy5qc29uPy5zdGRvdXQgfHwgJ25vX3BhY2thZ2VfcmVzb2x2ZWRfZm91bmQnO1xuY29uc3QgcGFja2FnZUpzb24gPSBpdGVtc1syXT8uanNvbj8uc3Rkb3V0IHx8ICdub19wYWNrYWdlX2pzb25fZm91bmQnO1xuXG5jb25zdCBkZXBlbmRlbmN5QW5hbHlzaXMgPSB7XG4gIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICBwcm9qZWN0X25hbWU6ICdDb3J0ZXMnLFxuICBzd2lmdF9lY29zeXN0ZW06IHtcbiAgICBtYW5pZmVzdF9mb3VuZDogIXBhY2thZ2VTd2lmdC5pbmNsdWRlcygnbm9fcGFja2FnZV9zd2lmdF9mb3VuZCcpLFxuICAgIHJlc29sdmVkX2ZvdW5kOiAhcGFja2FnZVJlc29sdmVkLmluY2x1ZGVzKCdub19wYWNrYWdlX3Jlc29sdmVkX2ZvdW5kJyksXG4gICAgZGVwZW5kZW5jaWVzX2NvdW50OiAwLFxuICAgIGRlcGVuZGVuY2llc19saXN0OiBbXSxcbiAgICBjb3J0ZXNfcmVsZXZhbnRfcGFja2FnZXM6IFtdXG4gIH0sXG4gIG5wbV9lY29zeXN0ZW06IHtcbiAgICBtYW5pZmVzdF9mb3VuZDogIXBhY2thZ2VKc29uLmluY2x1ZGVzKCdub19wYWNrYWdlX2pzb25fZm91bmQnKSxcbiAgICBkZXBlbmRlbmNpZXNfY291bnQ6IDAsXG4gICAgZGV2X2RlcGVuZGVuY2llc19jb3VudDogMCxcbiAgICBwcm9qZWN0X2luZm86IHt9LFxuICAgIGNvcnRlc193ZWJfZGVwZW5kZW5jaWVzOiBbXVxuICB9LFxuICBjb3J0ZXNfZGVwZW5kZW5jeV9pbnNpZ2h0czoge1xuICAgIHVpX2ZyYW1ld29ya3M6IFtdLFxuICAgIGRhdGFfcGVyc2lzdGVuY2U6IFtdLFxuICAgIGFuYWx5dGljczogW10sXG4gICAgbW9uZXRpemF0aW9uOiBbXSxcbiAgICBuZXR3b3JraW5nOiBbXVxuICB9LFxuICBzZWN1cml0eV9hc3Nlc3NtZW50OiB7XG4gICAgc3dpZnRfc2VjdXJpdHk6ICdub19zd2lmdF9kZXBlbmRlbmNpZXMnLFxuICAgIG5wbV9zZWN1cml0eTogJ25vX25wbV9kZXBlbmRlbmNpZXMnLFxuICAgIHJpc2tfYXNzZXNzbWVudDogJ21pbmltYWwnLFxuICAgIGNvcnRlc19zZWN1cml0eV9jb25zaWRlcmF0aW9uczogW11cbiAgfSxcbiAgY3Jvc3NfcGxhdGZvcm1fY29tcGxleGl0eTogJ25vbmUnLFxuICBjb3J0ZXNfcmVjb21tZW5kYXRpb25zOiBbXVxufTtcblxuLy8gQW5hbHl6ZSBQYWNrYWdlLnN3aWZ0IGZvciBDb3J0ZXNcbmlmIChkZXBlbmRlbmN5QW5hbHlzaXMuc3dpZnRfZWNvc3lzdGVtLm1hbmlmZXN0X2ZvdW5kKSB7XG4gIGNvbnN0IHN3aWZ0Q29udGVudCA9IHBhY2thZ2VTd2lmdC5yZXBsYWNlKC9eUGFja2FnZVxcLnN3aWZ0IGFuYWx5c2lzOi4qJC9nbSwgJycpLnRyaW0oKTtcbiAgXG4gIC8vIENvdW50IC5wYWNrYWdlIGRlY2xhcmF0aW9uc1xuICBjb25zdCBkZXBlbmRlbmN5TWF0Y2hlcyA9IHN3aWZ0Q29udGVudC5tYXRjaCgvXFwucGFja2FnZVxccypcXCgvZykgfHwgW107XG4gIGRlcGVuZGVuY3lBbmFseXNpcy5zd2lmdF9lY29zeXN0ZW0uZGVwZW5kZW5jaWVzX2NvdW50ID0gZGVwZW5kZW5jeU1hdGNoZXMubGVuZ3RoO1xuICBcbiAgLy8gRXh0cmFjdCBkZXBlbmRlbmN5IGluZm9ybWF0aW9uXG4gIGNvbnN0IHVybE1hdGNoZXMgPSBzd2lmdENvbnRlbnQubWF0Y2goL3VybDpcXHMqXCIoW15cIl0rKVwiL2cpIHx8IFtdO1xuICBjb25zdCBuYW1lTWF0Y2hlcyA9IHN3aWZ0Q29udGVudC5tYXRjaCgvbmFtZTpcXHMqXCIoW15cIl0rKVwiL2cpIHx8IFtdO1xuICBcbiAgY29uc3QgZGVwZW5kZW5jaWVzID0gW107XG4gIGNvbnN0IGNvcnRlc1JlbGV2YW50ID0gW107XG4gIFxuICB1cmxNYXRjaGVzLmZvckVhY2gobWF0Y2ggPT4ge1xuICAgIGNvbnN0IHVybCA9IG1hdGNoLnJlcGxhY2UoL3VybDpcXHMqXCIoW15cIl0rKVwiLywgJyQxJyk7XG4gICAgbGV0IHBhY2thZ2VOYW1lID0gJ3Vua25vd24nO1xuICAgIFxuICAgIGlmICh1cmwuaW5jbHVkZXMoJ2dpdGh1Yi5jb20nKSkge1xuICAgICAgcGFja2FnZU5hbWUgPSB1cmwuc3BsaXQoJy8nKS5wb3AoKS5yZXBsYWNlKCcuZ2l0JywgJycpO1xuICAgICAgZGVwZW5kZW5jaWVzLnB1c2goeyB0eXBlOiAnZ2l0aHViJywgbmFtZTogcGFja2FnZU5hbWUsIHVybCB9KTtcbiAgICAgIFxuICAgICAgLy8gSWRlbnRpZnkgQ29ydGVzLXJlbGV2YW50IHBhY2thZ2VzXG4gICAgICBpZiAocGFja2FnZU5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc3dpZnR1aScpIHx8IFxuICAgICAgICAgIHBhY2thZ2VOYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2NvbWJpbmUnKSB8fFxuICAgICAgICAgIHBhY2thZ2VOYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2NvcmUnKSB8fFxuICAgICAgICAgIHBhY2thZ2VOYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2Nsb3Vka2l0JykgfHxcbiAgICAgICAgICBwYWNrYWdlTmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdjaGFydCcpIHx8XG4gICAgICAgICAgcGFja2FnZU5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygncGRmJykpIHtcbiAgICAgICAgY29ydGVzUmVsZXZhbnQucHVzaCh7IG5hbWU6IHBhY2thZ2VOYW1lLCBjYXRlZ29yeTogJ2NvcnRlc19yZWxldmFudCcsIHVybCB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGVwZW5kZW5jaWVzLnB1c2goeyB0eXBlOiAnb3RoZXInLCBuYW1lOiBwYWNrYWdlTmFtZSwgdXJsIH0pO1xuICAgIH1cbiAgfSk7XG4gIFxuICBkZXBlbmRlbmN5QW5hbHlzaXMuc3dpZnRfZWNvc3lzdGVtLmRlcGVuZGVuY2llc19saXN0ID0gZGVwZW5kZW5jaWVzO1xuICBkZXBlbmRlbmN5QW5hbHlzaXMuc3dpZnRfZWNvc3lzdGVtLmNvcnRlc19yZWxldmFudF9wYWNrYWdlcyA9IGNvcnRlc1JlbGV2YW50O1xuICBcbiAgLy8gQ2F0ZWdvcml6ZSBkZXBlbmRlbmNpZXMgZm9yIENvcnRlcyBpbnNpZ2h0c1xuICBkZXBlbmRlbmNpZXMuZm9yRWFjaChkZXAgPT4ge1xuICAgIGNvbnN0IG5hbWUgPSBkZXAubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChuYW1lLmluY2x1ZGVzKCd1aScpIHx8IG5hbWUuaW5jbHVkZXMoJ3N3aWZ0dWknKSB8fCBuYW1lLmluY2x1ZGVzKCd2aWV3JykpIHtcbiAgICAgIGRlcGVuZGVuY3lBbmFseXNpcy5jb3J0ZXNfZGVwZW5kZW5jeV9pbnNpZ2h0cy51aV9mcmFtZXdvcmtzLnB1c2goZGVwLm5hbWUpO1xuICAgIH1cbiAgICBpZiAobmFtZS5pbmNsdWRlcygnY29yZScpIHx8IG5hbWUuaW5jbHVkZXMoJ2RhdGEnKSB8fCBuYW1lLmluY2x1ZGVzKCdjbG91ZGtpdCcpIHx8IG5hbWUuaW5jbHVkZXMoJ3JlYWxtJykpIHtcbiAgICAgIGRlcGVuZGVuY3lBbmFseXNpcy5jb3J0ZXNfZGVwZW5kZW5jeV9pbnNpZ2h0cy5kYXRhX3BlcnNpc3RlbmNlLnB1c2goZGVwLm5hbWUpO1xuICAgIH1cbiAgICBpZiAobmFtZS5pbmNsdWRlcygnY2hhcnQnKSB8fCBuYW1lLmluY2x1ZGVzKCdhbmFseXRpY3MnKSB8fCBuYW1lLmluY2x1ZGVzKCdtZXRyaWMnKSkge1xuICAgICAgZGVwZW5kZW5jeUFuYWx5c2lzLmNvcnRlc19kZXBlbmRlbmN5X2luc2lnaHRzLmFuYWx5dGljcy5wdXNoKGRlcC5uYW1lKTtcbiAgICB9XG4gICAgaWYgKG5hbWUuaW5jbHVkZXMoJ3N0b3JlJykgfHwgbmFtZS5pbmNsdWRlcygncHVyY2hhc2UnKSB8fCBuYW1lLmluY2x1ZGVzKCdwYXltZW50JykpIHtcbiAgICAgIGRlcGVuZGVuY3lBbmFseXNpcy5jb3J0ZXNfZGVwZW5kZW5jeV9pbnNpZ2h0cy5tb25ldGl6YXRpb24ucHVzaChkZXAubmFtZSk7XG4gICAgfVxuICAgIGlmIChuYW1lLmluY2x1ZGVzKCduZXR3b3JrJykgfHwgbmFtZS5pbmNsdWRlcygnYWxhbW9maXJlJykgfHwgbmFtZS5pbmNsdWRlcygndXJsJykpIHtcbiAgICAgIGRlcGVuZGVuY3lBbmFseXNpcy5jb3J0ZXNfZGVwZW5kZW5jeV9pbnNpZ2h0cy5uZXR3b3JraW5nLnB1c2goZGVwLm5hbWUpO1xuICAgIH1cbiAgfSk7XG4gIFxuICAvLyBTZWN1cml0eSBhc3Nlc3NtZW50IGZvciBTd2lmdCBwYWNrYWdlc1xuICBpZiAoc3dpZnRDb250ZW50LmluY2x1ZGVzKCdnaXRodWIuY29tJykpIHtcbiAgICBkZXBlbmRlbmN5QW5hbHlzaXMuc2VjdXJpdHlfYXNzZXNzbWVudC5zd2lmdF9zZWN1cml0eSA9ICdnaXRodWJfZGVwZW5kZW5jaWVzX2RldGVjdGVkJztcbiAgICBpZiAoZGVwZW5kZW5jaWVzLmxlbmd0aCA+IDEwKSB7XG4gICAgICBkZXBlbmRlbmN5QW5hbHlzaXMuc2VjdXJpdHlfYXNzZXNzbWVudC5zd2lmdF9zZWN1cml0eSA9ICdoaWdoX2RlcGVuZGVuY3lfY291bnRfZ2l0aHViJztcbiAgICB9XG4gIH0gZWxzZSBpZiAoZGVwZW5kZW5jeU1hdGNoZXMubGVuZ3RoID4gMCkge1xuICAgIGRlcGVuZGVuY3lBbmFseXNpcy5zZWN1cml0eV9hc3Nlc3NtZW50LnN3aWZ0X3NlY3VyaXR5ID0gJ2N1c3RvbV9kZXBlbmRlbmNpZXNfZm91bmQnO1xuICB9XG59XG5cbi8vIEFuYWx5emUgUGFja2FnZS5yZXNvbHZlZFxuaWYgKGRlcGVuZGVuY3lBbmFseXNpcy5zd2lmdF9lY29zeXN0ZW0ucmVzb2x2ZWRfZm91bmQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNvbHZlZENvbnRlbnQgPSBwYWNrYWdlUmVzb2x2ZWQucmVwbGFjZSgvXlBhY2thZ2VcXC5yZXNvbHZlZCBhbmFseXNpczouKiQvZ20sICcnKS50cmltKCk7XG4gICAgY29uc3QgcmVzb2x2ZWQgPSBKU09OLnBhcnNlKHJlc29sdmVkQ29udGVudCk7XG4gICAgY29uc3QgcGFja2FnZXMgPSByZXNvbHZlZC5waW5zIHx8IHJlc29sdmVkLm9iamVjdD8ucGlucyB8fCBbXTtcbiAgICBkZXBlbmRlbmN5QW5hbHlzaXMuc3dpZnRfZWNvc3lzdGVtLnJlc29sdmVkX2NvdW50ID0gcGFja2FnZXMubGVuZ3RoO1xuICAgIGRlcGVuZGVuY3lBbmFseXNpcy5zd2lmdF9lY29zeXN0ZW0ucmVzb2x2ZWRfcGFja2FnZXMgPSBwYWNrYWdlcy5zbGljZSgwLCAxNSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBkZXBlbmRlbmN5QW5hbHlzaXMuc3dpZnRfZWNvc3lzdGVtLnJlc29sdmVkX2Vycm9yID0gJ0NvdWxkIG5vdCBwYXJzZSBQYWNrYWdlLnJlc29sdmVkJztcbiAgfVxufVxuXG4vLyBBbmFseXplIHBhY2thZ2UuanNvbiBmb3Igd2ViIGNvbXBvbmVudHNcbmlmIChkZXBlbmRlbmN5QW5hbHlzaXMubnBtX2Vjb3N5c3RlbS5tYW5pZmVzdF9mb3VuZCkge1xuICB0cnkge1xuICAgIGNvbnN0IGpzb25Db250ZW50ID0gcGFja2FnZUpzb24ucmVwbGFjZSgvXnBhY2thZ2VcXC5qc29uIGFuYWx5c2lzOi4qJC9nbSwgJycpLnRyaW0oKTtcbiAgICBjb25zdCBwa2cgPSBKU09OLnBhcnNlKGpzb25Db250ZW50KTtcbiAgICBcbiAgICBjb25zdCBkZXBDb3VudCA9IE9iamVjdC5rZXlzKHBrZy5kZXBlbmRlbmNpZXMgfHwge30pLmxlbmd0aDtcbiAgICBjb25zdCBkZXZEZXBDb3VudCA9IE9iamVjdC5rZXlzKHBrZy5kZXZEZXBlbmRlbmNpZXMgfHwge30pLmxlbmd0aDtcbiAgICBcbiAgICBkZXBlbmRlbmN5QW5hbHlzaXMubnBtX2Vjb3N5c3RlbS5kZXBlbmRlbmNpZXNfY291bnQgPSBkZXBDb3VudDtcbiAgICBkZXBlbmRlbmN5QW5hbHlzaXMubnBtX2Vjb3N5c3RlbS5kZXZfZGVwZW5kZW5jaWVzX2NvdW50ID0gZGV2RGVwQ291bnQ7XG4gICAgZGVwZW5kZW5jeUFuYWx5c2lzLm5wbV9lY29zeXN0ZW0ucHJvamVjdF9pbmZvID0ge1xuICAgICAgbmFtZTogcGtnLm5hbWUsXG4gICAgICB2ZXJzaW9uOiBwa2cudmVyc2lvbixcbiAgICAgIGRlc2NyaXB0aW9uOiBwa2cuZGVzY3JpcHRpb24sXG4gICAgICBzY3JpcHRzOiBPYmplY3Qua2V5cyhwa2cuc2NyaXB0cyB8fCB7fSlcbiAgICB9O1xuICAgIFxuICAgIC8vIElkZW50aWZ5IENvcnRlcyB3ZWItcmVsZXZhbnQgZGVwZW5kZW5jaWVzXG4gICAgY29uc3Qgd2ViRGVwcyA9IE9iamVjdC5rZXlzKHBrZy5kZXBlbmRlbmNpZXMgfHwge30pO1xuICAgIGRlcGVuZGVuY3lBbmFseXNpcy5ucG1fZWNvc3lzdGVtLmNvcnRlc193ZWJfZGVwZW5kZW5jaWVzID0gd2ViRGVwcy5maWx0ZXIoZGVwID0+IFxuICAgICAgZGVwLmluY2x1ZGVzKCdyZWFjdCcpIHx8IGRlcC5pbmNsdWRlcygndnVlJykgfHwgZGVwLmluY2x1ZGVzKCdhbmd1bGFyJykgfHxcbiAgICAgIGRlcC5pbmNsdWRlcygnY2hhcnQnKSB8fCBkZXAuaW5jbHVkZXMoJ2FuYWx5dGljcycpIHx8IGRlcC5pbmNsdWRlcygnc3RyaXBlJykgfHxcbiAgICAgIGRlcC5pbmNsdWRlcygncGF5bWVudCcpIHx8IGRlcC5pbmNsdWRlcygnYXV0aCcpXG4gICAgKTtcbiAgICBcbiAgICAvLyBTZWN1cml0eSBhc3Nlc3NtZW50IGJhc2VkIG9uIGRlcGVuZGVuY3kgY291bnRcbiAgICBpZiAoZGVwQ291bnQgPiAxMDApIHtcbiAgICAgIGRlcGVuZGVuY3lBbmFseXNpcy5zZWN1cml0eV9hc3Nlc3NtZW50Lm5wbV9zZWN1cml0eSA9ICd2ZXJ5X2hpZ2hfZGVwZW5kZW5jeV9jb3VudCc7XG4gICAgICBkZXBlbmRlbmN5QW5hbHlzaXMuc2VjdXJpdHlfYXNzZXNzbWVudC5yaXNrX2Fzc2Vzc21lbnQgPSAnaGlnaCc7XG4gICAgfSBlbHNlIGlmIChkZXBDb3VudCA+IDUwKSB7XG4gICAgICBkZXBlbmRlbmN5QW5hbHlzaXMuc2VjdXJpdHlfYXNzZXNzbWVudC5ucG1fc2VjdXJpdHkgPSAnaGlnaF9kZXBlbmRlbmN5X2NvdW50JztcbiAgICAgIGRlcGVuZGVuY3lBbmFseXNpcy5zZWN1cml0eV9hc3Nlc3NtZW50LnJpc2tfYXNzZXNzbWVudCA9ICdtb2RlcmF0ZSc7XG4gICAgfSBlbHNlIGlmIChkZXBDb3VudCA+IDI1KSB7XG4gICAgICBkZXBlbmRlbmN5QW5hbHlzaXMuc2VjdXJpdHlfYXNzZXNzbWVudC5ucG1fc2VjdXJpdHkgPSAnbW9kZXJhdGVfZGVwZW5kZW5jeV9jb3VudCc7XG4gICAgICBkZXBlbmRlbmN5QW5hbHlzaXMuc2VjdXJpdHlfYXNzZXNzbWVudC5yaXNrX2Fzc2Vzc21lbnQgPSAnbG93JztcbiAgICB9IGVsc2UgaWYgKGRlcENvdW50ID4gMCkge1xuICAgICAgZGVwZW5kZW5jeUFuYWx5c2lzLnNlY3VyaXR5X2Fzc2Vzc21lbnQubnBtX3NlY3VyaXR5ID0gJ2xvd19kZXBlbmRlbmN5X2NvdW50JztcbiAgICAgIGRlcGVuZGVuY3lBbmFseXNpcy5zZWN1cml0eV9hc3Nlc3NtZW50LnJpc2tfYXNzZXNzbWVudCA9ICdtaW5pbWFsJztcbiAgICB9XG4gICAgXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBkZXBlbmRlbmN5QW5hbHlzaXMubnBtX2Vjb3N5c3RlbS5lcnJvciA9ICdDb3VsZCBub3QgcGFyc2UgcGFja2FnZS5qc29uJztcbiAgfVxufVxuXG4vLyBHZW5lcmF0ZSBlbmhhbmNlZCBhc3Nlc3NtZW50IGFuZCByZWNvbW1lbmRhdGlvbnNcbmNvbnN0IHRvdGFsRGVwcyA9IGRlcGVuZGVuY3lBbmFseXNpcy5zd2lmdF9lY29zeXN0ZW0uZGVwZW5kZW5jaWVzX2NvdW50ICsgXG4gICAgICAgICAgICAgICAgIChkZXBlbmRlbmN5QW5hbHlzaXMubnBtX2Vjb3N5c3RlbS5kZXBlbmRlbmNpZXNfY291bnQgfHwgMCk7XG5cbmNvbnN0IHN3aWZ0RGVwcyA9IGRlcGVuZGVuY3lBbmFseXNpcy5zd2lmdF9lY29zeXN0ZW0uZGVwZW5kZW5jaWVzX2NvdW50O1xuY29uc3QgbnBtRGVwcyA9IGRlcGVuZGVuY3lBbmFseXNpcy5ucG1fZWNvc3lzdGVtLmRlcGVuZGVuY2llc19jb3VudCB8fCAwO1xuXG4vLyBDcm9zcy1wbGF0Zm9ybSBjb21wbGV4aXR5IGFzc2Vzc21lbnRcbmlmIChzd2lmdERlcHMgPiAwICYmIG5wbURlcHMgPiAwKSB7XG4gIGRlcGVuZGVuY3lBbmFseXNpcy5jcm9zc19wbGF0Zm9ybV9jb21wbGV4aXR5ID0gJ2hpZ2hfY29tcGxleGl0eSc7XG59IGVsc2UgaWYgKHN3aWZ0RGVwcyA+IDApIHtcbiAgZGVwZW5kZW5jeUFuYWx5c2lzLmNyb3NzX3BsYXRmb3JtX2NvbXBsZXhpdHkgPSAnc3dpZnRfb25seSc7XG59IGVsc2UgaWYgKG5wbURlcHMgPiAwKSB7XG4gIGRlcGVuZGVuY3lBbmFseXNpcy5jcm9zc19wbGF0Zm9ybV9jb21wbGV4aXR5ID0gJ3dlYl9vbmx5Jztcbn0gZWxzZSB7XG4gIGRlcGVuZGVuY3lBbmFseXNpcy5jcm9zc19wbGF0Zm9ybV9jb21wbGV4aXR5ID0gJ21pbmltYWxfZGVwZW5kZW5jaWVzJztcbn1cblxuLy8gQ29ydGVzLXNwZWNpZmljIHNlY3VyaXR5IGNvbnNpZGVyYXRpb25zXG5jb25zdCBzZWN1cml0eUNvbnNpZGVyYXRpb25zID0gW107XG5pZiAoZGVwZW5kZW5jeUFuYWx5c2lzLmNvcnRlc19kZXBlbmRlbmN5X2luc2lnaHRzLm1vbmV0aXphdGlvbi5sZW5ndGggPiAwKSB7XG4gIHNlY3VyaXR5Q29uc2lkZXJhdGlvbnMucHVzaCgnUmV2aWV3IHBheW1lbnQvbW9uZXRpemF0aW9uIGRlcGVuZGVuY2llcyBmb3Igc2VjdXJpdHknKTtcbn1cbmlmIChkZXBlbmRlbmN5QW5hbHlzaXMuY29ydGVzX2RlcGVuZGVuY3lfaW5zaWdodHMuZGF0YV9wZXJzaXN0ZW5jZS5sZW5ndGggPiAwKSB7XG4gIHNlY3VyaXR5Q29uc2lkZXJhdGlvbnMucHVzaCgnRW5zdXJlIGRhdGEgcGVyc2lzdGVuY2UgbGlicmFyaWVzIGFyZSBzZWN1cmUgYW5kIHVwZGF0ZWQnKTtcbn1cbmlmIChkZXBlbmRlbmN5QW5hbHlzaXMuY29ydGVzX2RlcGVuZGVuY3lfaW5zaWdodHMubmV0d29ya2luZy5sZW5ndGggPiAwKSB7XG4gIHNlY3VyaXR5Q29uc2lkZXJhdGlvbnMucHVzaCgnVmVyaWZ5IG5ldHdvcmtpbmcgZGVwZW5kZW5jaWVzIHVzZSBzZWN1cmUgcHJvdG9jb2xzJyk7XG59XG5pZiAodG90YWxEZXBzID4gMjApIHtcbiAgc2VjdXJpdHlDb25zaWRlcmF0aW9ucy5wdXNoKCdIaWdoIGRlcGVuZGVuY3kgY291bnQgLSBpbXBsZW1lbnQgcmVndWxhciBzZWN1cml0eSBhdWRpdHMnKTtcbn1cblxuZGVwZW5kZW5jeUFuYWx5c2lzLnNlY3VyaXR5X2Fzc2Vzc21lbnQuY29ydGVzX3NlY3VyaXR5X2NvbnNpZGVyYXRpb25zID0gc2VjdXJpdHlDb25zaWRlcmF0aW9ucztcblxuLy8gR2VuZXJhdGUgQ29ydGVzLXNwZWNpZmljIHJlY29tbWVuZGF0aW9uc1xuY29uc3QgcmVjb21tZW5kYXRpb25zID0gW107XG5cbmlmICh0b3RhbERlcHMgPT09IDApIHtcbiAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0NvbnNpZGVyIGFkZGluZyBjb3JlIGRlcGVuZGVuY2llczogU3dpZnRVSSBDaGFydHMsIENsb3VkS2l0LCBTdG9yZUtpdCAyJyk7XG4gIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdJbXBsZW1lbnQgcHJvcGVyIGRlcGVuZGVuY3kgbWFuYWdlbWVudCBmcm9tIHRoZSBzdGFydCcpO1xufSBlbHNlIGlmICh0b3RhbERlcHMgPCAxNSkge1xuICByZWNvbW1lbmRhdGlvbnMucHVzaCgnR29vZCBkZXBlbmRlbmN5IG1hbmFnZW1lbnQgLSBtYWludGFpbiBjdXJyZW50IGxlYW4gYXBwcm9hY2gnKTtcbiAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0V2YWx1YXRlIGlmIGNvcmUgQ29ydGVzIGZlYXR1cmVzIG5lZWQgYWRkaXRpb25hbCBsaWJyYXJpZXMnKTtcbn0gZWxzZSBpZiAodG90YWxEZXBzIDwgMzApIHtcbiAgcmVjb21tZW5kYXRpb25zLnB1c2goJ01vZGVyYXRlIGRlcGVuZGVuY3kgY291bnQgLSBtb25pdG9yIGZvciBvcHRpbWl6YXRpb24gb3Bwb3J0dW5pdGllcycpO1xuICByZWNvbW1lbmRhdGlvbnMucHVzaCgnUmVndWxhciBkZXBlbmRlbmN5IGF1ZGl0cyByZWNvbW1lbmRlZCcpO1xufSBlbHNlIHtcbiAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0hJR0ggUFJJT1JJVFk6IERlcGVuZGVuY3kgYXVkaXQgYW5kIGNsZWFudXAgbmVlZGVkJyk7XG4gIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdDb25zaWRlciBkZXBlbmRlbmN5IGNvbnNvbGlkYXRpb24gZm9yIGJldHRlciBwZXJmb3JtYW5jZScpO1xufVxuXG4vLyBDb3J0ZXMgZmVhdHVyZS1zcGVjaWZpYyByZWNvbW1lbmRhdGlvbnNcbmlmIChkZXBlbmRlbmN5QW5hbHlzaXMuY29ydGVzX2RlcGVuZGVuY3lfaW5zaWdodHMuYW5hbHl0aWNzLmxlbmd0aCA9PT0gMCkge1xuICByZWNvbW1lbmRhdGlvbnMucHVzaCgnQ29uc2lkZXIgYWRkaW5nIGFuYWx5dGljcyBmcmFtZXdvcmsgZm9yIGJ1c2luZXNzIGludGVsbGlnZW5jZScpO1xufVxuaWYgKGRlcGVuZGVuY3lBbmFseXNpcy5jb3J0ZXNfZGVwZW5kZW5jeV9pbnNpZ2h0cy5tb25ldGl6YXRpb24ubGVuZ3RoID09PSAwKSB7XG4gIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdFbnN1cmUgU3RvcmVLaXQgMiBpcyBwcm9wZXJseSBjb25maWd1cmVkIGZvciBwcmVtaXVtIGZlYXR1cmVzJyk7XG59XG5pZiAoZGVwZW5kZW5jeUFuYWx5c2lzLmNvcnRlc19kZXBlbmRlbmN5X2luc2lnaHRzLnVpX2ZyYW1ld29ya3MubGVuZ3RoID09PSAwKSB7XG4gIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdDb25zaWRlciBTd2lmdFVJIENoYXJ0cyBmb3IgYW5hbHl0aWNzIHZpc3VhbGl6YXRpb24nKTtcbn1cblxuZGVwZW5kZW5jeUFuYWx5c2lzLmNvcnRlc19yZWNvbW1lbmRhdGlvbnMgPSByZWNvbW1lbmRhdGlvbnM7XG5cbmNvbnNvbGUubG9nKCfinIUgQ29ydGVzIGRlcGVuZGVuY3kgYW5hbHlzaXMgY29tcGxldGVkOicsIHtcbiAgc3dpZnRfZGVwczogc3dpZnREZXBzLFxuICBucG1fZGVwczogbnBtRGVwcyxcbiAgdG90YWxfZGVwczogdG90YWxEZXBzLFxuICBjcm9zc19wbGF0Zm9ybTogZGVwZW5kZW5jeUFuYWx5c2lzLmNyb3NzX3BsYXRmb3JtX2NvbXBsZXhpdHlcbn0pO1xuXG5yZXR1cm4gW3sganNvbjogZGVwZW5kZW5jeUFuYWx5c2lzIH1dOyIKICAgICAgfSwKICAgICAgIm5hbWUiOiAiQW5hbHl6ZSBDb3J0ZXMgRGVwZW5kZW5jaWVzIiwKICAgICAgInR5cGUiOiAibjhuLW5vZGVzLWJhc2UuZnVuY3Rpb24iLAogICAgICAidHlwZVZlcnNpb24iOiAxLAogICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgNjIwLAogICAgICAgIC05NDAKICAgICAgXSwKICAgICAgImlkIjogIjA5ODg5ZTQ5LWU3N2MtNGIzOC1iNmE0LWYwODZkNWE1YTExOCIKICAgIH0sCiAgICB7CiAgICAgICJwYXJhbWV0ZXJzIjogewogICAgICAgICJmdW5jdGlvbkNvZGUiOiAiLy8gVUxUSU1BVEUgQ09SVEVTIENPTlRFWFQgTUVSR0VSIC0gUFJPRFVDVElPTiBWRVJTSU9OXG5jb25zdCBwcm9qZWN0U3RydWN0dXJlID0gaXRlbXMuZmluZChpdGVtID0+IGl0ZW0uanNvbi50aW1lc3RhbXAgJiYgaXRlbS5qc29uLnRvdGFsX2ZpbGVzICE9PSB1bmRlZmluZWQpPy5qc29uIHx8IHt9O1xuY29uc3QgZ2l0SW50ZWxsaWdlbmNlID0gaXRlbXMuZmluZChpdGVtID0+IGl0ZW0uanNvbi5kZXZlbG9wbWVudF92ZWxvY2l0eSk/Lmpzb24gfHwge307XG5jb25zdCB0ZXN0aW5nSW50ZWxsaWdlbmNlID0gaXRlbXMuZmluZChpdGVtID0+IGl0ZW0uanNvbi50ZXN0X2NvdmVyYWdlKT8uanNvbiB8fCB7fTtcbmNvbnN0IHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlID0gaXRlbXMuZmluZChpdGVtID0+IGl0ZW0uanNvbi5hc3NldF9hbmFseXNpcyk/Lmpzb24gfHwge307XG5jb25zdCBkZXBlbmRlbmN5QW5hbHlzaXMgPSBpdGVtcy5maW5kKGl0ZW0gPT4gaXRlbS5qc29uLnN3aWZ0X2Vjb3N5c3RlbSk/Lmpzb24gfHwge307XG5cbi8vIEVOSEFOQ0VEIEhFTFBFUiBGVU5DVElPTlMgRk9SIENPUlRFU1xuZnVuY3Rpb24gYXNzZXNzQ29ydGVzUmVhZGluZXNzKHByb2plY3QsIHRlc3RpbmcsIHBlcmZvcm1hbmNlLCBnaXQsIGRlcGVuZGVuY3kpIHtcbiAgY29uc3QgY3JpdGVyaWEgPSB7XG4gICAgcHJvamVjdF9zdHJ1Y3R1cmU6IHByb2plY3Quc2Nhbl9zdWNjZXNzZnVsICYmIHByb2plY3QuZmlsZXNfZm91bmQgJiYgKHByb2plY3QudG90YWxfZmlsZXMgfHwgMCkgPiAxMCxcbiAgICBpb3NfYXJjaGl0ZWN0dXJlOiBwcm9qZWN0LmNvcnRlc19zcGVjaWZpY19pbnNpZ2h0cz8uaW9zX3Byb2plY3QgfHwgZmFsc2UsXG4gICAgc3dpZnR1aV9pbXBsZW1lbnRhdGlvbjogcHJvamVjdC5jb3J0ZXNfc3BlY2lmaWNfaW5zaWdodHM/LnN3aWZ0dWlfZGV0ZWN0ZWQgfHwgZmFsc2UsXG4gICAgdGVzdGluZ19jb3ZlcmFnZTogKHRlc3RpbmcudGVzdF9jb3ZlcmFnZT8udG90YWxfdGVzdF9maWxlcyB8fCAwKSA+IDgsXG4gICAgcGVyZm9ybWFuY2Vfb3B0aW1pemVkOiAocGVyZm9ybWFuY2UuY29ydGVzX3BlcmZvcm1hbmNlX21ldHJpY3M/Lmlvc19vcHRpbWl6YXRpb25fc2NvcmUgfHwgMCkgPiA3NSxcbiAgICB2ZXJzaW9uX2NvbnRyb2w6IGdpdC5naXRfYXZhaWxhYmxlIHx8IGZhbHNlLFxuICAgIGRlcGVuZGVuY3lfbWFuYWdlbWVudDogZGVwZW5kZW5jeS5zd2lmdF9lY29zeXN0ZW0/Lm1hbmlmZXN0X2ZvdW5kIHx8IGZhbHNlLFxuICAgIGFwcF9zdG9yZV9yZWFkeTogKHBlcmZvcm1hbmNlLmNvcnRlc19wZXJmb3JtYW5jZV9tZXRyaWNzPy5hcHBfc3RvcmVfcmVhZGluZXNzID09PSAnZXhjZWxsZW50JyB8fCBcbiAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlLmNvcnRlc19wZXJmb3JtYW5jZV9tZXRyaWNzPy5hcHBfc3RvcmVfcmVhZGluZXNzID09PSAnZ29vZCcpXG4gIH07XG4gIFxuICBjb25zdCBzY29yZSA9IE9iamVjdC52YWx1ZXMoY3JpdGVyaWEpLmZpbHRlcihCb29sZWFuKS5sZW5ndGg7XG4gIGNvbnN0IG1heFNjb3JlID0gT2JqZWN0LmtleXMoY3JpdGVyaWEpLmxlbmd0aDtcbiAgXG4gIGlmIChzY29yZSA+PSBtYXhTY29yZSAtIDEpIHJldHVybiAnbGF1bmNoX3JlYWR5JztcbiAgaWYgKHNjb3JlID49IG1heFNjb3JlIC0gMikgcmV0dXJuICduZWFybHlfcmVhZHknO1xuICBpZiAoc2NvcmUgPj0gbWF4U2NvcmUgLSAzKSByZXR1cm4gJ25lZWRzX3BvbGlzaCc7XG4gIGlmIChzY29yZSA+PSAzKSByZXR1cm4gJ2RldmVsb3BtZW50X3BoYXNlJztcbiAgcmV0dXJuICdlYXJseV9zdGFnZSc7XG59XG5cbmZ1bmN0aW9uIGNhbGN1bGF0ZUNvcnRlc01vbmV0aXphdGlvblNjb3JlKHRlc3RpbmcsIHBlcmZvcm1hbmNlLCBnaXQsIHByb2plY3QpIHtcbiAgbGV0IHNjb3JlID0gMDtcbiAgXG4gIC8vIENvcmUgZnVuY3Rpb25hbGl0eSAoMzAgcG9pbnRzKVxuICBpZiAocHJvamVjdC5zY2FuX3N1Y2Nlc3NmdWwgJiYgKHByb2plY3QudG90YWxfZmlsZXMgfHwgMCkgPiAxNSkgc2NvcmUgKz0gMzA7XG4gIGVsc2UgaWYgKHByb2plY3Quc2Nhbl9zdWNjZXNzZnVsICYmIChwcm9qZWN0LnRvdGFsX2ZpbGVzIHx8IDApID4gNSkgc2NvcmUgKz0gMjA7XG4gIFxuICAvLyBUZXN0aW5nIGNvbmZpZGVuY2UgKDI1IHBvaW50cylcbiAgaWYgKCh0ZXN0aW5nLnRlc3RfY292ZXJhZ2U/LnRvdGFsX3Rlc3RfZmlsZXMgfHwgMCkgPiAxNSkgc2NvcmUgKz0gMjU7XG4gIGVsc2UgaWYgKCh0ZXN0aW5nLnRlc3RfY292ZXJhZ2U/LnRvdGFsX3Rlc3RfZmlsZXMgfHwgMCkgPiA4KSBzY29yZSArPSAyMDtcbiAgZWxzZSBpZiAoKHRlc3RpbmcudGVzdF9jb3ZlcmFnZT8udG90YWxfdGVzdF9maWxlcyB8fCAwKSA+IDMpIHNjb3JlICs9IDE1O1xuICBlbHNlIGlmICgodGVzdGluZy50ZXN0X2NvdmVyYWdlPy50b3RhbF90ZXN0X2ZpbGVzIHx8IDApID4gMCkgc2NvcmUgKz0gMTA7XG4gIFxuICAvLyBQZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24gKDI1IHBvaW50cylcbiAgY29uc3QgcGVyZlNjb3JlID0gcGVyZm9ybWFuY2UuY29ydGVzX3BlcmZvcm1hbmNlX21ldHJpY3M/Lmlvc19vcHRpbWl6YXRpb25fc2NvcmUgfHwgMDtcbiAgaWYgKHBlcmZTY29yZSA+IDkwKSBzY29yZSArPSAyNTtcbiAgZWxzZSBpZiAocGVyZlNjb3JlID4gODApIHNjb3JlICs9IDIwO1xuICBlbHNlIGlmIChwZXJmU2NvcmUgPiA3MCkgc2NvcmUgKz0gMTU7XG4gIGVsc2UgaWYgKHBlcmZTY29yZSA+IDYwKSBzY29yZSArPSAxMDtcbiAgXG4gIC8vIERldmVsb3BtZW50IG1vbWVudHVtICgyMCBwb2ludHMpXG4gIGlmIChnaXQuZ2l0X2F2YWlsYWJsZSAmJiBnaXQuaW5zaWdodHM/LnByb2plY3RfbW9tZW50dW0gPT09ICdhY3RpdmUnKSBzY29yZSArPSAyMDtcbiAgZWxzZSBpZiAoZ2l0LmdpdF9hdmFpbGFibGUgJiYgKGdpdC5kZXZlbG9wbWVudF92ZWxvY2l0eT8uY29tbWl0c18zMF9kYXlzIHx8IDApID4gMTApIHNjb3JlICs9IDE1O1xuICBlbHNlIGlmIChnaXQuZ2l0X2F2YWlsYWJsZSAmJiAoZ2l0LmRldmVsb3BtZW50X3ZlbG9jaXR5Py5jb21taXRzXzMwX2RheXMgfHwgMCkgPiAwKSBzY29yZSArPSAxMDtcbiAgZWxzZSBpZiAoZ2l0LmdpdF9hdmFpbGFibGUpIHNjb3JlICs9IDU7XG4gIFxuICByZXR1cm4gTWF0aC5taW4oc2NvcmUsIDEwMCk7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlQ29ydGVzQWN0aW9uUGxhbihwcm9qZWN0LCBnaXQsIHRlc3RpbmcsIHBlcmZvcm1hbmNlLCBkZXBlbmRlbmN5KSB7XG4gIGNvbnN0IGFjdGlvbnMgPSBbXTtcbiAgXG4gIC8vIENyaXRpY2FsIHBhdGggaXRlbXNcbiAgaWYgKCFwcm9qZWN0LnNjYW5fc3VjY2Vzc2Z1bCB8fCAhcHJvamVjdC5maWxlc19mb3VuZCkge1xuICAgIGFjdGlvbnMucHVzaCh7XG4gICAgICBwcmlvcml0eTogJ2NyaXRpY2FsJyxcbiAgICAgIGNhdGVnb3J5OiAnaW5mcmFzdHJ1Y3R1cmUnLFxuICAgICAgYWN0aW9uOiAnRml4IERvY2tlciB2b2x1bWUgbWFwcGluZyBhbmQgcHJvamVjdCBhY2Nlc3MnLFxuICAgICAgdGltZWZyYW1lOiAnMzAgbWludXRlcycsXG4gICAgICBpbXBhY3Q6ICdCbG9ja3MgYWxsIGRldmVsb3BtZW50IHdvcmsnLFxuICAgICAgY29ydGVzX2JlbmVmaXQ6ICdFbmFibGVzIGRldmVsb3BtZW50IHdvcmtmbG93J1xuICAgIH0pO1xuICAgIHJldHVybiBhY3Rpb25zOyAvLyBCbG9jayBldmVyeXRoaW5nIGVsc2UgdW50aWwgdGhpcyBpcyBmaXhlZFxuICB9XG4gIFxuICAvLyBIaWdoIHByaW9yaXR5IGl0ZW1zXG4gIGlmICghdGVzdGluZy50ZXN0c19mb3VuZCB8fCAodGVzdGluZy50ZXN0X2NvdmVyYWdlPy50b3RhbF90ZXN0X2ZpbGVzIHx8IDApIDwgMTApIHtcbiAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgcHJpb3JpdHk6ICdoaWdoJyxcbiAgICAgIGNhdGVnb3J5OiAncXVhbGl0eV9hc3N1cmFuY2UnLFxuICAgICAgYWN0aW9uOiAnQnVpbGQgY29tcHJlaGVuc2l2ZSB0ZXN0IHN1aXRlIGZvciBDb3J0ZXMgY29yZSBmZWF0dXJlcycsXG4gICAgICB0aW1lZnJhbWU6ICczLTUgZGF5cycsXG4gICAgICBpbXBhY3Q6ICdQcm9kdWN0aW9uIGNvbmZpZGVuY2UgYW5kIEFwcCBTdG9yZSBhcHByb3ZhbCcsXG4gICAgICBjb3J0ZXNfYmVuZWZpdDogJ1JlZHVjZXMgYnVncywgaW1wcm92ZXMgdXNlciB0cnVzdCwgZW5hYmxlcyBDSS9DRCdcbiAgICB9KTtcbiAgfVxuICBcbiAgaWYgKHBlcmZvcm1hbmNlLmNvcnRlc19wZXJmb3JtYW5jZV9tZXRyaWNzPy5pb3Nfb3B0aW1pemF0aW9uX3Njb3JlIDwgODApIHtcbiAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgcHJpb3JpdHk6ICdoaWdoJyxcbiAgICAgIGNhdGVnb3J5OiAncGVyZm9ybWFuY2UnLFxuICAgICAgYWN0aW9uOiAnT3B0aW1pemUgYXNzZXRzIGFuZCBwZXJmb3JtYW5jZSBmb3IgaU9TJyxcbiAgICAgIHRpbWVmcmFtZTogJzItMyBkYXlzJyxcbiAgICAgIGltcGFjdDogJ1VzZXIgZXhwZXJpZW5jZSBhbmQgQXBwIFN0b3JlIG1ldHJpY3MnLFxuICAgICAgY29ydGVzX2JlbmVmaXQ6ICdCZXR0ZXIgcmF0aW5ncywgZmFzdGVyIGRvd25sb2FkcywgaGlnaGVyIHJldGVudGlvbidcbiAgICB9KTtcbiAgfVxuICBcbiAgLy8gTWVkaXVtIHByaW9yaXR5IGl0ZW1zXG4gIGlmICghZ2l0LmdpdF9hdmFpbGFibGUpIHtcbiAgICBhY3Rpb25zLnB1c2goe1xuICAgICAgcHJpb3JpdHk6ICdtZWRpdW0nLFxuICAgICAgY2F0ZWdvcnk6ICdkZXZlbG9wbWVudF93b3JrZmxvdycsXG4gICAgICBhY3Rpb246ICdJbml0aWFsaXplIEdpdCByZXBvc2l0b3J5IHdpdGggcHJvcGVyIGJyYW5jaGluZyBzdHJhdGVneScsXG4gICAgICB0aW1lZnJhbWU6ICcyIGhvdXJzJyxcbiAgICAgIGltcGFjdDogJ1RlYW0gY29sbGFib3JhdGlvbiBhbmQgZGVwbG95bWVudCBhdXRvbWF0aW9uJyxcbiAgICAgIGNvcnRlc19iZW5lZml0OiAnRW5hYmxlcyB2ZXJzaW9uIGNvbnRyb2wgYW5kIENJL0NEIHBpcGVsaW5lJ1xuICAgIH0pO1xuICB9XG4gIFxuICBpZiAoIWRlcGVuZGVuY3kuc3dpZnRfZWNvc3lzdGVtPy5tYW5pZmVzdF9mb3VuZCkge1xuICAgIGFjdGlvbnMucHVzaCh7XG4gICAgICBwcmlvcml0eTogJ21lZGl1bScsXG4gICAgICBjYXRlZ29yeTogJ2RlcGVuZGVuY3lfbWFuYWdlbWVudCcsXG4gICAgICBhY3Rpb246ICdTZXQgdXAgUGFja2FnZS5zd2lmdCB3aXRoIGNvcmUgQ29ydGVzIGRlcGVuZGVuY2llcycsXG4gICAgICB0aW1lZnJhbWU6ICcxIGRheScsXG4gICAgICBpbXBhY3Q6ICdQcm9wZXIgZGVwZW5kZW5jeSBtYW5hZ2VtZW50IGFuZCBidWlsZCByZWxpYWJpbGl0eScsXG4gICAgICBjb3J0ZXNfYmVuZWZpdDogJ0NoYXJ0cywgQ2xvdWRLaXQsIFN0b3JlS2l0IDIgaW50ZWdyYXRpb24nXG4gICAgfSk7XG4gIH1cbiAgXG4gIC8vIFBvbGlzaCBpdGVtc1xuICBpZiAocHJvamVjdC5jb3J0ZXNfc3BlY2lmaWNfaW5zaWdodHM/LmRvY3VtZW50YXRpb25fcXVhbGl0eSA9PT0gJ21pbmltYWwnKSB7XG4gICAgYWN0aW9ucy5wdXNoKHtcbiAgICAgIHByaW9yaXR5OiAnbG93JyxcbiAgICAgIGNhdGVnb3J5OiAnZG9jdW1lbnRhdGlvbicsXG4gICAgICBhY3Rpb246ICdDcmVhdGUgY29tcHJlaGVuc2l2ZSBDb3J0ZXMgZG9jdW1lbnRhdGlvbicsXG4gICAgICB0aW1lZnJhbWU6ICcyLTMgZGF5cycsXG4gICAgICBpbXBhY3Q6ICdUZWFtIG9uYm9hcmRpbmcgYW5kIG1haW50ZW5hbmNlJyxcbiAgICAgIGNvcnRlc19iZW5lZml0OiAnRWFzaWVyIGZlYXR1cmUgZGV2ZWxvcG1lbnQgYW5kIHRlYW0gc2NhbGluZydcbiAgICB9KTtcbiAgfVxuICBcbiAgcmV0dXJuIGFjdGlvbnMuc2xpY2UoMCwgOCk7IC8vIFRvcCA4IHByaW9yaXRpZXNcbn1cblxuLy8gQ1JFQVRFIFVMVElNQVRFIENPUlRFUyBDT05URVhUXG5jb25zdCB1bHRpbWF0ZUNvcnRlc0NvbnRleHQgPSB7XG4gIG1ldGFkYXRhOiB7XG4gICAgcHJvamVjdE5hbWU6ICdDb3J0ZXMnLFxuICAgIGdlbmVyYXRlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHZlcnNpb246ICc5LjAuMC1jb3J0ZXMtcHJvZHVjdGlvbicsXG4gICAgY29udGV4dFR5cGU6ICdjb3J0ZXMtdWx0aW1hdGUtaW50ZWxsaWdlbmNlJyxcbiAgICBwcm9qZWN0X3BhdGg6IHByb2plY3RTdHJ1Y3R1cmUucHJvamVjdF9wYXRoIHx8ICcvZGF0YS9jb3J0ZXMnLFxuICAgIGNvcnRlc19hcHBfcGF0aDogcHJvamVjdFN0cnVjdHVyZS5jb3J0ZXNfYXBwX3BhdGggfHwgJy9kYXRhL2NvcnRlcy9Db3J0ZXMnLFxuICAgIGNvbnRleHRfcGF0aDogJy9kYXRhL2NvcnRlcy9jb3J0ZXMtY29udGV4dCcsXG4gICAgbWFjX2Rlc3RpbmF0aW9uOiAnL1VzZXJzL21vbGluZXNtYWMvRG9jdW1lbnRzL0NvcnRlcy9jb3J0ZXMtY29udGV4dCcsXG4gICAgcHJvamVjdF9zY2FuX3N1Y2Nlc3NmdWw6IHByb2plY3RTdHJ1Y3R1cmUuc2Nhbl9zdWNjZXNzZnVsIHx8IGZhbHNlLFxuICAgIGNvbnRhaW5lcl9pZDogcHJvY2Vzcy5lbnYuSE9TVE5BTUUgfHwgJ244bi1jb250YWluZXInLFxuICAgIHdvcmtmbG93X3ZlcnNpb246ICc5LjAuMC1wcm9kdWN0aW9uLXJlYWR5JyxcbiAgICBjYXBhYmlsaXRpZXM6IFtcbiAgICAgICdjb3J0ZXMtc3BlY2lmaWMtYW5hbHlzaXMnLFxuICAgICAgJ2lvcy1hcHAtb3B0aW1pemF0aW9uJyxcbiAgICAgICdtb25ldGl6YXRpb24tcmVhZGluZXNzJyxcbiAgICAgICdhcHAtc3RvcmUtcHJlcGFyYXRpb24nLFxuICAgICAgJ3BlcmZvcm1hbmNlLW9wdGltaXphdGlvbicsXG4gICAgICAndGVzdGluZy1zdHJhdGVneScsXG4gICAgICAnZGVwZW5kZW5jeS1tYW5hZ2VtZW50JyxcbiAgICAgICdidXNpbmVzcy1pbnRlbGxpZ2VuY2UnXG4gICAgXVxuICB9LFxuICBcbiAgY29ydGVzX3Byb2plY3RfaW50ZWxsaWdlbmNlOiB7XG4gICAgc2Nhbl9zdGF0dXM6IHByb2plY3RTdHJ1Y3R1cmUuc2Nhbl9zdWNjZXNzZnVsID8gJ3N1Y2Nlc3NmdWwnIDogJ2ZhaWxlZCcsXG4gICAgcHJvamVjdF9mb3VuZDogcHJvamVjdFN0cnVjdHVyZS5maWxlc19mb3VuZCB8fCBmYWxzZSxcbiAgICBhcmNoaXRlY3R1cmVfdHlwZTogcHJvamVjdFN0cnVjdHVyZS5wcm9qZWN0X3R5cGVfZGV0ZWN0ZWQgfHwgJ3Vua25vd24nLFxuICAgIGlvc19wcm9qZWN0X2RldGVjdGVkOiBwcm9qZWN0U3RydWN0dXJlLmNvcnRlc19zcGVjaWZpY19pbnNpZ2h0cz8uaW9zX3Byb2plY3QgfHwgZmFsc2UsXG4gICAgc3dpZnR1aV9pbXBsZW1lbnRhdGlvbjogcHJvamVjdFN0cnVjdHVyZS5jb3J0ZXNfc3BlY2lmaWNfaW5zaWdodHM/LnN3aWZ0dWlfZGV0ZWN0ZWQgfHwgZmFsc2UsXG4gICAgZmlsZV9tZXRyaWNzOiB7XG4gICAgICB0b3RhbF9maWxlczogcHJvamVjdFN0cnVjdHVyZS50b3RhbF9maWxlcyB8fCAwLFxuICAgICAgc3dpZnRfZmlsZXM6IHByb2plY3RTdHJ1Y3R1cmUuY2F0ZWdvcmllcz8uc3dpZnRfZmlsZXMgfHwgMCxcbiAgICAgIHhjb2RlX3Byb2plY3RzOiBwcm9qZWN0U3RydWN0dXJlLmNhdGVnb3JpZXM/Lnhjb2RlX3Byb2plY3RzIHx8IDAsXG4gICAgICBjb25maWdfZmlsZXM6IHByb2plY3RTdHJ1Y3R1cmUuY2F0ZWdvcmllcz8uY29uZmlnX2ZpbGVzIHx8IDAsXG4gICAgICBkb2N1bWVudGF0aW9uX2ZpbGVzOiBwcm9qZWN0U3RydWN0dXJlLmNhdGVnb3JpZXM/LmRvY3VtZW50YXRpb24gfHwgMFxuICAgIH0sXG4gICAgY29ydGVzX3N0cnVjdHVyZTogcHJvamVjdFN0cnVjdHVyZS5jb3J0ZXNfc3RydWN0dXJlIHx8IHt9LFxuICAgIGRvY3VtZW50YXRpb25fcXVhbGl0eTogcHJvamVjdFN0cnVjdHVyZS5jb3J0ZXNfc3BlY2lmaWNfaW5zaWdodHM/LmRvY3VtZW50YXRpb25fcXVhbGl0eSB8fCAndW5rbm93bidcbiAgfSxcbiAgXG4gIGNvcnRlc19kZXZlbG9wbWVudF9pbnRlbGxpZ2VuY2U6IHtcbiAgICBnaXRfcmVwb3NpdG9yeV9mb3VuZDogZ2l0SW50ZWxsaWdlbmNlLmdpdF9hdmFpbGFibGUgfHwgZmFsc2UsXG4gICAgZGV2ZWxvcG1lbnRfaGVhbHRoOiBnaXRJbnRlbGxpZ2VuY2UuaW5zaWdodHM/LmRldmVsb3BtZW50X2hlYWx0aCB8fCAndW5rbm93bicsXG4gICAgcHJvamVjdF9tb21lbnR1bTogZ2l0SW50ZWxsaWdlbmNlLmluc2lnaHRzPy5wcm9qZWN0X21vbWVudHVtIHx8ICd1bmtub3duJyxcbiAgICB0ZWFtX2NvbGxhYm9yYXRpb246IGdpdEludGVsbGlnZW5jZS5pbnNpZ2h0cz8udGVhbV9jb2xsYWJvcmF0aW9uIHx8ICd1bmtub3duJyxcbiAgICB2ZWxvY2l0eV9tZXRyaWNzOiB7XG4gICAgICBjb21taXRzX2xhc3RfMzBfZGF5czogZ2l0SW50ZWxsaWdlbmNlLmRldmVsb3BtZW50X3ZlbG9jaXR5Py5jb21taXRzXzMwX2RheXMgfHwgMCxcbiAgICAgIGNvbW1pdHNfbGFzdF8xNF9kYXlzOiBnaXRJbnRlbGxpZ2VuY2UuZGV2ZWxvcG1lbnRfdmVsb2NpdHk/LmNvbW1pdHNfMTRfZGF5cyB8fCAwLFxuICAgICAgYWN0aXZlX2RldmVsb3BlcnM6IGdpdEludGVsbGlnZW5jZS5kZXZlbG9wbWVudF92ZWxvY2l0eT8uYWN0aXZlX2RldmVsb3BlcnM/Lmxlbmd0aCB8fCAwLFxuICAgICAgZGV2ZWxvcG1lbnRfcGFjZTogZ2l0SW50ZWxsaWdlbmNlLmRldmVsb3BtZW50X3ZlbG9jaXR5Py5kZXZlbG9wbWVudF9wYWNlIHx8ICd1bmtub3duJ1xuICAgIH0sXG4gICAgY29ydGVzX2RldmVsb3BtZW50X2ZvY3VzOiBnaXRJbnRlbGxpZ2VuY2UuY29ydGVzX2RldmVsb3BtZW50X2luc2lnaHRzIHx8IHt9LFxuICAgIHJlZmFjdG9yX3ByaW9yaXRpZXM6IChnaXRJbnRlbGxpZ2VuY2UuaG90X3Nwb3RzPy5yZWZhY3Rvcl9jYW5kaWRhdGVzIHx8IFtdKS5zbGljZSgwLCA1KSxcbiAgICBjb3J0ZXNfY29tbWl0czogKGdpdEludGVsbGlnZW5jZS5jb21taXRfcGF0dGVybnM/LmNvcnRlc19zcGVjaWZpY19jb21taXRzIHx8IFtdKS5zbGljZSgwLCA4KVxuICB9LFxuICBcbiAgY29ydGVzX3Rlc3RpbmdfaW50ZWxsaWdlbmNlOiB7XG4gICAgc2Nhbl9zdGF0dXM6IHRlc3RpbmdJbnRlbGxpZ2VuY2Uuc2Nhbl9zdWNjZXNzZnVsID8gJ3N1Y2Nlc3NmdWwnIDogJ2ZhaWxlZCcsXG4gICAgdGVzdHNfZm91bmQ6IHRlc3RpbmdJbnRlbGxpZ2VuY2UudGVzdHNfZm91bmQgfHwgZmFsc2UsXG4gICAgdGVzdGluZ19tYXR1cml0eTogdGVzdGluZ0ludGVsbGlnZW5jZS5pbnNpZ2h0cz8udGVzdGluZ19tYXR1cml0eSB8fCAnbm9uZScsXG4gICAgZGVwbG95bWVudF9jb25maWRlbmNlOiB0ZXN0aW5nSW50ZWxsaWdlbmNlLmluc2lnaHRzPy5kZXBsb3ltZW50X2NvbmZpZGVuY2UgfHwgJ2xvdycsXG4gICAgdGVzdF9tZXRyaWNzOiB7XG4gICAgICB0b3RhbF90ZXN0X2ZpbGVzOiB0ZXN0aW5nSW50ZWxsaWdlbmNlLnRlc3RfY292ZXJhZ2U/LnRvdGFsX3Rlc3RfZmlsZXMgfHwgMCxcbiAgICAgIHN3aWZ0X3Rlc3RfZmlsZXM6IHRlc3RpbmdJbnRlbGxpZ2VuY2UudGVzdF9jb3ZlcmFnZT8uc3dpZnRfdGVzdF9maWxlcyB8fCAwLFxuICAgICAgdWlfdGVzdF9maWxlczogdGVzdGluZ0ludGVsbGlnZW5jZS50ZXN0X2NvdmVyYWdlPy51aV90ZXN0X2ZpbGVzIHx8IDAsXG4gICAgICB1bml0X3Rlc3RfZmlsZXM6IHRlc3RpbmdJbnRlbGxpZ2VuY2UudGVzdF9jb3ZlcmFnZT8udW5pdF90ZXN0X2ZpbGVzIHx8IDBcbiAgICB9LFxuICAgIGNvcnRlc190ZXN0X2NvdmVyYWdlOiB0ZXN0aW5nSW50ZWxsaWdlbmNlLmNvcnRlc190ZXN0X2luc2lnaHRzIHx8IHt9LFxuICAgIGNvcnRlc190ZXN0X3BhdHRlcm5zOiB0ZXN0aW5nSW50ZWxsaWdlbmNlLmNvcnRlc190ZXN0aW5nX3BhdHRlcm5zIHx8IHt9LFxuICAgIHRlc3RpbmdfZnJhbWV3b3JrczogdGVzdGluZ0ludGVsbGlnZW5jZS50ZXN0aW5nX2ZyYW1ld29ya3MgfHwge31cbiAgfSxcbiAgXG4gIGNvcnRlc19wZXJmb3JtYW5jZV9pbnRlbGxpZ2VuY2U6IHtcbiAgICBzY2FuX3N0YXR1czogcGVyZm9ybWFuY2VJbnRlbGxpZ2VuY2Uuc2Nhbl9zdWNjZXNzZnVsID8gJ3N1Y2Nlc3NmdWwnIDogJ2ZhaWxlZCcsXG4gICAgYXNzZXRzX2ZvdW5kOiBwZXJmb3JtYW5jZUludGVsbGlnZW5jZS5hc3NldHNfZm91bmQgfHwgZmFsc2UsXG4gICAgYXBwX3N0b3JlX3JlYWRpbmVzczogcGVyZm9ybWFuY2VJbnRlbGxpZ2VuY2UuY29ydGVzX3BlcmZvcm1hbmNlX21ldHJpY3M/LmFwcF9zdG9yZV9yZWFkaW5lc3MgfHwgJ3Vua25vd24nLFxuICAgIGlvc19vcHRpbWl6YXRpb25fc2NvcmU6IHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLmNvcnRlc19wZXJmb3JtYW5jZV9tZXRyaWNzPy5pb3Nfb3B0aW1pemF0aW9uX3Njb3JlIHx8IDAsXG4gICAgdXNlcl9leHBlcmllbmNlX3Njb3JlOiBwZXJmb3JtYW5jZUludGVsbGlnZW5jZS5jb3J0ZXNfcGVyZm9ybWFuY2VfbWV0cmljcz8udXNlcl9leHBlcmllbmNlX3Njb3JlIHx8IDAsXG4gICAgYXNzZXRfbWV0cmljczoge1xuICAgICAgdG90YWxfYXNzZXRzOiBwZXJmb3JtYW5jZUludGVsbGlnZW5jZS5hc3NldF9hbmFseXNpcz8udG90YWxfYXNzZXRzIHx8IDAsXG4gICAgICB0b3RhbF9zaXplX21iOiBNYXRoLnJvdW5kKChwZXJmb3JtYW5jZUludGVsbGlnZW5jZS5hc3NldF9hbmFseXNpcz8udG90YWxfYXNzZXRfc2l6ZV9rYiB8fCAwKSAvIDEwMjQgKiAxMDApIC8gMTAwLFxuICAgICAgbGFyZ2VfYXNzZXRzX2NvdW50OiAocGVyZm9ybWFuY2VJbnRlbGxpZ2VuY2UuYXNzZXRfYW5hbHlzaXM/LmxhcmdlX2Fzc2V0cyB8fCBbXSkubGVuZ3RoLFxuICAgICAgb3B0aW1pemF0aW9uX29wcG9ydHVuaXRpZXM6IChwZXJmb3JtYW5jZUludGVsbGlnZW5jZS5hc3NldF9hbmFseXNpcz8ub3B0aW1pemF0aW9uX29wcG9ydHVuaXRpZXMgfHwgW10pLmxlbmd0aFxuICAgIH0sXG4gICAgY29ydGVzX2Fzc2V0czogcGVyZm9ybWFuY2VJbnRlbGxpZ2VuY2UuYXNzZXRfYW5hbHlzaXM/LmNvcnRlc19zcGVjaWZpY19hc3NldHMgfHwge30sXG4gICAgb3B0aW1pemF0aW9uX3JlY29tbWVuZGF0aW9uczogcGVyZm9ybWFuY2VJbnRlbGxpZ2VuY2Uub3B0aW1pemF0aW9uX3JlY29tbWVuZGF0aW9ucyB8fCB7fSxcbiAgICBlc3RpbWF0ZWRfc2F2aW5nczogcGVyZm9ybWFuY2VJbnRlbGxpZ2VuY2Uub3B0aW1pemF0aW9uX3JlY29tbWVuZGF0aW9ucz8uZXN0aW1hdGVkX3NhdmluZ3MgfHwgJzBNQidcbiAgfSxcbiAgXG4gIGNvcnRlc19kZXBlbmRlbmN5X2ludGVsbGlnZW5jZToge1xuICAgIGRlcGVuZGVuY2llc19mb3VuZDogZGVwZW5kZW5jeUFuYWx5c2lzLnN3aWZ0X2Vjb3N5c3RlbT8ubWFuaWZlc3RfZm91bmQgfHwgZGVwZW5kZW5jeUFuYWx5c2lzLm5wbV9lY29zeXN0ZW0/Lm1hbmlmZXN0X2ZvdW5kIHx8IGZhbHNlLFxuICAgIGNyb3NzX3BsYXRmb3JtX2NvbXBsZXhpdHk6IGRlcGVuZGVuY3lBbmFseXNpcy5jcm9zc19wbGF0Zm9ybV9jb21wbGV4aXR5IHx8ICdtaW5pbWFsX2RlcGVuZGVuY2llcycsXG4gICAgZGVwZW5kZW5jeV9tZXRyaWNzOiB7XG4gICAgICBzd2lmdF9kZXBlbmRlbmNpZXM6IGRlcGVuZGVuY3lBbmFseXNpcy5zd2lmdF9lY29zeXN0ZW0/LmRlcGVuZGVuY2llc19jb3VudCB8fCAwLFxuICAgICAgbnBtX2RlcGVuZGVuY2llczogZGVwZW5kZW5jeUFuYWx5c2lzLm5wbV9lY29zeXN0ZW0/LmRlcGVuZGVuY2llc19jb3VudCB8fCAwLFxuICAgICAgdG90YWxfZGVwZW5kZW5jaWVzOiAoZGVwZW5kZW5jeUFuYWx5c2lzLnN3aWZ0X2Vjb3N5c3RlbT8uZGVwZW5kZW5jaWVzX2NvdW50IHx8IDApICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgKGRlcGVuZGVuY3lBbmFseXNpcy5ucG1fZWNvc3lzdGVtPy5kZXBlbmRlbmNpZXNfY291bnQgfHwgMClcbiAgICB9LFxuICAgIGNvcnRlc19pbnNpZ2h0czogZGVwZW5kZW5jeUFuYWx5c2lzLmNvcnRlc19kZXBlbmRlbmN5X2luc2lnaHRzIHx8IHt9LFxuICAgIHNlY3VyaXR5X2Fzc2Vzc21lbnQ6IGRlcGVuZGVuY3lBbmFseXNpcy5zZWN1cml0eV9hc3Nlc3NtZW50IHx8IHt9LFxuICAgIGNvcnRlc19yZWNvbW1lbmRhdGlvbnM6IGRlcGVuZGVuY3lBbmFseXNpcy5jb3J0ZXNfcmVjb21tZW5kYXRpb25zIHx8IFtdXG4gIH0sXG4gIFxuICBjb3J0ZXNfYnVzaW5lc3NfaW50ZWxsaWdlbmNlOiB7XG4gICAgbW9uZXRpemF0aW9uX3JlYWRpbmVzczogYXNzZXNzQ29ydGVzUmVhZGluZXNzKFxuICAgICAgcHJvamVjdFN0cnVjdHVyZSwgdGVzdGluZ0ludGVsbGlnZW5jZSwgcGVyZm9ybWFuY2VJbnRlbGxpZ2VuY2UsIGdpdEludGVsbGlnZW5jZSwgZGVwZW5kZW5jeUFuYWx5c2lzXG4gICAgKSxcbiAgICBtb25ldGl6YXRpb25fc2NvcmU6IGNhbGN1bGF0ZUNvcnRlc01vbmV0aXphdGlvblNjb3JlKFxuICAgICAgdGVzdGluZ0ludGVsbGlnZW5jZSwgcGVyZm9ybWFuY2VJbnRlbGxpZ2VuY2UsIGdpdEludGVsbGlnZW5jZSwgcHJvamVjdFN0cnVjdHVyZVxuICAgICksXG4gICAgbGF1bmNoX3JlYWRpbmVzc19jcml0ZXJpYToge1xuICAgICAgcHJvamVjdF9zdHJ1Y3R1cmU6IHByb2plY3RTdHJ1Y3R1cmUuc2Nhbl9zdWNjZXNzZnVsICYmIHByb2plY3RTdHJ1Y3R1cmUuZmlsZXNfZm91bmQsXG4gICAgICBpb3NfYXJjaGl0ZWN0dXJlOiBwcm9qZWN0U3RydWN0dXJlLmNvcnRlc19zcGVjaWZpY19pbnNpZ2h0cz8uaW9zX3Byb2plY3QgfHwgZmFsc2UsXG4gICAgICB0ZXN0aW5nX2NvdmVyYWdlOiAodGVzdGluZ0ludGVsbGlnZW5jZS50ZXN0X2NvdmVyYWdlPy50b3RhbF90ZXN0X2ZpbGVzIHx8IDApID4gOCxcbiAgICAgIHBlcmZvcm1hbmNlX29wdGltaXplZDogKHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLmNvcnRlc19wZXJmb3JtYW5jZV9tZXRyaWNzPy5pb3Nfb3B0aW1pemF0aW9uX3Njb3JlIHx8IDApID4gNzUsXG4gICAgICBhcHBfc3RvcmVfcmVhZHk6IHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLmNvcnRlc19wZXJmb3JtYW5jZV9tZXRyaWNzPy5hcHBfc3RvcmVfcmVhZGluZXNzID09PSAnZXhjZWxsZW50JyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtYW5jZUludGVsbGlnZW5jZS5jb3J0ZXNfcGVyZm9ybWFuY2VfbWV0cmljcz8uYXBwX3N0b3JlX3JlYWRpbmVzcyA9PT0gJ2dvb2QnXG4gICAgfSxcbiAgICByZXZlbnVlX3BvdGVudGlhbDoge1xuICAgICAgdGVjaG5pY2FsX2ZvdW5kYXRpb246IHByb2plY3RTdHJ1Y3R1cmUuc2Nhbl9zdWNjZXNzZnVsICYmIHByb2plY3RTdHJ1Y3R1cmUuZmlsZXNfZm91bmQgPyAnc29saWQnIDogJ25lZWRzX3dvcmsnLFxuICAgICAgdXNlcl9leHBlcmllbmNlX3F1YWxpdHk6IHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLmNvcnRlc19wZXJmb3JtYW5jZV9tZXRyaWNzPy51c2VyX2V4cGVyaWVuY2Vfc2NvcmUgPiA4MCA/ICdleGNlbGxlbnQnIDogJ25lZWRzX2ltcHJvdmVtZW50JyxcbiAgICAgIG1hcmtldF9yZWFkaW5lc3M6IHRlc3RpbmdJbnRlbGxpZ2VuY2UuaW5zaWdodHM/LmRlcGxveW1lbnRfY29uZmlkZW5jZSB8fCAnbG93J1xuICAgIH0sXG4gICAgY29tcGV0aXRpdmVfYWR2YW50YWdlczogW1xuICAgICAgcHJvamVjdFN0cnVjdHVyZS5jb3J0ZXNfc3BlY2lmaWNfaW5zaWdodHM/LnN3aWZ0dWlfZGV0ZWN0ZWQgPyAnTW9kZXJuIFN3aWZ0VUkgaW1wbGVtZW50YXRpb24nIDogbnVsbCxcbiAgICAgIHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLmNvcnRlc19wZXJmb3JtYW5jZV9tZXRyaWNzPy5pb3Nfb3B0aW1pemF0aW9uX3Njb3JlID4gODUgPyAnT3B0aW1pemVkIHBlcmZvcm1hbmNlJyA6IG51bGwsXG4gICAgICB0ZXN0aW5nSW50ZWxsaWdlbmNlLnRlc3RfY292ZXJhZ2U/LnRvdGFsX3Rlc3RfZmlsZXMgPiAxNSA/ICdDb21wcmVoZW5zaXZlIHRlc3RpbmcnIDogbnVsbCxcbiAgICAgIGdpdEludGVsbGlnZW5jZS5pbnNpZ2h0cz8ucHJvamVjdF9tb21lbnR1bSA9PT0gJ2FjdGl2ZScgPyAnQWN0aXZlIGRldmVsb3BtZW50JyA6IG51bGxcbiAgICBdLmZpbHRlcihCb29sZWFuKVxuICB9LFxuICBcbiAgY29ydGVzX2FjdGlvbl9wbGFuOiB7XG4gICAgaW1tZWRpYXRlX3ByaW9yaXRpZXM6IGdlbmVyYXRlQ29ydGVzQWN0aW9uUGxhbihcbiAgICAgIHByb2plY3RTdHJ1Y3R1cmUsIGdpdEludGVsbGlnZW5jZSwgdGVzdGluZ0ludGVsbGlnZW5jZSwgcGVyZm9ybWFuY2VJbnRlbGxpZ2VuY2UsIGRlcGVuZGVuY3lBbmFseXNpc1xuICAgICksXG4gICAgZGV2ZWxvcG1lbnRfcm9hZG1hcDoge1xuICAgICAgcGhhc2VfMTogJ0NvcmUgaW5mcmFzdHJ1Y3R1cmUgYW5kIHRlc3Rpbmcgc2V0dXAnLFxuICAgICAgcGhhc2VfMjogJ1BlcmZvcm1hbmNlIG9wdGltaXphdGlvbiBhbmQgVUkgcG9saXNoJyxcbiAgICAgIHBoYXNlXzM6ICdBcHAgU3RvcmUgcHJlcGFyYXRpb24gYW5kIGxhdW5jaCcsXG4gICAgICBwaGFzZV80OiAnUG9zdC1sYXVuY2ggb3B0aW1pemF0aW9uIGFuZCBzY2FsaW5nJ1xuICAgIH0sXG4gICAgZXN0aW1hdGVkX3RpbWVsaW5lOiB7XG4gICAgICB0b19tdnA6ICcyLTMgd2Vla3MnLFxuICAgICAgdG9fYXBwX3N0b3JlOiAnNC02IHdlZWtzJyxcbiAgICAgIHRvX21vbmV0aXphdGlvbjogJzYtOCB3ZWVrcydcbiAgICB9LFxuICAgIHN1Y2Nlc3NfbWV0cmljczoge1xuICAgICAgdGVjaG5pY2FsX2RlYnRfc2NvcmU6IGdpdEludGVsbGlnZW5jZS5ob3Rfc3BvdHM/LnJlZmFjdG9yX2NhbmRpZGF0ZXM/Lmxlbmd0aCA8IDMgPyAnbG93JyA6ICdtb2RlcmF0ZScsXG4gICAgICBkZXBsb3ltZW50X2NvbmZpZGVuY2U6IHRlc3RpbmdJbnRlbGxpZ2VuY2UuaW5zaWdodHM/LmRlcGxveW1lbnRfY29uZmlkZW5jZSB8fCAnbG93JyxcbiAgICAgIHBlcmZvcm1hbmNlX3Njb3JlOiBwZXJmb3JtYW5jZUludGVsbGlnZW5jZS5jb3J0ZXNfcGVyZm9ybWFuY2VfbWV0cmljcz8uaW9zX29wdGltaXphdGlvbl9zY29yZSB8fCAwLFxuICAgICAgYnVzaW5lc3NfcmVhZGluZXNzOiBhc3Nlc3NDb3J0ZXNSZWFkaW5lc3MoXG4gICAgICAgIHByb2plY3RTdHJ1Y3R1cmUsIHRlc3RpbmdJbnRlbGxpZ2VuY2UsIHBlcmZvcm1hbmNlSW50ZWxsaWdlbmNlLCBnaXRJbnRlbGxpZ2VuY2UsIGRlcGVuZGVuY3lBbmFseXNpc1xuICAgICAgKVxuICAgIH1cbiAgfSxcbiAgXG4gIGNsYXVkZV9pbnRlZ3JhdGlvbjoge1xuICAgIGNvbnRleHRfb3B0aW1pemVkX2Zvcl9jbGF1ZGU6IHRydWUsXG4gICAgY2xhdWRlX2Nhbl9oZWxwX3dpdGg6IFtcbiAgICAgICdTd2lmdC9Td2lmdFVJIGRldmVsb3BtZW50IGFuZCBkZWJ1Z2dpbmcnLFxuICAgICAgJ2lPUyBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24nLFxuICAgICAgJ1Rlc3QgZGV2ZWxvcG1lbnQgYW5kIGNvdmVyYWdlIGltcHJvdmVtZW50JyxcbiAgICAgICdBcmNoaXRlY3R1cmUgcmVjb21tZW5kYXRpb25zJyxcbiAgICAgICdBcHAgU3RvcmUgb3B0aW1pemF0aW9uIHN0cmF0ZWdpZXMnLFxuICAgICAgJ0J1c2luZXNzIGxvZ2ljIGltcGxlbWVudGF0aW9uJyxcbiAgICAgICdDb2RlIHJlZmFjdG9yaW5nIGFuZCBjbGVhbnVwJyxcbiAgICAgICdEZXBlbmRlbmN5IG1hbmFnZW1lbnQnLFxuICAgICAgJ0NJL0NEIHBpcGVsaW5lIHNldHVwJyxcbiAgICAgICdNb25ldGl6YXRpb24gc3RyYXRlZ3kgaW1wbGVtZW50YXRpb24nXG4gICAgXSxcbiAgICByZWNvbW1lbmRlZF9jbGF1ZGVfd29ya2Zsb3dzOiBbXG4gICAgICAnQ29kZSByZXZpZXcgYW5kIG9wdGltaXphdGlvbicsXG4gICAgICAnVGVzdCBjYXNlIGdlbmVyYXRpb24nLFxuICAgICAgJ0RvY3VtZW50YXRpb24gY3JlYXRpb24nLFxuICAgICAgJ0J1ZyBmaXhpbmcgYW5kIGRlYnVnZ2luZycsXG4gICAgICAnRmVhdHVyZSBkZXZlbG9wbWVudCBndWlkYW5jZScsXG4gICAgICAnUGVyZm9ybWFuY2UgYm90dGxlbmVjayBpZGVudGlmaWNhdGlvbicsXG4gICAgICAnQXJjaGl0ZWN0dXJlIGltcHJvdmVtZW50IHN1Z2dlc3Rpb25zJ1xuICAgIF0sXG4gICAgY29udGV4dF9yZWZyZXNoX3JlY29tbWVuZGVkOiAnd2Vla2x5X2R1cmluZ19hY3RpdmVfZGV2ZWxvcG1lbnQnXG4gIH1cbn07XG5cbmNvbnNvbGUubG9nKCfwn46vIFVMVElNQVRFIENPUlRFUyBDT05URVhUIENPTVBMRVRFRCcsIHtcbiAgbW9uZXRpemF0aW9uX3JlYWRpbmVzczogdWx0aW1hdGVDb3J0ZXNDb250ZXh0LmNvcnRlc19idXNpbmVzc19pbnRlbGxpZ2VuY2UubW9uZXRpemF0aW9uX3JlYWRpbmVzcyxcbiAgZmlsZXNfZGV0ZWN0ZWQ6IHVsdGltYXRlQ29ydGVzQ29udGV4dC5jb3J0ZXNfcHJvamVjdF9pbnRlbGxpZ2VuY2UuZmlsZV9tZXRyaWNzLnRvdGFsX2ZpbGVzLFxuICBpb3Nfb3B0aW1pemF0aW9uX3Njb3JlOiB1bHRpbWF0ZUNvcnRlc0NvbnRleHQuY29ydGVzX3BlcmZvcm1hbmNlX2ludGVsbGlnZW5jZS5pb3Nfb3B0aW1pemF0aW9uX3Njb3JlLFxuICBkZXBsb3ltZW50X2NvbmZpZGVuY2U6IHVsdGltYXRlQ29ydGVzQ29udGV4dC5jb3J0ZXNfdGVzdGluZ19pbnRlbGxpZ2VuY2UuZGVwbG95bWVudF9jb25maWRlbmNlXG59KTtcblxucmV0dXJuIFt7IGpzb246IHVsdGltYXRlQ29ydGVzQ29udGV4dCB9XTsiCiAgICAgIH0sCiAgICAgICJuYW1lIjogIkNyZWF0ZSBVbHRpbWF0ZSBDb3J0ZXMgQ29udGV4dCIsCiAgICAgICJ0eXBlIjogIm44bi1ub2Rlcy1iYXNlLmZ1bmN0aW9uIiwKICAgICAgInR5cGVWZXJzaW9uIjogMSwKICAgICAgInBvc2l0aW9uIjogWwogICAgICAgIDg0MCwKICAgICAgICAtNjQwCiAgICAgIF0sCiAgICAgICJpZCI6ICJmZmUwOWZhMy1jZjI0LTRiNDItYWMwZi1mMTkzNDVlYTVmMjMiCiAgICB9LAogICAgewogICAgICAicGFyYW1ldGVycyI6IHsKICAgICAgICAiY29tbWFuZCI6ICIjIS9iaW4vYmFzaFxuZWNobyAn8J+TgSBTYXZpbmcgdWx0aW1hdGUtY29ydGVzLWNvbnRleHQuLi4nXG5ta2RpciAtcCAvZGF0YS9jb3J0ZXMvY29ydGVzLWNvbnRleHRcbmNkIC9kYXRhL2NvcnRlcy9jb3J0ZXMtY29udGV4dFxuVElNRVNUQU1QPSQoZGF0ZSArJyVkLSVtLSVZXyVILSVNLSVTJykgICMgQ2FtYmnDqSA6IHBvciAtIHBhcmEgZXZpdGFyIHByb2JsZW1hcyBkZSBmaWxlc3lzdGVtXG5lY2hvIFwiJENPTlRFWFRfSlNPTlwiID4gXCJ1bHRpbWF0ZS1jb3J0ZXMtY29udGV4dF8ke1RJTUVTVEFNUH0uanNvblwiXG5lY2hvIFwi4pyFIENvbnRleHQgc2F2ZWQgYXMgdWx0aW1hdGUtY29ydGVzLWNvbnRleHRfJHtUSU1FU1RBTVB9Lmpzb25cIlxubHMgLWxhIFwidWx0aW1hdGUtY29ydGVzLWNvbnRleHRfJHtUSU1FU1RBTVB9Lmpzb25cIiIKICAgICAgfSwKICAgICAgIm5hbWUiOiAiU2F2ZSBVbHRpbWF0ZSBDb250ZXh0IiwKICAgICAgInR5cGUiOiAibjhuLW5vZGVzLWJhc2UuZXhlY3V0ZUNvbW1hbmQiLAogICAgICAidHlwZVZlcnNpb24iOiAxLAogICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgMTA2MCwKICAgICAgICAtODQwCiAgICAgIF0sCiAgICAgICJpZCI6ICI4NmQ4ZmYwYS02N2ExLTQ4MWItOGU3YS1hNGQ2MzdhMTYyYjAiCiAgICB9LAogICAgewogICAgICAicGFyYW1ldGVycyI6IHsKICAgICAgICAiY29tbWFuZCI6ICJlY2hvICfwn5OBIFNhdmluZyBjbGF1ZGUtY29ydGVzLWNvbnRleHQgd2l0aCB0aW1lc3RhbXAuLi4nICYmIG1rZGlyIC1wIC9kYXRhL2NvcnRlcy9jb3J0ZXMtY29udGV4dCAmJiBjZCAvZGF0YS9jb3J0ZXMvY29ydGVzLWNvbnRleHQgJiYgVElNRVNUQU1QPSQoZGF0ZSArJyVkLSVtLSVZXyVIOiVNOiVTJykgJiYgY2F0ID4gY2xhdWRlLWNvcnRlcy1jb250ZXh0XyRUSU1FU1RBTVAuanNvbiA8PCAnQ0xBVURFX0VPRidcbntcbiAgXCJwcm9qZWN0X292ZXJ2aWV3XCI6IHtcbiAgICBcIm5hbWVcIjogXCJ7eyAkanNvbi5tZXRhZGF0YS5wcm9qZWN0TmFtZSB9fVwiLFxuICAgIFwidHlwZVwiOiBcInt7ICRqc29uLmNvcnRlc19wcm9qZWN0X2ludGVsbGlnZW5jZS5hcmNoaXRlY3R1cmVfdHlwZSB9fVwiLFxuICAgIFwiaW9zX3Byb2plY3RcIjoge3sgJGpzb24uY29ydGVzX3Byb2plY3RfaW50ZWxsaWdlbmNlLmlvc19wcm9qZWN0X2RldGVjdGVkIH19LFxuICAgIFwic3dpZnR1aV9kZXRlY3RlZFwiOiB7eyAkanNvbi5jb3J0ZXNfcHJvamVjdF9pbnRlbGxpZ2VuY2Uuc3dpZnR1aV9pbXBsZW1lbnRhdGlvbiB9fSxcbiAgICBcInNjYW5fc3VjY2Vzc2Z1bFwiOiB7eyAkanNvbi5jb3J0ZXNfcHJvamVjdF9pbnRlbGxpZ2VuY2Uuc2Nhbl9zdGF0dXMgPT09ICdzdWNjZXNzZnVsJyB9fSxcbiAgICBcIm1vbmV0aXphdGlvbl9yZWFkaW5lc3NcIjogXCJ7eyAkanNvbi5jb3J0ZXNfYnVzaW5lc3NfaW50ZWxsaWdlbmNlLm1vbmV0aXphdGlvbl9yZWFkaW5lc3MgfX1cIixcbiAgICBcImFwcF9zdG9yZV9yZWFkaW5lc3NcIjogXCJ7eyAkanNvbi5jb3J0ZXNfcGVyZm9ybWFuY2VfaW50ZWxsaWdlbmNlLmFwcF9zdG9yZV9yZWFkaW5lc3MgfX1cIixcbiAgICBcImxhc3RfYW5hbHlzaXNcIjogXCJ7eyAkanNvbi5tZXRhZGF0YS5nZW5lcmF0ZWQgfX1cIlxuICB9LFxuICBcImtleV9tZXRyaWNzXCI6IHtcbiAgICBcInRvdGFsX2ZpbGVzXCI6IHt7ICRqc29uLmNvcnRlc19wcm9qZWN0X2ludGVsbGlnZW5jZS5maWxlX21ldHJpY3MudG90YWxfZmlsZXMgfX0sXG4gICAgXCJzd2lmdF9maWxlc1wiOiB7eyAkanNvbi5jb3J0ZXNfcHJvamVjdF9pbnRlbGxpZ2VuY2UuZmlsZV9tZXRyaWNzLnN3aWZ0X2ZpbGVzIH19LFxuICAgIFwidGVzdF9maWxlc1wiOiB7eyAkanNvbi5jb3J0ZXNfdGVzdGluZ19pbnRlbGxpZ2VuY2UudGVzdF9tZXRyaWNzLnRvdGFsX3Rlc3RfZmlsZXMgfX0sXG4gICAgXCJpb3Nfb3B0aW1pemF0aW9uX3Njb3JlXCI6IHt7ICRqc29uLmNvcnRlc19wZXJmb3JtYW5jZV9pbnRlbGxpZ2VuY2UuaW9zX29wdGltaXphdGlvbl9zY29yZSB9fSxcbiAgICBcIm1vbmV0aXphdGlvbl9zY29yZVwiOiB7eyAkanNvbi5jb3J0ZXNfYnVzaW5lc3NfaW50ZWxsaWdlbmNlLm1vbmV0aXphdGlvbl9zY29yZSB9fSxcbiAgICBcInRvdGFsX2Fzc2V0c1wiOiB7eyAkanNvbi5jb3J0ZXNfcGVyZm9ybWFuY2VfaW50ZWxsaWdlbmNlLmFzc2V0X21ldHJpY3MudG90YWxfYXNzZXRzIH19LFxuICAgIFwidG90YWxfZGVwZW5kZW5jaWVzXCI6IHt7ICRqc29uLmNvcnRlc19kZXBlbmRlbmN5X2ludGVsbGlnZW5jZS5kZXBlbmRlbmN5X21ldHJpY3MudG90YWxfZGVwZW5kZW5jaWVzIH19XG4gIH0sXG4gIFwiZGV2ZWxvcG1lbnRfaW50ZWxsaWdlbmNlXCI6IHtcbiAgICBcImdpdF9hdmFpbGFibGVcIjoge3sgJGpzb24uY29ydGVzX2RldmVsb3BtZW50X2ludGVsbGlnZW5jZS5naXRfcmVwb3NpdG9yeV9mb3VuZCB9fSxcbiAgICBcImNvbW1pdHNfbGFzdF8zMF9kYXlzXCI6IHt7ICRqc29uLmNvcnRlc19kZXZlbG9wbWVudF9pbnRlbGxpZ2VuY2UudmVsb2NpdHlfbWV0cmljcy5jb21taXRzX2xhc3RfMzBfZGF5cyB9fSxcbiAgICBcImRldmVsb3BtZW50X3BhY2VcIjogXCJ7eyAkanNvbi5jb3J0ZXNfZGV2ZWxvcG1lbnRfaW50ZWxsaWdlbmNlLnZlbG9jaXR5X21ldHJpY3MuZGV2ZWxvcG1lbnRfcGFjZSB9fVwiLFxuICAgIFwicHJvamVjdF9tb21lbnR1bVwiOiBcInt7ICRqc29uLmNvcnRlc19kZXZlbG9wbWVudF9pbnRlbGxpZ2VuY2UucHJvamVjdF9tb21lbnR1bSB9fVwiLFxuICAgIFwidGVhbV9zaXplXCI6IHt7ICRqc29uLmNvcnRlc19kZXZlbG9wbWVudF9pbnRlbGxpZ2VuY2UudmVsb2NpdHlfbWV0cmljcy5hY3RpdmVfZGV2ZWxvcGVycyB9fVxuICB9LFxuICBcInRlc3RpbmdfaW50ZWxsaWdlbmNlXCI6IHtcbiAgICBcInRlc3RpbmdfbWF0dXJpdHlcIjogXCJ7eyAkanNvbi5jb3J0ZXNfdGVzdGluZ19pbnRlbGxpZ2VuY2UudGVzdGluZ19tYXR1cml0eSB9fVwiLFxuICAgIFwiZGVwbG95bWVudF9jb25maWRlbmNlXCI6IFwie3sgJGpzb24uY29ydGVzX3Rlc3RpbmdfaW50ZWxsaWdlbmNlLmRlcGxveW1lbnRfY29uZmlkZW5jZSB9fVwiLFxuICAgIFwiY2xpZW50X3Rlc3RfY292ZXJhZ2VcIjogXCJ7eyAkanNvbi5jb3J0ZXNfdGVzdGluZ19pbnRlbGxpZ2VuY2UuY29ydGVzX3Rlc3RfY292ZXJhZ2UuY2xpZW50X21hbmFnZW1lbnRfY292ZXJhZ2UgfHwgJ3Vua25vd24nIH19XCIsXG4gICAgXCJzZXNzaW9uX3Rlc3RfY292ZXJhZ2VcIjogXCJ7eyAkanNvbi5jb3J0ZXNfdGVzdGluZ19pbnRlbGxpZ2VuY2UuY29ydGVzX3Rlc3RfY292ZXJhZ2Uuc2Vzc2lvbl9tYW5hZ2VtZW50X2NvdmVyYWdlIHx8ICd1bmtub3duJyB9fVwiLFxuICAgIFwiYW5hbHl0aWNzX3Rlc3RfY292ZXJhZ2VcIjogXCJ7eyAkanNvbi5jb3J0ZXNfdGVzdGluZ19pbnRlbGxpZ2VuY2UuY29ydGVzX3Rlc3RfY292ZXJhZ2UuYW5hbHl0aWNzX2NvdmVyYWdlIHx8ICd1bmtub3duJyB9fVwiXG4gIH0sXG4gIFwicGVyZm9ybWFuY2VfaW50ZWxsaWdlbmNlXCI6IHtcbiAgICBcInVzZXJfZXhwZXJpZW5jZV9zY29yZVwiOiB7eyAkanNvbi5jb3J0ZXNfcGVyZm9ybWFuY2VfaW50ZWxsaWdlbmNlLnVzZXJfZXhwZXJpZW5jZV9zY29yZSB9fSxcbiAgICBcInRvdGFsX2Fzc2V0X3NpemVfbWJcIjoge3sgJGpzb24uY29ydGVzX3BlcmZvcm1hbmNlX2ludGVsbGlnZW5jZS5hc3NldF9tZXRyaWNzLnRvdGFsX3NpemVfbWIgfX0sXG4gICAgXCJsYXJnZV9hc3NldHNfY291bnRcIjoge3sgJGpzb24uY29ydGVzX3BlcmZvcm1hbmNlX2ludGVsbGlnZW5jZS5hc3NldF9tZXRyaWNzLmxhcmdlX2Fzc2V0c19jb3VudCB9fSxcbiAgICBcImVzdGltYXRlZF9zYXZpbmdzXCI6IFwie3sgJGpzb24uY29ydGVzX3BlcmZvcm1hbmNlX2ludGVsbGlnZW5jZS5lc3RpbWF0ZWRfc2F2aW5ncyB9fVwiXG4gIH0sXG4gIFwiZ2l0aHViX2ludGVncmF0aW9uXCI6IHtcbiAgICBcInJlcG9zaXRvcnlcIjogXCJNb0xpbmVzR2l0SHViL0NvcnRlc1wiLFxuICAgIFwidXJsXCI6IFwiaHR0cHM6Ly9naXRodWIuY29tL01vTGluZXNHaXRIdWIvQ29ydGVzXCIsXG4gICAgXCJpbnRlZ3JhdGlvbl9yZWFkeVwiOiB0cnVlXG4gIH0sXG4gIFwiY2xhdWRlX2Nhbl9oZWxwX3dpdGhcIjogW1xuICAgIFwiU3dpZnQvU3dpZnRVSSBkZXZlbG9wbWVudCBhbmQgZGVidWdnaW5nXCIsXG4gICAgXCJpT1MgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uXCIsIFxuICAgIFwiVGVzdCBkZXZlbG9wbWVudCBhbmQgY292ZXJhZ2UgaW1wcm92ZW1lbnRcIixcbiAgICBcIkdpdEh1YiB3b3JrZmxvdyBzZXR1cFwiLFxuICAgIFwiQ29kZSByZXZpZXcgYW5kIG9wdGltaXphdGlvblwiLFxuICAgIFwiQXBwIFN0b3JlIHByZXBhcmF0aW9uXCJcbiAgXSxcbiAgXCJlc3RpbWF0ZWRfdGltZWxpbmVcIjoge1xuICAgIFwidG9fbXZwXCI6IFwie3sgJGpzb24uY29ydGVzX2FjdGlvbl9wbGFuLmVzdGltYXRlZF90aW1lbGluZS50b19tdnAgfHwgJzItMyB3ZWVrcycgfX1cIixcbiAgICBcInRvX2FwcF9zdG9yZVwiOiBcInt7ICRqc29uLmNvcnRlc19hY3Rpb25fcGxhbi5lc3RpbWF0ZWRfdGltZWxpbmUudG9fYXBwX3N0b3JlIHx8ICc0LTYgd2Vla3MnIH19XCIsXG4gICAgXCJ0b19tb25ldGl6YXRpb25cIjogXCJ7eyAkanNvbi5jb3J0ZXNfYWN0aW9uX3BsYW4uZXN0aW1hdGVkX3RpbWVsaW5lLnRvX21vbmV0aXphdGlvbiB8fCAnNi04IHdlZWtzJyB9fVwiXG4gIH1cbn1cbkNMQVVERV9FT0ZcbmVjaG8gXCLinIUgY2xhdWRlLWNvcnRlcy1jb250ZXh0XyRUSU1FU1RBTVAuanNvbiBzYXZlZFwiICYmIGxzIC1sYSBjbGF1ZGUtY29ydGVzLWNvbnRleHRfJFRJTUVTVEFNUC5qc29uICYmIGVjaG8gXCJGaWxlIHNpemU6ICQod2MgLWMgPCBjbGF1ZGUtY29ydGVzLWNvbnRleHRfJFRJTUVTVEFNUC5qc29uKSBieXRlc1wiIgogICAgICB9LAogICAgICAibmFtZSI6ICJTYXZlIENsYXVkZSBDb250ZXh0IiwKICAgICAgInR5cGUiOiAibjhuLW5vZGVzLWJhc2UuZXhlY3V0ZUNvbW1hbmQiLAogICAgICAidHlwZVZlcnNpb24iOiAxLAogICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgMTA2MCwKICAgICAgICAtNjQwCiAgICAgIF0sCiAgICAgICJpZCI6ICJiZjQ0ZDQxOC0yYjUxLTRmZGItODNkZS1iNWUxNzRkMTU5Y2MiCiAgICB9LAogICAgewogICAgICAicGFyYW1ldGVycyI6IHsKICAgICAgICAiY29tbWFuZCI6ICJlY2hvICfwn5OBIFNhdmluZyBleGVjdXRpdmUtY29ydGVzLWRhc2hib2FyZCB3aXRoIHRpbWVzdGFtcC4uLicgJiYgbWtkaXIgLXAgL2RhdGEvY29ydGVzL2NvcnRlcy1jb250ZXh0ICYmIGNkIC9kYXRhL2NvcnRlcy9jb3J0ZXMtY29udGV4dCAmJiBUSU1FU1RBTVA9JChkYXRlICsnJWQtJW0tJVlfJUg6JU06JVMnKSAmJiBjYXQgPiBleGVjdXRpdmUtY29ydGVzLWRhc2hib2FyZF8kVElNRVNUQU1QLmpzb24gPDwgJ0RBU0hCT0FSRF9FT0YnXG57XG4gIFwiZ2VuZXJhdGVkXCI6IFwie3sgJGpzb24ubWV0YWRhdGEuZ2VuZXJhdGVkIH19XCIsXG4gIFwicHJvamVjdFwiOiBcInt7ICRqc29uLm1ldGFkYXRhLnByb2plY3ROYW1lIH19XCIsXG4gIFwidmVyc2lvblwiOiBcInt7ICRqc29uLm1ldGFkYXRhLnZlcnNpb24gfX1cIixcbiAgXCJjb250YWluZXJfaWRcIjogXCJ7eyAkanNvbi5tZXRhZGF0YS5jb250YWluZXJfaWQgfX1cIixcbiAgXCJwYXRoc1wiOiB7XG4gICAgXCJwcm9qZWN0X3BhdGhcIjogXCJ7eyAkanNvbi5tZXRhZGF0YS5wcm9qZWN0X3BhdGggfX1cIixcbiAgICBcImNvbnRleHRfcGF0aFwiOiBcInt7ICRqc29uLm1ldGFkYXRhLmNvbnRleHRfcGF0aCB9fVwiLFxuICAgIFwibWFjX2Rlc3RpbmF0aW9uXCI6IFwie3sgJGpzb24ubWV0YWRhdGEubWFjX2Rlc3RpbmF0aW9uIH19XCJcbiAgfSxcbiAgXCJleGVjdXRpdmVfc3VtbWFyeVwiOiB7XG4gICAgXCJtb25ldGl6YXRpb25fcmVhZGluZXNzXCI6IFwie3sgJGpzb24uY29ydGVzX2J1c2luZXNzX2ludGVsbGlnZW5jZS5tb25ldGl6YXRpb25fcmVhZGluZXNzIH19XCIsXG4gICAgXCJtb25ldGl6YXRpb25fc2NvcmVcIjoge3sgJGpzb24uY29ydGVzX2J1c2luZXNzX2ludGVsbGlnZW5jZS5tb25ldGl6YXRpb25fc2NvcmUgfX0sXG4gICAgXCJhcHBfc3RvcmVfcmVhZGluZXNzXCI6IFwie3sgJGpzb24uY29ydGVzX3BlcmZvcm1hbmNlX2ludGVsbGlnZW5jZS5hcHBfc3RvcmVfcmVhZGluZXNzIH19XCIsXG4gICAgXCJkZXBsb3ltZW50X2NvbmZpZGVuY2VcIjogXCJ7eyAkanNvbi5jb3J0ZXNfdGVzdGluZ19pbnRlbGxpZ2VuY2UuZGVwbG95bWVudF9jb25maWRlbmNlIH19XCIsXG4gICAgXCJpb3Nfb3B0aW1pemF0aW9uX3Njb3JlXCI6IHt7ICRqc29uLmNvcnRlc19wZXJmb3JtYW5jZV9pbnRlbGxpZ2VuY2UuaW9zX29wdGltaXphdGlvbl9zY29yZSB9fSxcbiAgICBcImRldmVsb3BtZW50X3BhY2VcIjogXCJ7eyAkanNvbi5jb3J0ZXNfZGV2ZWxvcG1lbnRfaW50ZWxsaWdlbmNlLnZlbG9jaXR5X21ldHJpY3MuZGV2ZWxvcG1lbnRfcGFjZSB9fVwiXG4gIH0sXG4gIFwidGVjaG5pY2FsX21ldHJpY3NcIjoge1xuICAgIFwidG90YWxfZmlsZXNcIjoge3sgJGpzb24uY29ydGVzX3Byb2plY3RfaW50ZWxsaWdlbmNlLmZpbGVfbWV0cmljcy50b3RhbF9maWxlcyB9fSxcbiAgICBcInN3aWZ0X2ZpbGVzXCI6IHt7ICRqc29uLmNvcnRlc19wcm9qZWN0X2ludGVsbGlnZW5jZS5maWxlX21ldHJpY3Muc3dpZnRfZmlsZXMgfX0sXG4gICAgXCJ0ZXN0X2ZpbGVzXCI6IHt7ICRqc29uLmNvcnRlc190ZXN0aW5nX2ludGVsbGlnZW5jZS50ZXN0X21ldHJpY3MudG90YWxfdGVzdF9maWxlcyB9fSxcbiAgICBcInRvdGFsX2Fzc2V0c1wiOiB7eyAkanNvbi5jb3J0ZXNfcGVyZm9ybWFuY2VfaW50ZWxsaWdlbmNlLmFzc2V0X21ldHJpY3MudG90YWxfYXNzZXRzIH19LFxuICAgIFwidG90YWxfZGVwZW5kZW5jaWVzXCI6IHt7ICRqc29uLmNvcnRlc19kZXBlbmRlbmN5X2ludGVsbGlnZW5jZS5kZXBlbmRlbmN5X21ldHJpY3MudG90YWxfZGVwZW5kZW5jaWVzIH19LFxuICAgIFwiY29tbWl0c19sYXN0XzMwX2RheXNcIjoge3sgJGpzb24uY29ydGVzX2RldmVsb3BtZW50X2ludGVsbGlnZW5jZS52ZWxvY2l0eV9tZXRyaWNzLmNvbW1pdHNfbGFzdF8zMF9kYXlzIH19XG4gIH0sXG4gIFwiZ2l0aHViX2luZm9cIjoge1xuICAgIFwicmVwb3NpdG9yeVwiOiBcIk1vTGluZXNHaXRIdWIvQ29ydGVzXCIsXG4gICAgXCJvd25lclwiOiBcIk1vTGluZXNHaXRIdWJcIixcbiAgICBcInVybFwiOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9Nb0xpbmVzR2l0SHViL0NvcnRlc1wiLFxuICAgIFwidG9rZW5fY29uZmlndXJlZFwiOiB0cnVlXG4gIH0sXG4gIFwibGF1bmNoX3JlYWRpbmVzc19jcml0ZXJpYVwiOiB7XG4gICAgXCJwcm9qZWN0X3N0cnVjdHVyZVwiOiB7eyAkanNvbi5jb3J0ZXNfYnVzaW5lc3NfaW50ZWxsaWdlbmNlLmxhdW5jaF9yZWFkaW5lc3NfY3JpdGVyaWEucHJvamVjdF9zdHJ1Y3R1cmUgfX0sXG4gICAgXCJpb3NfYXJjaGl0ZWN0dXJlXCI6IHt7ICRqc29uLmNvcnRlc19idXNpbmVzc19pbnRlbGxpZ2VuY2UubGF1bmNoX3JlYWRpbmVzc19jcml0ZXJpYS5pb3NfYXJjaGl0ZWN0dXJlIH19LFxuICAgIFwidGVzdGluZ19jb3ZlcmFnZVwiOiB7eyAkanNvbi5jb3J0ZXNfYnVzaW5lc3NfaW50ZWxsaWdlbmNlLmxhdW5jaF9yZWFkaW5lc3NfY3JpdGVyaWEudGVzdGluZ19jb3ZlcmFnZSB9fSxcbiAgICBcInBlcmZvcm1hbmNlX29wdGltaXplZFwiOiB7eyAkanNvbi5jb3J0ZXNfYnVzaW5lc3NfaW50ZWxsaWdlbmNlLmxhdW5jaF9yZWFkaW5lc3NfY3JpdGVyaWEucGVyZm9ybWFuY2Vfb3B0aW1pemVkIH19LFxuICAgIFwiYXBwX3N0b3JlX3JlYWR5XCI6IHt7ICRqc29uLmNvcnRlc19idXNpbmVzc19pbnRlbGxpZ2VuY2UubGF1bmNoX3JlYWRpbmVzc19jcml0ZXJpYS5hcHBfc3RvcmVfcmVhZHkgfX1cbiAgfSxcbiAgXCJlc3RpbWF0ZWRfdGltZWxpbmVfdG9fbGF1bmNoXCI6IFwie3sgJGpzb24uY29ydGVzX2FjdGlvbl9wbGFuLmVzdGltYXRlZF90aW1lbGluZS50b19hcHBfc3RvcmUgfHwgJzQtNiB3ZWVrcycgfX1cIixcbiAgXCJzZXR1cF9jb21wbGV0ZVwiOiB0cnVlXG59XG5EQVNIQk9BUkRfRU9GXG5lY2hvIFwi4pyFIGV4ZWN1dGl2ZS1jb3J0ZXMtZGFzaGJvYXJkXyRUSU1FU1RBTVAuanNvbiBzYXZlZFwiICYmIGxzIC1sYSBleGVjdXRpdmUtY29ydGVzLWRhc2hib2FyZF8kVElNRVNUQU1QLmpzb24gJiYgZWNobyBcIkZpbGUgc2l6ZTogJCh3YyAtYyA8IGV4ZWN1dGl2ZS1jb3J0ZXMtZGFzaGJvYXJkXyRUSU1FU1RBTVAuanNvbikgYnl0ZXNcIiIKICAgICAgfSwKICAgICAgIm5hbWUiOiAiU2F2ZSBFeGVjdXRpdmUgRGFzaGJvYXJkIiwKICAgICAgInR5cGUiOiAibjhuLW5vZGVzLWJhc2UuZXhlY3V0ZUNvbW1hbmQiLAogICAgICAidHlwZVZlcnNpb24iOiAxLAogICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgMTA2MCwKICAgICAgICAtNDQwCiAgICAgIF0sCiAgICAgICJpZCI6ICI5Y2I4NmJmMC0wNzhkLTRlNDgtOGMwMS0zNjg0YmZkMDg1MGEiCiAgICB9LAogICAgewogICAgICAicGFyYW1ldGVycyI6IHsKICAgICAgICAiY29tbWFuZCI6ICJlY2hvICfwn5OCIE1hbmFnaW5nIGhpc3RvcmljYWwgZmlsZXMuLi4nICYmIGNkIC9kYXRhL2NvcnRlcy9jb3J0ZXMtY29udGV4dCAmJiBUT0RBWT0kKGRhdGUgKyclZC0lbS0lWScpICYmIEhJU1RPUklDX0RJUj1cIkhpc3RvcmljbyBkZWwgRMOtYSAkVE9EQVlcIiAmJiBta2RpciAtcCBcIiRISVNUT1JJQ19ESVJcIiAmJiBlY2hvIFwi8J+TgSBDcmVhdGVkOiAkSElTVE9SSUNfRElSXCIgJiYgZWNobyAnJyAmJiBlY2hvICfwn5SEIE1vdmluZyBvbGQgZmlsZXMgdG8gaGlzdG9yaWMgZm9sZGVyLi4uJyAmJiBmb3IgcHJlZml4IGluIHVsdGltYXRlLWNvcnRlcy1jb250ZXh0IGNsYXVkZS1jb3J0ZXMtY29udGV4dCBleGVjdXRpdmUtY29ydGVzLWRhc2hib2FyZDsgZG8gTEFURVNUPSQobHMgLTF0ICR7cHJlZml4fV8qLmpzb24gMj4vZGV2L251bGwgfCBoZWFkIC0xKTsgaWYgWyAhIC16IFwiJExBVEVTVFwiIF07IHRoZW4gZWNobyBcIvCfk4wgS2VlcGluZyBsYXRlc3Q6ICRMQVRFU1RcIjsgbHMgLTF0ICR7cHJlZml4fV8qLmpzb24gMj4vZGV2L251bGwgfCB0YWlsIC1uICsyIHwgd2hpbGUgcmVhZCBvbGRmaWxlOyBkbyBpZiBbIC1mIFwiJG9sZGZpbGVcIiBdOyB0aGVuIG12IFwiJG9sZGZpbGVcIiBcIiRISVNUT1JJQ19ESVIvXCIgJiYgZWNobyBcIvCfk6YgTW92ZWQgdG8gaGlzdG9yaWM6ICRvbGRmaWxlXCI7IGZpOyBkb25lOyBmaTsgZG9uZSAmJiBlY2hvICcnICYmIGVjaG8gJ/Cfl5HvuI8gQ2xlYW5pbmcgaGlzdG9yaWMgZm9sZGVycyBvbGRlciB0aGFuIDMwIGRheXMuLi4nICYmIGZpbmQgLiAtbWF4ZGVwdGggMSAtdHlwZSBkIC1uYW1lICdIaXN0b3JpY28gZGVsIETDrWEgKicgLW10aW1lICszMCAtZXhlYyBybSAtcmYge30gXFw7IC1leGVjIGVjaG8gJ/Cfl5HvuI8gRGVsZXRlZCBvbGQgaGlzdG9yaWMgZm9sZGVyOiB7fScgXFw7IDI+L2Rldi9udWxsICYmIGVjaG8gJycgJiYgZWNobyAn8J+TiyBDdXJyZW50IHN0cnVjdHVyZTonICYmIGxzIC1sYSAmJiBlY2hvICcnICYmIGVjaG8gJ/Cfk4IgSGlzdG9yaWMgZm9sZGVyczonICYmIGxzIC1sYSBIaXN0b3JpY29cXCBkZWxcXCBEw61hXFwgKi8gMj4vZGV2L251bGwgfHwgZWNobyAnTm8gaGlzdG9yaWMgZm9sZGVycyB5ZXQnIgogICAgICB9LAogICAgICAibmFtZSI6ICJNYW5hZ2UgSGlzdG9yaWNhbCBGaWxlcyIsCiAgICAgICJ0eXBlIjogIm44bi1ub2Rlcy1iYXNlLmV4ZWN1dGVDb21tYW5kIiwKICAgICAgInR5cGVWZXJzaW9uIjogMSwKICAgICAgInBvc2l0aW9uIjogWwogICAgICAgIDEyODAsCiAgICAgICAgLTY0MAogICAgICBdLAogICAgICAiaWQiOiAiNDdmOGFjYmQtNmU0ZS00NzAyLWEwZGQtYTA3ODc2ODQzMWFlIgogICAgfSwKICAgIHsKICAgICAgInBhcmFtZXRlcnMiOiB7CiAgICAgICAgImNvbW1hbmQiOiAiZWNobyAn8J+OryA9PT0gQ09SVEVTIElOVEVMTElHRU5DRSBFTkdJTkUgLSBQUk9EVUNUSU9OIENPTVBMRVRFID09PScgJiYgZWNobyAnJyAmJiBlY2hvICfwn5OKIENPUlRFUyBBTkFMWVNJUyBTVU1NQVJZOicgJiYgZWNobyAnICAgUHJvamVjdDoge3sgJGpzb24ubWV0YWRhdGEucHJvamVjdE5hbWUgfX0nICYmIGVjaG8gJyAgIFJlcG9zaXRvcnk6IGh0dHBzOi8vZ2l0aHViLmNvbS9Nb0xpbmVzR2l0SHViL0NvcnRlcycgJiYgZWNobyAnICAgTW9uZXRpemF0aW9uIFJlYWRpbmVzczoge3sgJGpzb24uY29ydGVzX2J1c2luZXNzX2ludGVsbGlnZW5jZS5tb25ldGl6YXRpb25fcmVhZGluZXNzIH19JyAmJiBlY2hvICcgICBpT1MgT3B0aW1pemF0aW9uIFNjb3JlOiB7eyAkanNvbi5jb3J0ZXNfcGVyZm9ybWFuY2VfaW50ZWxsaWdlbmNlLmlvc19vcHRpbWl6YXRpb25fc2NvcmUgfX0lJyAmJiBlY2hvICcgICBGaWxlcyBEZXRlY3RlZDoge3sgJGpzb24uY29ydGVzX3Byb2plY3RfaW50ZWxsaWdlbmNlLmZpbGVfbWV0cmljcy50b3RhbF9maWxlcyB9fScgJiYgZWNobyAnICAgU3dpZnQgRmlsZXM6IHt7ICRqc29uLmNvcnRlc19wcm9qZWN0X2ludGVsbGlnZW5jZS5maWxlX21ldHJpY3Muc3dpZnRfZmlsZXMgfX0nICYmIGVjaG8gJyAgIFRlc3QgRmlsZXM6IHt7ICRqc29uLmNvcnRlc190ZXN0aW5nX2ludGVsbGlnZW5jZS50ZXN0X21ldHJpY3MudG90YWxfdGVzdF9maWxlcyB9fScgJiYgZWNobyAnICAgQXBwIFN0b3JlIFJlYWR5OiB7eyAkanNvbi5jb3J0ZXNfcGVyZm9ybWFuY2VfaW50ZWxsaWdlbmNlLmFwcF9zdG9yZV9yZWFkaW5lc3MgfX0nICYmIGVjaG8gJycgJiYgZWNobyAn8J+TgiBDdXJyZW50IHRpbWVzdGFtcGVkIGZpbGVzIChmb3JtYXQ6IGRkLU1NLVlZWVlfSEg6TU06U1MpOicgJiYgbHMgLWxhIC9kYXRhL2NvcnRlcy9jb3J0ZXMtY29udGV4dC8qXyQoZGF0ZSArJyVkLSVtLSVZJylfKi5qc29uIDI+L2Rldi9udWxsIHx8IGVjaG8gJ0N1cnJlbnQgZmlsZXMgYmVpbmcgY3JlYXRlZC4uLicgJiYgZWNobyAnJyAmJiBlY2hvICfwn5OCIEhpc3RvcmljYWwgbWFuYWdlbWVudCBhY3RpdmU6JyAmJiBlY2hvICcgICAtIEF1dG9tYXRpYyBoaXN0b3JpYyBmb2xkZXIgY3JlYXRpb246IFwiSGlzdG9yaWNvIGRlbCBEw61hIGRkLU1NLVlZWVlcIicgJiYgZWNobyAnICAgLSBPbmx5IGxhdGVzdCB2ZXJzaW9uIGtlcHQgaW4gbWFpbiBmb2xkZXInICYmIGVjaG8gJyAgIC0gQXV0by1jbGVhbnVwOiBIaXN0b3JpYyBmb2xkZXJzID4zMCBkYXlzIGRlbGV0ZWQnICYmIGVjaG8gJycgJiYgZWNobyAn8J+TpiBQcmVwYXJpbmcgZmluYWwgZXhwb3J0IHRvIE1hYy4uLicgJiYgZWNobyAnJyAmJiBDT05UQUlORVJfSUQ9JChob3N0bmFtZSkgJiYgZWNobyBcIvCfmoAgQ09QWSBDT01NQU5EIEZPUiBZT1VSIE1BQzpcIiAmJiBlY2hvIFwiZG9ja2VyIGNwIFxcJENPTlRBSU5FUl9JRDovZGF0YS9jb3J0ZXMvY29ydGVzLWNvbnRleHQvIC9Vc2Vycy9tb2xpbmVzbWFjL0RvY3VtZW50cy9Db3J0ZXMvXCIgJiYgZWNobyAnJyAmJiBlY2hvICfwn5KhIEFsbCBmaWxlcyAoY3VycmVudCArIGhpc3RvcmljIGZvbGRlcnMpIHdpbGwgYmUgY29waWVkIScgJiYgZWNobyAnJyAmJiBlY2hvICfwn5CZIEdpdEh1YiBSZXBvc2l0b3J5OiBodHRwczovL2dpdGh1Yi5jb20vTW9MaW5lc0dpdEh1Yi9Db3J0ZXMnICYmIGVjaG8gJ/CflJEgVG9rZW4gY29uZmlndXJlZCBmb3IgYXV0b21hdGVkIHdvcmtmbG93cycgJiYgZWNobyAnJyAmJiBlY2hvICfinIUgU2NoZWR1bGVkIGFuYWx5c2lzIGV2ZXJ5IDEwIG1pbnV0ZXMgd2l0aCBpbnRlbGxpZ2VudCBoaXN0b3JpY2FsIG1hbmFnZW1lbnQhJyIKICAgICAgfSwKICAgICAgIm5hbWUiOiAiRmluYWwgRXhwb3J0IEluc3RydWN0aW9ucyIsCiAgICAgICJ0eXBlIjogIm44bi1ub2Rlcy1iYXNlLmV4ZWN1dGVDb21tYW5kIiwKICAgICAgInR5cGVWZXJzaW9uIjogMSwKICAgICAgInBvc2l0aW9uIjogWwogICAgICAgIDE1MDAsCiAgICAgICAgLTY0MAogICAgICBdLAogICAgICAiaWQiOiAiZjFiZTNjODAtZWQyYy00MWVhLWJmN2EtMjhmNDcwNDAxMGZhIgogICAgfSwKICAgIHsKICAgICAgInBhcmFtZXRlcnMiOiB7CiAgICAgICAgImh0dHBNZXRob2QiOiAiUE9TVCIsCiAgICAgICAgInBhdGgiOiAiaHR0cDovL2xvY2FsaG9zdDo1Njc4L3dlYmhvb2sveGNvZGUtY2xpIiwKICAgICAgICAib3B0aW9ucyI6IHt9CiAgICAgIH0sCiAgICAgICJpZCI6ICJiYTI4MzQzZi1iY2FmLTRiYTUtODhjNy0xMzZkODI3Y2MyNWMiLAogICAgICAibmFtZSI6ICJYY29kZSBDTEkgV2ViaG9vayIsCiAgICAgICJ0eXBlIjogIm44bi1ub2Rlcy1iYXNlLndlYmhvb2siLAogICAgICAidHlwZVZlcnNpb24iOiAxLAogICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgMTc0MCwKICAgICAgICAtMjgwCiAgICAgIF0sCiAgICAgICJ3ZWJob29rSWQiOiAiMzViOWIxMzEtNTJmNi00N2JkLTgyNGUtZWFiYTdjMDVhYjhhIgogICAgfSwKICAgIHsKICAgICAgInBhcmFtZXRlcnMiOiB7CiAgICAgICAgImpzQ29kZSI6ICIvLyBYY29kZSBDTEkgQ29tbWFuZCBQYXJzZXIgJiBGb3JtYXR0ZXIgZm9yIE1DUCBDbGF1ZGVcbmNvbnN0IGlucHV0ID0gJGlucHV0LmFsbCgpO1xuY29uc3QgcmVxdWVzdERhdGEgPSBpbnB1dFswXS5qc29uO1xuXG4vLyBDb21wbGV0ZSBYY29kZSBDTEkgQ29tbWFuZHMgVG9vbGJveFxuY29uc3QgeGNvZGVDb21tYW5kcyA9IHtcbiAgYnVpbGQ6IHtcbiAgICBcImJ1aWxkX3Byb2plY3RcIjogXCJ4Y29kZWJ1aWxkIC1wcm9qZWN0IHt7cHJvamVjdF9uYW1lfX0ueGNvZGVwcm9qIC1zY2hlbWUge3tzY2hlbWV9fSAtY29uZmlndXJhdGlvbiB7e2NvbmZpZ319IGJ1aWxkXCIsXG4gICAgXCJidWlsZF93b3Jrc3BhY2VcIjogXCJ4Y29kZWJ1aWxkIC13b3Jrc3BhY2Uge3t3b3Jrc3BhY2V9fS54Y3dvcmtzcGFjZSAtc2NoZW1lIHt7c2NoZW1lfX0gLWNvbmZpZ3VyYXRpb24ge3tjb25maWd9fSBidWlsZFwiLFxuICAgIFwiYnVpbGRfZm9yX2RldmljZVwiOiBcInhjb2RlYnVpbGQgLXByb2plY3Qge3twcm9qZWN0X25hbWV9fS54Y29kZXByb2ogLXNjaGVtZSB7e3NjaGVtZX19IC1jb25maWd1cmF0aW9uIFJlbGVhc2UgLWFyY2ggYXJtNjQgYnVpbGRcIixcbiAgICBcImJ1aWxkX2Zvcl9zaW11bGF0b3JcIjogXCJ4Y29kZWJ1aWxkIC1wcm9qZWN0IHt7cHJvamVjdF9uYW1lfX0ueGNvZGVwcm9qIC1zY2hlbWUge3tzY2hlbWV9fSAtY29uZmlndXJhdGlvbiBEZWJ1ZyAtYXJjaCB4ODZfNjQgLXNkayBpcGhvbmVzaW11bGF0b3IgYnVpbGRcIixcbiAgICBcImNsZWFuX2J1aWxkXCI6IFwieGNvZGVidWlsZCBjbGVhbiAtcHJvamVjdCB7e3Byb2plY3RfbmFtZX19Lnhjb2RlcHJvaiAtc2NoZW1lIHt7c2NoZW1lfX1cIixcbiAgICBcImNsZWFuX3dvcmtzcGFjZVwiOiBcInhjb2RlYnVpbGQgY2xlYW4gLXdvcmtzcGFjZSB7e3dvcmtzcGFjZX19Lnhjd29ya3NwYWNlIC1zY2hlbWUge3tzY2hlbWV9fVwiLFxuICAgIFwiYnVpbGRfc2V0dGluZ3NcIjogXCJ4Y29kZWJ1aWxkIC1wcm9qZWN0IHt7cHJvamVjdF9uYW1lfX0ueGNvZGVwcm9qIC10YXJnZXQge3t0YXJnZXR9fSAtc2hvd0J1aWxkU2V0dGluZ3NcIixcbiAgICBcImRlcml2ZWRfZGF0YV9jbGVhblwiOiBcInJtIC1yZiB+L0xpYnJhcnkvRGV2ZWxvcGVyL1hjb2RlL0Rlcml2ZWREYXRhXCJcbiAgfSxcbiAgcHJvamVjdDoge1xuICAgIFwibGlzdF9zY2hlbWVzXCI6IFwieGNvZGVidWlsZCAtbGlzdCAtcHJvamVjdCB7e3Byb2plY3RfbmFtZX19Lnhjb2RlcHJvalwiLFxuICAgIFwibGlzdF93b3Jrc3BhY2Vfc2NoZW1lc1wiOiBcInhjb2RlYnVpbGQgLWxpc3QgLXdvcmtzcGFjZSB7e3dvcmtzcGFjZX19Lnhjd29ya3NwYWNlXCIsXG4gICAgXCJzaG93X2Rlc3RpbmF0aW9uc1wiOiBcInhjb2RlYnVpbGQgLXNob3dkZXN0aW5hdGlvbnMgLXByb2plY3Qge3twcm9qZWN0X25hbWV9fS54Y29kZXByb2ogLXNjaGVtZSB7e3NjaGVtZX19XCIsXG4gICAgXCJwcm9qZWN0X2luZm9cIjogXCJ4Y29kZWJ1aWxkIC1wcm9qZWN0IHt7cHJvamVjdF9uYW1lfX0ueGNvZGVwcm9qIC1saXN0XCIsXG4gICAgXCJ3b3Jrc3BhY2VfaW5mb1wiOiBcInhjb2RlYnVpbGQgLXdvcmtzcGFjZSB7e3dvcmtzcGFjZX19Lnhjd29ya3NwYWNlIC1saXN0XCIsXG4gICAgXCJzZGtfaW5mb1wiOiBcInhjb2RlYnVpbGQgLXNob3dzZGtzXCIsXG4gICAgXCJ2ZXJzaW9uX2luZm9cIjogXCJ4Y29kZWJ1aWxkIC12ZXJzaW9uXCJcbiAgfSxcbiAgc2ltdWxhdG9yOiB7XG4gICAgXCJsaXN0X3NpbXVsYXRvcnNcIjogXCJ4Y3J1biBzaW1jdGwgbGlzdCBkZXZpY2VzXCIsXG4gICAgXCJsaXN0X2RldmljZV90eXBlc1wiOiBcInhjcnVuIHNpbWN0bCBsaXN0IGRldmljZXR5cGVzXCIsXG4gICAgXCJsaXN0X3J1bnRpbWVzXCI6IFwieGNydW4gc2ltY3RsIGxpc3QgcnVudGltZXNcIixcbiAgICBcImJvb3Rfc2ltdWxhdG9yXCI6IFwieGNydW4gc2ltY3RsIGJvb3Qge3tkZXZpY2VfaWR9fVwiLFxuICAgIFwic2h1dGRvd25fc2ltdWxhdG9yXCI6IFwieGNydW4gc2ltY3RsIHNodXRkb3duIHt7ZGV2aWNlX2lkfX1cIixcbiAgICBcImVyYXNlX3NpbXVsYXRvclwiOiBcInhjcnVuIHNpbWN0bCBlcmFzZSB7e2RldmljZV9pZH19XCIsXG4gICAgXCJpbnN0YWxsX2FwcFwiOiBcInhjcnVuIHNpbWN0bCBpbnN0YWxsIHt7ZGV2aWNlX2lkfX0ge3thcHBfcGF0aH19XCIsXG4gICAgXCJ1bmluc3RhbGxfYXBwXCI6IFwieGNydW4gc2ltY3RsIHVuaW5zdGFsbCB7e2RldmljZV9pZH19IHt7YnVuZGxlX2lkfX1cIixcbiAgICBcImxhdW5jaF9hcHBcIjogXCJ4Y3J1biBzaW1jdGwgbGF1bmNoIHt7ZGV2aWNlX2lkfX0ge3tidW5kbGVfaWR9fVwiLFxuICAgIFwidGVybWluYXRlX2FwcFwiOiBcInhjcnVuIHNpbWN0bCB0ZXJtaW5hdGUge3tkZXZpY2VfaWR9fSB7e2J1bmRsZV9pZH19XCIsXG4gICAgXCJvcGVuX3NpbXVsYXRvclwiOiBcIm9wZW4gLWEgU2ltdWxhdG9yXCIsXG4gICAgXCJzY3JlZW5zaG90XCI6IFwieGNydW4gc2ltY3RsIGlvIHt7ZGV2aWNlX2lkfX0gc2NyZWVuc2hvdCB7e2ZpbGVuYW1lfX1cIixcbiAgICBcInJlY29yZF92aWRlb1wiOiBcInhjcnVuIHNpbWN0bCBpbyB7e2RldmljZV9pZH19IHJlY29yZFZpZGVvIHt7ZmlsZW5hbWV9fVwiLFxuICAgIFwiY3JlYXRlX2RldmljZVwiOiBcInhjcnVuIHNpbWN0bCBjcmVhdGUge3tkZXZpY2VfbmFtZX19IHt7ZGV2aWNlX3R5cGV9fSB7e3J1bnRpbWV9fVwiLFxuICAgIFwiZGVsZXRlX2RldmljZVwiOiBcInhjcnVuIHNpbWN0bCBkZWxldGUge3tkZXZpY2VfaWR9fVwiLFxuICAgIFwicmVzZXRfY29udGVudFwiOiBcInhjcnVuIHNpbWN0bCBlcmFzZSBhbGxcIlxuICB9LFxuICBkZXZpY2U6IHtcbiAgICBcImxpc3RfZGV2aWNlc1wiOiBcInhjcnVuIGRldmljZWN0bCBsaXN0IGRldmljZXNcIixcbiAgICBcImRldmljZV9pbmZvXCI6IFwieGNydW4gZGV2aWNlY3RsIGxpc3QgZGV2aWNlcyAtLWpzb25cIixcbiAgICBcImluc3RhbGxfb25fZGV2aWNlXCI6IFwieGNydW4gZGV2aWNlY3RsIGRldmljZSBpbnN0YWxsIGFwcCAtLWRldmljZSB7e2RldmljZV9pZH19IHt7YXBwX3BhdGh9fVwiLFxuICAgIFwibGF1bmNoX29uX2RldmljZVwiOiBcInhjcnVuIGRldmljZWN0bCBkZXZpY2UgcHJvY2VzcyBsYXVuY2ggLS1kZXZpY2Uge3tkZXZpY2VfaWR9fSB7e2J1bmRsZV9pZH19XCIsXG4gICAgXCJkZXZpY2VfbG9nc1wiOiBcInhjcnVuIGRldmljZWN0bCBkZXZpY2UgbG9nIHN0cmVhbSAtLWRldmljZSB7e2RldmljZV9pZH19XCIsXG4gICAgXCJjcmFzaF9sb2dzXCI6IFwieGNydW4gZGV2aWNlY3RsIGRldmljZSBsb2cgY29sbGVjdCAtLWRldmljZSB7e2RldmljZV9pZH19XCIsXG4gICAgXCJkZXZpY2Vfc3lzZGlhZ25vc2VcIjogXCJ4Y3J1biBkZXZpY2VjdGwgZGV2aWNlIHN5c2RpYWdub3NlIC0tZGV2aWNlIHt7ZGV2aWNlX2lkfX1cIixcbiAgICBcInBhaXJfZGV2aWNlXCI6IFwieGNydW4gZGV2aWNlY3RsIGRldmljZSBwYWlyIC0tZGV2aWNlIHt7ZGV2aWNlX2lkfX1cIixcbiAgICBcInVucGFpcl9kZXZpY2VcIjogXCJ4Y3J1biBkZXZpY2VjdGwgZGV2aWNlIHVucGFpciAtLWRldmljZSB7e2RldmljZV9pZH19XCJcbiAgfSxcbiAgYXJjaGl2ZToge1xuICAgIFwiYXJjaGl2ZV9wcm9qZWN0XCI6IFwieGNvZGVidWlsZCAtcHJvamVjdCB7e3Byb2plY3RfbmFtZX19Lnhjb2RlcHJvaiAtc2NoZW1lIHt7c2NoZW1lfX0gLWNvbmZpZ3VyYXRpb24gUmVsZWFzZSBhcmNoaXZlIC1hcmNoaXZlUGF0aCB7e2FyY2hpdmVfcGF0aH19XCIsXG4gICAgXCJhcmNoaXZlX3dvcmtzcGFjZVwiOiBcInhjb2RlYnVpbGQgLXdvcmtzcGFjZSB7e3dvcmtzcGFjZX19Lnhjd29ya3NwYWNlIC1zY2hlbWUge3tzY2hlbWV9fSAtY29uZmlndXJhdGlvbiBSZWxlYXNlIGFyY2hpdmUgLWFyY2hpdmVQYXRoIHt7YXJjaGl2ZV9wYXRofX1cIixcbiAgICBcImV4cG9ydF9pcGFcIjogXCJ4Y29kZWJ1aWxkIC1leHBvcnRBcmNoaXZlIC1hcmNoaXZlUGF0aCB7e2FyY2hpdmVfcGF0aH19IC1leHBvcnRQYXRoIHt7ZXhwb3J0X3BhdGh9fSAtZXhwb3J0T3B0aW9uc1BsaXN0IHt7ZXhwb3J0X29wdGlvbnNfcGxpc3R9fVwiLFxuICAgIFwiY3JlYXRlX2V4cG9ydF9vcHRpb25zXCI6IFwiZWNobyAnPD94bWwgdmVyc2lvbj1cXFwiMS4wXFxcIiBlbmNvZGluZz1cXFwiVVRGLThcXFwiPz5cXG48IURPQ1RZUEUgcGxpc3QgUFVCTElDIFxcXCItLy9BcHBsZS8vRFREIFBMSVNUIDEuMC8vRU5cXFwiIFxcXCJodHRwOi8vd3d3LmFwcGxlLmNvbS9EVERzL1Byb3BlcnR5TGlzdC0xLjAuZHRkXFxcIj5cXG48cGxpc3QgdmVyc2lvbj1cXFwiMS4wXFxcIj5cXG48ZGljdD5cXG4gICAgPGtleT5tZXRob2Q8L2tleT5cXG4gICAgPHN0cmluZz57e21ldGhvZH19PC9zdHJpbmc+XFxuICAgIDxrZXk+dGVhbUlEPC9rZXk+XFxuICAgIDxzdHJpbmc+e3t0ZWFtX2lkfX08L3N0cmluZz5cXG48L2RpY3Q+XFxuPC9wbGlzdD4nID4ge3tleHBvcnRfb3B0aW9uc19wYXRofX1cIixcbiAgICBcInZhbGlkYXRlX2FyY2hpdmVcIjogXCJ4Y29kZWJ1aWxkIC1leHBvcnRBcmNoaXZlIC1hcmNoaXZlUGF0aCB7e2FyY2hpdmVfcGF0aH19IC1leHBvcnRQYXRoIHt7ZXhwb3J0X3BhdGh9fSAtZXhwb3J0T3B0aW9uc1BsaXN0IHt7ZXhwb3J0X29wdGlvbnNfcGxpc3R9fSAtYWxsb3dQcm92aXNpb25pbmdVcGRhdGVzIC1hbGxvd1Byb3Zpc2lvbmluZ0RldmljZVJlZ2lzdHJhdGlvblwiXG4gIH0sXG4gIHRlc3Rpbmc6IHtcbiAgICBcInJ1bl90ZXN0c1wiOiBcInhjb2RlYnVpbGQgdGVzdCAtcHJvamVjdCB7e3Byb2plY3RfbmFtZX19Lnhjb2RlcHJvaiAtc2NoZW1lIHt7c2NoZW1lfX0gLWRlc3RpbmF0aW9uICd7e2Rlc3RpbmF0aW9ufX0nXCIsXG4gICAgXCJydW5fdWlfdGVzdHNcIjogXCJ4Y29kZWJ1aWxkIHRlc3QgLXByb2plY3Qge3twcm9qZWN0X25hbWV9fS54Y29kZXByb2ogLXNjaGVtZSB7e3NjaGVtZX19IC1kZXN0aW5hdGlvbiAne3tkZXN0aW5hdGlvbn19JyAtb25seS10ZXN0aW5nOnt7dGFyZ2V0fX1VSVRlc3RzXCIsXG4gICAgXCJydW5fdW5pdF90ZXN0c1wiOiBcInhjb2RlYnVpbGQgdGVzdCAtcHJvamVjdCB7e3Byb2plY3RfbmFtZX19Lnhjb2RlcHJvaiAtc2NoZW1lIHt7c2NoZW1lfX0gLWRlc3RpbmF0aW9uICd7e2Rlc3RpbmF0aW9ufX0nIC1vbmx5LXRlc3Rpbmc6e3t0YXJnZXR9fVRlc3RzXCIsXG4gICAgXCJ0ZXN0X3dpdGhvdXRfYnVpbGRpbmdcIjogXCJ4Y29kZWJ1aWxkIHRlc3Qtd2l0aG91dC1idWlsZGluZyAtcHJvamVjdCB7e3Byb2plY3RfbmFtZX19Lnhjb2RlcHJvaiAtc2NoZW1lIHt7c2NoZW1lfX0gLWRlc3RpbmF0aW9uICd7e2Rlc3RpbmF0aW9ufX0nXCIsXG4gICAgXCJidWlsZF9mb3JfdGVzdGluZ1wiOiBcInhjb2RlYnVpbGQgYnVpbGQtZm9yLXRlc3RpbmcgLXByb2plY3Qge3twcm9qZWN0X25hbWV9fS54Y29kZXByb2ogLXNjaGVtZSB7e3NjaGVtZX19IC1kZXN0aW5hdGlvbiAne3tkZXN0aW5hdGlvbn19J1wiLFxuICAgIFwidGVzdF9wYXJhbGxlbFwiOiBcInhjb2RlYnVpbGQgdGVzdCAtcHJvamVjdCB7e3Byb2plY3RfbmFtZX19Lnhjb2RlcHJvaiAtc2NoZW1lIHt7c2NoZW1lfX0gLWRlc3RpbmF0aW9uICd7e2Rlc3RpbmF0aW9ufX0nIC1wYXJhbGxlbC10ZXN0aW5nLWVuYWJsZWQgWUVTXCIsXG4gICAgXCJ0ZXN0X3Jlc3VsdHNcIjogXCJ4Y3J1biB4Y3Jlc3VsdHRvb2wgZ2V0IC0tZm9ybWF0IGpzb24gLS1wYXRoIHt7cmVzdWx0X2J1bmRsZV9wYXRofX1cIlxuICB9LFxuICBwcm92aXNpb25pbmc6IHtcbiAgICBcImxpc3RfY2VydGlmaWNhdGVzXCI6IFwic2VjdXJpdHkgZmluZC1pZGVudGl0eSAtdiAtcCBjb2Rlc2lnbmluZ1wiLFxuICAgIFwibGlzdF9wcm92aXNpb25pbmdfcHJvZmlsZXNcIjogXCJscyAtbGEgfi9MaWJyYXJ5L01vYmlsZURldmljZS9Qcm92aXNpb25pbmdcXFxcIFByb2ZpbGVzL1wiLFxuICAgIFwiaW5zdGFsbF9wcm92aXNpb25pbmdfcHJvZmlsZVwiOiBcImNwIHt7cHJvZmlsZV9wYXRofX0gfi9MaWJyYXJ5L01vYmlsZURldmljZS9Qcm92aXNpb25pbmdcXFxcIFByb2ZpbGVzL1wiLFxuICAgIFwiZGVsZXRlX3Byb3Zpc2lvbmluZ19wcm9maWxlXCI6IFwicm0gfi9MaWJyYXJ5L01vYmlsZURldmljZS9Qcm92aXNpb25pbmdcXFxcIFByb2ZpbGVzL3t7cHJvZmlsZV9uYW1lfX1cIixcbiAgICBcInZlcmlmeV9jb2RlX3NpZ25pbmdcIjogXCJjb2Rlc2lnbiAtZHYgLS12ZXJib3NlPTQge3thcHBfcGF0aH19XCIsXG4gICAgXCJjaGVja19lbnRpdGxlbWVudHNcIjogXCJjb2Rlc2lnbiAtZCAtLWVudGl0bGVtZW50cyA6LSB7e2FwcF9wYXRofX1cIixcbiAgICBcInNpZ25fYXBwXCI6IFwiY29kZXNpZ24gLS1mb3JjZSAtLXNpZ24gXFxcInt7Y2VydGlmaWNhdGVfbmFtZX19XFxcIiB7e2FwcF9wYXRofX1cIlxuICB9LFxuICBhbmFseXNpczoge1xuICAgIFwiYW5hbHl6ZV9wcm9qZWN0XCI6IFwieGNvZGVidWlsZCBhbmFseXplIC1wcm9qZWN0IHt7cHJvamVjdF9uYW1lfX0ueGNvZGVwcm9qIC1zY2hlbWUge3tzY2hlbWV9fVwiLFxuICAgIFwiaW5zdHJ1bWVudHNfdHJhY2VcIjogXCJ4Y3J1biBpbnN0cnVtZW50cyAtdCB7e3RlbXBsYXRlfX0gLUQge3t0cmFjZV9maWxlfX0ge3thcHBfcGF0aH19XCIsXG4gICAgXCJtZW1vcnlfZ3JhcGhcIjogXCJ4Y3J1biBsZWFrcyB7e2FwcF9wYXRofX1cIixcbiAgICBcInN0YXRpY19hbmFseXplclwiOiBcInhjcnVuIGNsYW5nIC0tYW5hbHl6ZSB7e3NvdXJjZV9maWxlc319XCIsXG4gICAgXCJkZXBlbmRlbmN5X2dyYXBoXCI6IFwieGNvZGVidWlsZCAtcHJvamVjdCB7e3Byb2plY3RfbmFtZX19Lnhjb2RlcHJvaiAtdGFyZ2V0IHt7dGFyZ2V0fX0gLXNob3dCdWlsZFRpbWVTdW1tYXJ5XCIsXG4gICAgXCJidWlsZF90aW1lX2FuYWx5c2lzXCI6IFwieGNvZGVidWlsZCAtcHJvamVjdCB7e3Byb2plY3RfbmFtZX19Lnhjb2RlcHJvaiAtc2NoZW1lIHt7c2NoZW1lfX0gT1RIRVJfU1dJRlRfRkxBR1M9XFxcIi1YZnJvbnRlbmQgLWRlYnVnLXRpbWUtZnVuY3Rpb24tYm9kaWVzXFxcIlwiLFxuICAgIFwiY3Jhc2hfc3ltYm9saWNhdGlvblwiOiBcInhjcnVuIGF0b3MgLW8ge3tkc3ltX3BhdGh9fSAtYXJjaCB7e2FyY2h9fSB7e2FkZHJlc3N9fVwiLFxuICAgIFwiY29uc29sZV9sb2dzXCI6IFwieGNydW4gZGV2aWNlY3RsIGRldmljZSBsb2cgc3RyZWFtIC0tZGV2aWNlIHt7ZGV2aWNlX2lkfX0gLS1zdHlsZSBjb21wYWN0XCJcbiAgfVxufTtcblxuY29uc3QgY29tbWFuZFR5cGUgPSByZXF1ZXN0RGF0YS5jb21tYW5kX3R5cGU7XG5jb25zdCBhY3Rpb24gPSByZXF1ZXN0RGF0YS5hY3Rpb247XG5jb25zdCBwYXJhbWV0ZXJzID0gcmVxdWVzdERhdGEucGFyYW1ldGVycyB8fCB7fTtcblxubGV0IGNvbW1hbmRUZW1wbGF0ZSA9IHhjb2RlQ29tbWFuZHNbY29tbWFuZFR5cGVdPy5bYWN0aW9uXTtcblxuaWYgKCFjb21tYW5kVGVtcGxhdGUpIHtcbiAgcmV0dXJuIFt7XG4gICAganNvbjoge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogYENvbW1hbmQgbm90IGZvdW5kOiAke2NvbW1hbmRUeXBlfS4ke2FjdGlvbn1gLFxuICAgICAgYXZhaWxhYmxlX2NvbW1hbmRzOiBPYmplY3Qua2V5cyh4Y29kZUNvbW1hbmRzKSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgbWNwX3JlYWR5OiB0cnVlXG4gICAgfVxuICB9XTtcbn1cblxubGV0IGZpbmFsQ29tbWFuZCA9IGNvbW1hbmRUZW1wbGF0ZTtcbmZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHBhcmFtZXRlcnMpKSB7XG4gIGZpbmFsQ29tbWFuZCA9IGZpbmFsQ29tbWFuZC5yZXBsYWNlKG5ldyBSZWdFeHAoYHt7JHtrZXl9fX1gLCAnZycpLCB2YWx1ZSk7XG59XG5cbmNvbnN0IHVucmVwbGFjZWRQYXJhbXMgPSBmaW5hbENvbW1hbmQubWF0Y2goL3t7XFx3K319L2cpO1xuaWYgKHVucmVwbGFjZWRQYXJhbXMpIHtcbiAgcmV0dXJuIFt7XG4gICAganNvbjoge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogXCJNaXNzaW5nIHJlcXVpcmVkIHBhcmFtZXRlcnNcIixcbiAgICAgIG1pc3NpbmdfcGFyYW1ldGVyczogdW5yZXBsYWNlZFBhcmFtcy5tYXAocCA9PiBwLnJlcGxhY2UoL1t7fV0vZywgJycpKSxcbiAgICAgIGNvbW1hbmRfdGVtcGxhdGU6IGNvbW1hbmRUZW1wbGF0ZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgbWNwX3JlYWR5OiB0cnVlXG4gICAgfVxuICB9XTtcbn1cblxucmV0dXJuIFt7XG4gIGpzb246IHtcbiAgICB4Y29kZV9jb21tYW5kOiBmaW5hbENvbW1hbmQsXG4gICAgY29tbWFuZF90eXBlOiBjb21tYW5kVHlwZSxcbiAgICBhY3Rpb246IGFjdGlvbixcbiAgICBwcm9qZWN0X3BhdGg6IHBhcmFtZXRlcnMucHJvamVjdF9wYXRoIHx8IHJlcXVlc3REYXRhLnByb2plY3RfcGF0aCB8fCAnL1VzZXJzLycgKyAkZW52LlVTRVIgKyAnL0RvY3VtZW50cy9Db3J0ZXMnLFxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIG1jcF9yZWFkeTogdHJ1ZVxuICB9XG59XTsiCiAgICAgIH0sCiAgICAgICJpZCI6ICI0NDdmMWQzMi00YTIwLTRiMjQtOWFmNi0wODdkMDQyOWE5MzciLAogICAgICAibmFtZSI6ICJDb21tYW5kIFBhcnNlciIsCiAgICAgICJ0eXBlIjogIm44bi1ub2Rlcy1iYXNlLmNvZGUiLAogICAgICAidHlwZVZlcnNpb24iOiAyLAogICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgMTk2MCwKICAgICAgICAtMjgwCiAgICAgIF0KICAgIH0sCiAgICB7CiAgICAgICJwYXJhbWV0ZXJzIjogewogICAgICAgICJjb21tYW5kIjogIj17eyAkanNvbi54Y29kZV9jb21tYW5kIH19IgogICAgICB9LAogICAgICAiaWQiOiAiNDBlMjM3ZjQtYmYwNC00M2QwLTgzZjQtY2E3YWM0ZTkyYTk2IiwKICAgICAgIm5hbWUiOiAiWGNvZGUgRXhlY3V0b3IiLAogICAgICAidHlwZSI6ICJuOG4tbm9kZXMtYmFzZS5leGVjdXRlQ29tbWFuZCIsCiAgICAgICJ0eXBlVmVyc2lvbiI6IDEsCiAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAyMTgwLAogICAgICAgIC0yODAKICAgICAgXQogICAgfSwKICAgIHsKICAgICAgInBhcmFtZXRlcnMiOiB7CiAgICAgICAgImpzQ29kZSI6ICJjb25zdCBpbnB1dCA9ICRpbnB1dC5hbGwoKTtcbmNvbnN0IGV4ZWN1dGlvblJlc3VsdCA9IGlucHV0WzBdLmpzb247XG5cbmNvbnN0IHN0ZG91dCA9IGV4ZWN1dGlvblJlc3VsdC5zdGRvdXQgfHwgJyc7XG5jb25zdCBzdGRlcnIgPSBleGVjdXRpb25SZXN1bHQuc3RkZXJyIHx8ICcnO1xuY29uc3QgZXhpdENvZGUgPSBleGVjdXRpb25SZXN1bHQuZXhpdENvZGUgfHwgMDtcbmNvbnN0IGNvbW1hbmQgPSBleGVjdXRpb25SZXN1bHQuY29tbWFuZCB8fCAnJztcblxuY29uc3Qgc3VjY2VzcyA9IGV4aXRDb2RlID09PSAwO1xuXG5mdW5jdGlvbiBwYXJzZVhjb2RlT3V0cHV0KG91dHB1dCwgY29tbWFuZCkge1xuICBjb25zdCBwYXJzZWQgPSB7XG4gICAgcmF3OiBvdXRwdXQsXG4gICAgc3RydWN0dXJlZDoge30sXG4gICAgaW5zaWdodHM6IFtdLFxuICAgIHdhcm5pbmdzOiBbXSxcbiAgICBlcnJvcnM6IFtdXG4gIH07XG4gIFxuICBpZiAoY29tbWFuZC5pbmNsdWRlcygneGNvZGVidWlsZCcpKSB7XG4gICAgY29uc3QgYnVpbGRQaGFzZXMgPSBvdXRwdXQubWF0Y2goLz09PSBCVUlMRCBUQVJHRVQgLisgPT09L2cpIHx8IFtdO1xuICAgIHBhcnNlZC5zdHJ1Y3R1cmVkLmJ1aWxkX3BoYXNlcyA9IGJ1aWxkUGhhc2VzO1xuICAgIFxuICAgIGNvbnN0IGNvbXBpbGVkRmlsZXMgPSBvdXRwdXQubWF0Y2goL0NvbXBpbGVDIC4rL2cpIHx8IFtdO1xuICAgIHBhcnNlZC5zdHJ1Y3R1cmVkLmNvbXBpbGVkX2ZpbGVzID0gY29tcGlsZWRGaWxlcy5sZW5ndGg7XG4gICAgXG4gICAgY29uc3QgbGlua0NvbW1hbmRzID0gb3V0cHV0Lm1hdGNoKC9MZCAuKy9nKSB8fCBbXTtcbiAgICBwYXJzZWQuc3RydWN0dXJlZC5saW5rX2NvbW1hbmRzID0gbGlua0NvbW1hbmRzO1xuICAgIFxuICAgIGNvbnN0IGJ1aWxkVGltZSA9IG91dHB1dC5tYXRjaCgvQlVJTEQgU1VDQ0VFREVEIFxcKChcXGQrXFwuXFxkKykgc2Vjb25kc1xcKS8pO1xuICAgIGlmIChidWlsZFRpbWUpIHtcbiAgICAgIHBhcnNlZC5zdHJ1Y3R1cmVkLmJ1aWxkX3RpbWUgPSBwYXJzZUZsb2F0KGJ1aWxkVGltZVsxXSk7XG4gICAgICBwYXJzZWQuaW5zaWdodHMucHVzaChgQnVpbGQgY29tcGxldGVkIGluICR7YnVpbGRUaW1lWzFdfSBzZWNvbmRzYCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHdhcm5pbmdzID0gb3V0cHV0Lm1hdGNoKC93YXJuaW5nOiAuKy9nKSB8fCBbXTtcbiAgICBwYXJzZWQud2FybmluZ3MgPSB3YXJuaW5ncztcbiAgICBcbiAgICBjb25zdCBlcnJvcnMgPSBvdXRwdXQubWF0Y2goL2Vycm9yOiAuKy9nKSB8fCBbXTtcbiAgICBwYXJzZWQuZXJyb3JzID0gZXJyb3JzO1xuICB9XG4gIFxuICBpZiAoY29tbWFuZC5pbmNsdWRlcygnc2ltY3RsJykpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKG91dHB1dC50cmltKCkuc3RhcnRzV2l0aCgneycpIHx8IG91dHB1dC50cmltKCkuc3RhcnRzV2l0aCgnWycpKSB7XG4gICAgICAgIHBhcnNlZC5zdHJ1Y3R1cmVkID0gSlNPTi5wYXJzZShvdXRwdXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZGV2aWNlTWF0Y2hlcyA9IG91dHB1dC5tYXRjaCgvKFtBLUYwLTktXSspIFxcKCguKz8pXFwpIFxcKCguKz8pXFwpL2cpIHx8IFtdO1xuICAgICAgICBwYXJzZWQuc3RydWN0dXJlZC5kZXZpY2VzID0gZGV2aWNlTWF0Y2hlcy5tYXAobWF0Y2ggPT4ge1xuICAgICAgICAgIGNvbnN0IHBhcnRzID0gbWF0Y2gubWF0Y2goLyhbQS1GMC05LV0rKSBcXCgoLis/KVxcKSBcXCgoLis/KVxcKS8pO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1ZGlkOiBwYXJ0c1sxXSxcbiAgICAgICAgICAgIG5hbWU6IHBhcnRzWzJdLFxuICAgICAgICAgICAgc3RhdGU6IHBhcnRzWzNdXG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcGFyc2VkLnN0cnVjdHVyZWQucGFyc2VfZXJyb3IgPSBlLm1lc3NhZ2U7XG4gICAgfVxuICB9XG4gIFxuICBpZiAoY29tbWFuZC5pbmNsdWRlcygndGVzdCcpKSB7XG4gICAgY29uc3QgdGVzdFN1bW1hcnkgPSBvdXRwdXQubWF0Y2goL1Rlc3QgU3VpdGUgJyguKyknIChwYXNzZWR8ZmFpbGVkKS9nKSB8fCBbXTtcbiAgICBwYXJzZWQuc3RydWN0dXJlZC50ZXN0X3N1aXRlcyA9IHRlc3RTdW1tYXJ5O1xuICAgIFxuICAgIGNvbnN0IHRlc3RDYXNlcyA9IG91dHB1dC5tYXRjaCgvVGVzdCBDYXNlICctXFxbLitcXF0nIChwYXNzZWR8ZmFpbGVkKS9nKSB8fCBbXTtcbiAgICBwYXJzZWQuc3RydWN0dXJlZC50ZXN0X2Nhc2VzID0gdGVzdENhc2VzLmxlbmd0aDtcbiAgICBcbiAgICBjb25zdCBwYXNzZWRUZXN0cyA9IG91dHB1dC5tYXRjaCgvVGVzdCBDYXNlICctXFxbLitcXF0nIHBhc3NlZC9nKSB8fCBbXTtcbiAgICBjb25zdCBmYWlsZWRUZXN0cyA9IG91dHB1dC5tYXRjaCgvVGVzdCBDYXNlICctXFxbLitcXF0nIGZhaWxlZC9nKSB8fCBbXTtcbiAgICBcbiAgICBwYXJzZWQuc3RydWN0dXJlZC5wYXNzZWRfdGVzdHMgPSBwYXNzZWRUZXN0cy5sZW5ndGg7XG4gICAgcGFyc2VkLnN0cnVjdHVyZWQuZmFpbGVkX3Rlc3RzID0gZmFpbGVkVGVzdHMubGVuZ3RoO1xuICAgIFxuICAgIGlmIChmYWlsZWRUZXN0cy5sZW5ndGggPiAwKSB7XG4gICAgICBwYXJzZWQuaW5zaWdodHMucHVzaChgJHtmYWlsZWRUZXN0cy5sZW5ndGh9IHRlc3RzIGZhaWxlZGApO1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIHBhcnNlZDtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVJbnNpZ2h0cyhwYXJzZWQsIHN1Y2Nlc3MsIGV4aXRDb2RlKSB7XG4gIGNvbnN0IGluc2lnaHRzID0gWy4uLnBhcnNlZC5pbnNpZ2h0c107XG4gIFxuICBpZiAoIXN1Y2Nlc3MpIHtcbiAgICBpbnNpZ2h0cy5wdXNoKGBDb21tYW5kIGZhaWxlZCB3aXRoIGV4aXQgY29kZSAke2V4aXRDb2RlfWApO1xuICAgIFxuICAgIGlmIChwYXJzZWQuZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIGluc2lnaHRzLnB1c2goYEZvdW5kICR7cGFyc2VkLmVycm9ycy5sZW5ndGh9IGNvbXBpbGF0aW9uIGVycm9yc2ApO1xuICAgIH1cbiAgICBcbiAgICBpZiAoZXhpdENvZGUgPT09IDY1KSB7XG4gICAgICBpbnNpZ2h0cy5wdXNoKFwiQnVpbGQgZmFpbGVkIC0gY2hlY2sgY29tcGlsYXRpb24gZXJyb3JzIGFuZCBkZXBlbmRlbmNpZXNcIik7XG4gICAgfVxuICAgIFxuICAgIGlmIChleGl0Q29kZSA9PT0gNzApIHtcbiAgICAgIGluc2lnaHRzLnB1c2goXCJJbnRlcm5hbCBzb2Z0d2FyZSBlcnJvciAtIHRyeSBjbGVhbmluZyBidWlsZCBmb2xkZXJcIik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGluc2lnaHRzLnB1c2goXCJDb21tYW5kIGV4ZWN1dGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgfVxuICBcbiAgaWYgKHBhcnNlZC53YXJuaW5ncy5sZW5ndGggPiAwKSB7XG4gICAgaW5zaWdodHMucHVzaChgJHtwYXJzZWQud2FybmluZ3MubGVuZ3RofSB3YXJuaW5ncyBkZXRlY3RlZCAtIGNvbnNpZGVyIHJldmlld2luZ2ApO1xuICB9XG4gIFxuICByZXR1cm4gaW5zaWdodHM7XG59XG5cbmNvbnN0IHN0ZG91dFBhcnNlZCA9IHBhcnNlWGNvZGVPdXRwdXQoc3Rkb3V0LCBjb21tYW5kKTtcbmNvbnN0IHN0ZGVyclBhcnNlZCA9IHBhcnNlWGNvZGVPdXRwdXQoc3RkZXJyLCBjb21tYW5kKTtcblxuY29uc3QgYWxsSW5zaWdodHMgPSBbXG4gIC4uLmdlbmVyYXRlSW5zaWdodHMoc3Rkb3V0UGFyc2VkLCBzdWNjZXNzLCBleGl0Q29kZSksXG4gIC4uLmdlbmVyYXRlSW5zaWdodHMoc3RkZXJyUGFyc2VkLCBzdWNjZXNzLCBleGl0Q29kZSlcbl07XG5cbmNvbnN0IHJlc3BvbnNlID0ge1xuICBzdWNjZXNzOiBzdWNjZXNzLFxuICBleGl0X2NvZGU6IGV4aXRDb2RlLFxuICBjb21tYW5kX2V4ZWN1dGVkOiBjb21tYW5kLFxuICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgXG4gIG91dHB1dHM6IHtcbiAgICBzdGRvdXQ6IHN0ZG91dCxcbiAgICBzdGRlcnI6IHN0ZGVyclxuICB9LFxuICBcbiAgcGFyc2VkX3Jlc3VsdHM6IHtcbiAgICBzdGRvdXQ6IHN0ZG91dFBhcnNlZCxcbiAgICBzdGRlcnI6IHN0ZGVyclBhcnNlZFxuICB9LFxuICBcbiAgaW5zaWdodHM6IGFsbEluc2lnaHRzLFxuICBcbiAgc3VtbWFyeToge1xuICAgIHRvdGFsX3dhcm5pbmdzOiBzdGRvdXRQYXJzZWQud2FybmluZ3MubGVuZ3RoICsgc3RkZXJyUGFyc2VkLndhcm5pbmdzLmxlbmd0aCxcbiAgICB0b3RhbF9lcnJvcnM6IHN0ZG91dFBhcnNlZC5lcnJvcnMubGVuZ3RoICsgc3RkZXJyUGFyc2VkLmVycm9ycy5sZW5ndGgsXG4gICAgZXhlY3V0aW9uX3RpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICBuZWVkc19hdHRlbnRpb246ICFzdWNjZXNzIHx8IChzdGRvdXRQYXJzZWQuZXJyb3JzLmxlbmd0aCArIHN0ZGVyclBhcnNlZC5lcnJvcnMubGVuZ3RoKSA+IDBcbiAgfSxcbiAgXG4gIG1jcF9yZWFkeTogdHJ1ZSxcbiAgY2xhdWRlX2RpZ2VzdGlibGU6IHRydWUsXG4gIFxuICBzdWdnZXN0ZWRfYWN0aW9uczogc3VjY2VzcyA/IFxuICAgIFtcImNvbnRpbnVlX2RldmVsb3BtZW50XCIsIFwicnVuX3Rlc3RzXCIsIFwiYnVpbGRfbmV4dF9waGFzZVwiXSA6IFxuICAgIFtcImZpeF9lcnJvcnNcIiwgXCJjbGVhbl9idWlsZFwiLCBcImNoZWNrX2RlcGVuZGVuY2llc1wiLCBcInJldmlld19sb2dzXCJdXG59O1xuXG5yZXR1cm4gW3sganNvbjogcmVzcG9uc2UgfV07IgogICAgICB9LAogICAgICAiaWQiOiAiYmRiZTMzMzMtNWFmNC00YWI1LTk4NjMtMWMwN2I1YTEzOGM5IiwKICAgICAgIm5hbWUiOiAiUmVzdWx0IEZvcm1hdHRlciIsCiAgICAgICJ0eXBlIjogIm44bi1ub2Rlcy1iYXNlLmNvZGUiLAogICAgICAidHlwZVZlcnNpb24iOiAyLAogICAgICAicG9zaXRpb24iOiBbCiAgICAgICAgMjQwMCwKICAgICAgICAtMjgwCiAgICAgIF0KICAgIH0sCiAgICB7CiAgICAgICJwYXJhbWV0ZXJzIjogewogICAgICAgICJyZXNwb25kV2l0aCI6ICJqc29uIiwKICAgICAgICAicmVzcG9uc2VCb2R5IjogIj09e3sgJGpzb24gfX0iLAogICAgICAgICJvcHRpb25zIjoge30KICAgICAgfSwKICAgICAgImlkIjogImMwYjNhNmM1LTNjNDQtNDZhYS04MWY5LWM1NWI3ZDYwMWMzYiIsCiAgICAgICJuYW1lIjogIlJlc3BvbnNlIiwKICAgICAgInR5cGUiOiAibjhuLW5vZGVzLWJhc2UucmVzcG9uZFRvV2ViaG9vayIsCiAgICAgICJ0eXBlVmVyc2lvbiI6IDEsCiAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAyNjIwLAogICAgICAgIC0yODAKICAgICAgXQogICAgfSwKICAgIHsKICAgICAgInBhcmFtZXRlcnMiOiB7CiAgICAgICAgImpzQ29kZSI6ICIvLyBTTUFSVCBBTkFMWVNJUyBFTkdJTkUgLSBWZXJzacOzbiBSb2J1c3RhIGNvbiBtYW5lam8gZGUgZXJyb3Jlc1xuLy8gVGlwbzogQ29kZSAoSmF2YVNjcmlwdClcblxuY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuY29uc29sZS5sb2coYFske3RpbWVzdGFtcH1dIFNtYXJ0IEFuYWx5c2lzIEVuZ2luZSAtIFN0YXJ0aW5nIGFuYWx5c2lzLi4uYCk7XG5cbi8vIE9idGVuZXIgZGF0b3MgZGUgZW50cmFkYSBjb24gbWFuZWpvIHNlZ3Vyb1xubGV0IGFuYWx5c2lzUmVzdWx0cztcbnRyeSB7XG4gIGFuYWx5c2lzUmVzdWx0cyA9ICRpbnB1dC5hbGwoKTtcbiAgY29uc29sZS5sb2coYFJlY2VpdmVkICR7YW5hbHlzaXNSZXN1bHRzLmxlbmd0aH0gaW5wdXQocykgZnJvbSBwcmV2aW91cyBub2Rlc2ApO1xufSBjYXRjaCAoZXJyb3IpIHtcbiAgY29uc29sZS5sb2coYEVycm9yIGdldHRpbmcgaW5wdXQgZGF0YTogJHtlcnJvci5tZXNzYWdlfWApO1xuICBhbmFseXNpc1Jlc3VsdHMgPSBbXTtcbn1cblxuLy8gRGVidWc6IE1vc3RyYXIgZXN0cnVjdHVyYSBkZSBkYXRvcyByZWNpYmlkb3NcbmNvbnNvbGUubG9nKFwiPT09IERFQlVHOiBJbnB1dCBEYXRhIFN0cnVjdHVyZSA9PT1cIik7XG5hbmFseXNpc1Jlc3VsdHMuZm9yRWFjaCgocmVzdWx0LCBpbmRleCkgPT4ge1xuICBjb25zb2xlLmxvZyhgSW5wdXQgJHtpbmRleH06YCwge1xuICAgIGhhc0pzb246ICEhcmVzdWx0Py5qc29uLFxuICAgIGpzb25LZXlzOiByZXN1bHQ/Lmpzb24gPyBPYmplY3Qua2V5cyhyZXN1bHQuanNvbikgOiAnTm8gSlNPTicsXG4gICAgaGFzRGF0YTogISFyZXN1bHQsXG4gICAgdHlwZTogdHlwZW9mIHJlc3VsdFxuICB9KTtcbn0pO1xuXG4vLyBJbmljaWFsaXphciBkYXRvcyBjb25zb2xpZGFkb3MgY29uIHZhbG9yZXMgcG9yIGRlZmVjdG9cbmNvbnN0IGNvbnNvbGlkYXRlZERhdGEgPSB7XG4gIGdpdF9jaGFuZ2VzOiBmYWxzZSxcbiAgZGVwZW5kZW5jeV9jaGFuZ2VzOiBmYWxzZSxcbiAgY29udGV4dF9jaGFuZ2VzOiBmYWxzZSxcbiAgcGFja2FnZV9jaGFuZ2VzOiBmYWxzZSxcbiAgbnBtX2NoYW5nZXM6IGZhbHNlLFxuICBwZXJmb3JtYW5jZV9pc3N1ZXM6IGZhbHNlLFxuICBtZW1vcnlfaXNzdWVzOiBmYWxzZSxcbiAgbmV3X2NvbW1pdHM6IDAsXG4gIGNoYW5nZWRfZmlsZXM6IFtdLFxuICByaXNrX2xldmVsOiAnbG93JyxcbiAgdG90YWxfaW5wdXRzOiBhbmFseXNpc1Jlc3VsdHMubGVuZ3RoLFxuICB2YWxpZF9pbnB1dHM6IDBcbn07XG5cbi8vIFByb2Nlc2FyIGNhZGEgcmVzdWx0YWRvIGRlIG1hbmVyYSBzZWd1cmFcbmlmIChhbmFseXNpc1Jlc3VsdHMubGVuZ3RoID4gMCkge1xuICBhbmFseXNpc1Jlc3VsdHMuZm9yRWFjaCgocmVzdWx0LCBpbmRleCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBWZXJpZmljYXIgcXVlIHJlc3VsdCBleGlzdGUgeSB0aWVuZSBlc3RydWN0dXJhIHbDoWxpZGFcbiAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBJbnB1dCAke2luZGV4fTogbnVsbCBvciB1bmRlZmluZWQgcmVzdWx0YCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gRXh0cmFlciBkYXRvcyBkZSBtYW5lcmEgc2VndXJhXG4gICAgICBjb25zdCBkYXRhID0gcmVzdWx0Lmpzb24gfHwgcmVzdWx0IHx8IHt9O1xuICAgICAgY29uc29sZS5sb2coYFByb2Nlc3NpbmcgaW5wdXQgJHtpbmRleH06YCwgT2JqZWN0LmtleXMoZGF0YSkuc2xpY2UoMCwgMTApKTsgLy8gU29sbyBwcmltZXJhcyAxMCBrZXlzXG4gICAgICBcbiAgICAgIGNvbnNvbGlkYXRlZERhdGEudmFsaWRfaW5wdXRzKys7XG5cbiAgICAgIC8vIERldGVjdGFyIGNhbWJpb3MgZW4gR2l0IChtYW5lam8gc2VndXJvKVxuICAgICAgaWYgKGRhdGEuY29tbWl0c19haGVhZCAmJiB0eXBlb2YgZGF0YS5jb21taXRzX2FoZWFkID09PSAnbnVtYmVyJyAmJiBkYXRhLmNvbW1pdHNfYWhlYWQgPiAwKSB7XG4gICAgICAgIGNvbnNvbGlkYXRlZERhdGEuZ2l0X2NoYW5nZXMgPSB0cnVlO1xuICAgICAgICBjb25zb2xpZGF0ZWREYXRhLm5ld19jb21taXRzICs9IGRhdGEuY29tbWl0c19haGVhZDtcbiAgICAgICAgY29uc29sZS5sb2coYCAgR2l0IGNoYW5nZXMgZGV0ZWN0ZWQ6ICR7ZGF0YS5jb21taXRzX2FoZWFkfSBjb21taXRzIGFoZWFkYCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRhLmNvbW1pdHNfYmVoaW5kICYmIHR5cGVvZiBkYXRhLmNvbW1pdHNfYmVoaW5kID09PSAnbnVtYmVyJyAmJiBkYXRhLmNvbW1pdHNfYmVoaW5kID4gMCkge1xuICAgICAgICBjb25zb2xpZGF0ZWREYXRhLmdpdF9jaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgY29uc29sZS5sb2coYCAgR2l0IHN5bmMgbmVlZGVkOiAke2RhdGEuY29tbWl0c19iZWhpbmR9IGNvbW1pdHMgYmVoaW5kYCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRhLnVuY29tbWl0dGVkX2NoYW5nZXMgPT09IHRydWUgfHwgZGF0YS5oYXNfdW5jb21taXR0ZWRfY2hhbmdlcyA9PT0gdHJ1ZSkge1xuICAgICAgICBjb25zb2xpZGF0ZWREYXRhLmdpdF9jaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgY29uc29sZS5sb2coYCAgVW5jb21taXR0ZWQgY2hhbmdlcyBkZXRlY3RlZGApO1xuICAgICAgfVxuXG4gICAgICAvLyBEZXRlY3RhciBjYW1iaW9zIGVuIGFyY2hpdm9zIChtYW5lam8gc2VndXJvKVxuICAgICAgaWYgKGRhdGEubW9kaWZpZWRfZmlsZXMgJiYgQXJyYXkuaXNBcnJheShkYXRhLm1vZGlmaWVkX2ZpbGVzKSAmJiBkYXRhLm1vZGlmaWVkX2ZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29saWRhdGVkRGF0YS5jaGFuZ2VkX2ZpbGVzID0gWy4uLmNvbnNvbGlkYXRlZERhdGEuY2hhbmdlZF9maWxlcywgLi4uZGF0YS5tb2RpZmllZF9maWxlc107XG4gICAgICAgIGNvbnNvbGUubG9nKGAgIE1vZGlmaWVkIGZpbGVzOiAke2RhdGEubW9kaWZpZWRfZmlsZXMubGVuZ3RofWApO1xuICAgICAgICBcbiAgICAgICAgLy8gQW5hbGl6YXIgdGlwb3MgZGUgYXJjaGl2b3NcbiAgICAgICAgY29uc3Qgc3dpZnRGaWxlcyA9IGRhdGEubW9kaWZpZWRfZmlsZXMuZmlsdGVyKGYgPT4gZiAmJiB0eXBlb2YgZiA9PT0gJ3N0cmluZycgJiYgZi5lbmRzV2l0aCgnLnN3aWZ0JykpO1xuICAgICAgICBjb25zdCB0ZXN0RmlsZXMgPSBkYXRhLm1vZGlmaWVkX2ZpbGVzLmZpbHRlcihmID0+IGYgJiYgdHlwZW9mIGYgPT09ICdzdHJpbmcnICYmIGYuaW5jbHVkZXMoJ1Rlc3QnKSk7XG4gICAgICAgIGNvbnN0IGNvbmZpZ0ZpbGVzID0gZGF0YS5tb2RpZmllZF9maWxlcy5maWx0ZXIoZiA9PiBmICYmIHR5cGVvZiBmID09PSAnc3RyaW5nJyAmJiAoZi5pbmNsdWRlcygnLnBsaXN0JykgfHwgZi5pbmNsdWRlcygnLnhjY29uZmlnJykpKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzd2lmdEZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zb2xpZGF0ZWREYXRhLmNvbnRleHRfY2hhbmdlcyA9IHRydWU7XG4gICAgICAgICAgY29uc29sZS5sb2coYCAgICBTd2lmdCBmaWxlcyBjaGFuZ2VkOiAke3N3aWZ0RmlsZXMubGVuZ3RofWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ZXN0RmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnNvbGlkYXRlZERhdGEucmlza19sZXZlbCA9ICdtZWRpdW0nO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgICAgVGVzdCBmaWxlcyBjaGFuZ2VkOiAke3Rlc3RGaWxlcy5sZW5ndGh9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZ0ZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zb2xpZGF0ZWREYXRhLnJpc2tfbGV2ZWwgPSAnaGlnaCc7XG4gICAgICAgICAgY29uc29sZS5sb2coYCAgICBDb25maWcgZmlsZXMgY2hhbmdlZDogJHtjb25maWdGaWxlcy5sZW5ndGh9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRGV0ZWN0YXIgY2FtYmlvcyBlbiBkZXBlbmRlbmNpYXMgKG1hbmVqbyBzZWd1cm8pXG4gICAgICBpZiAoZGF0YS5wYWNrYWdlX3Jlc29sdmVkX2NoYW5nZWQgPT09IHRydWUgfHwgZGF0YS5wYWNrYWdlX3N3aWZ0X2NoYW5nZWQgPT09IHRydWUpIHtcbiAgICAgICAgY29uc29saWRhdGVkRGF0YS5wYWNrYWdlX2NoYW5nZXMgPSB0cnVlO1xuICAgICAgICBjb25zb2xpZGF0ZWREYXRhLnJpc2tfbGV2ZWwgPSAnaGlnaCc7XG4gICAgICAgIGNvbnNvbGUubG9nKGAgIFBhY2thZ2UgZGVwZW5kZW5jaWVzIGNoYW5nZWRgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGEucGFja2FnZV9sb2NrX2NoYW5nZWQgPT09IHRydWUgfHwgZGF0YS5ucG1fYXVkaXRfaXNzdWVzID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnNvbGlkYXRlZERhdGEubnBtX2NoYW5nZXMgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmxvZyhgICBOUE0gZGVwZW5kZW5jaWVzIGNoYW5nZWRgKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGV0ZWN0YXIgcHJvYmxlbWFzIGRlIHBlcmZvcm1hbmNlIChtYW5lam8gc2VndXJvKVxuICAgICAgaWYgKGRhdGEuYnVpbGRfdGltZV9kZWdyYWRhdGlvbiA9PT0gdHJ1ZSB8fCBkYXRhLm1lbW9yeV91c2FnZV9oaWdoID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnNvbGlkYXRlZERhdGEucGVyZm9ybWFuY2VfaXNzdWVzID0gdHJ1ZTtcbiAgICAgICAgY29uc29sZS5sb2coYCAgUGVyZm9ybWFuY2UgaXNzdWVzIGRldGVjdGVkYCk7XG4gICAgICB9XG5cbiAgICB9IGNhdGNoIChwcm9jZXNzaW5nRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBwcm9jZXNzaW5nIGlucHV0ICR7aW5kZXh9OiAke3Byb2Nlc3NpbmdFcnJvci5tZXNzYWdlfWApO1xuICAgICAgLy8gQ29udGludWFyIGNvbiBlbCBzaWd1aWVudGUgaW5wdXQgZW4gY2FzbyBkZSBlcnJvclxuICAgIH1cbiAgfSk7XG59IGVsc2Uge1xuICBjb25zb2xlLmxvZyhcIk5vIGlucHV0IGRhdGEgcmVjZWl2ZWQgZnJvbSBwcmV2aW91cyBub2Rlc1wiKTtcbn1cblxuY29uc29sZS5sb2coXCI9PT0gQ09OU09MSURBVElPTiBTVU1NQVJZID09PVwiKTtcbmNvbnNvbGUubG9nKGBWYWxpZCBpbnB1dHMgcHJvY2Vzc2VkOiAke2NvbnNvbGlkYXRlZERhdGEudmFsaWRfaW5wdXRzfS8ke2NvbnNvbGlkYXRlZERhdGEudG90YWxfaW5wdXRzfWApO1xuY29uc29sZS5sb2coYEdpdCBjaGFuZ2VzOiAke2NvbnNvbGlkYXRlZERhdGEuZ2l0X2NoYW5nZXN9YCk7XG5jb25zb2xlLmxvZyhgTmV3IGNvbW1pdHM6ICR7Y29uc29saWRhdGVkRGF0YS5uZXdfY29tbWl0c31gKTtcbmNvbnNvbGUubG9nKGBSaXNrIGxldmVsOiAke2NvbnNvbGlkYXRlZERhdGEucmlza19sZXZlbH1gKTtcbmNvbnNvbGUubG9nKGBDaGFuZ2VkIGZpbGVzOiAke2NvbnNvbGlkYXRlZERhdGEuY2hhbmdlZF9maWxlcy5sZW5ndGh9YCk7XG5cbi8vIEzDk0dJQ0EgREUgREVDSVNJw5NOIElOVEVMSUdFTlRFXG5jb25zdCBhY3Rpb25zID0gW107XG5cbi8vIPCflKggQlVJTEQ6IFNpIGhheSBjYW1iaW9zIHNpZ25pZmljYXRpdm9zXG5pZiAoY29uc29saWRhdGVkRGF0YS5naXRfY2hhbmdlcyB8fCBjb25zb2xpZGF0ZWREYXRhLmNvbnRleHRfY2hhbmdlcyB8fCBjb25zb2xpZGF0ZWREYXRhLnBhY2thZ2VfY2hhbmdlcykge1xuICBjb25zdCBidWlsZEFjdGlvbiA9IHtcbiAgICBwcmlvcml0eTogMSxcbiAgICBjb21tYW5kX3R5cGU6IFwiYnVpbGRcIixcbiAgICBhY3Rpb246IGNvbnNvbGlkYXRlZERhdGEucGFja2FnZV9jaGFuZ2VzID8gXCJjbGVhbl9idWlsZF9mb2xkZXJcIiA6IFwiYnVpbGRfcHJvamVjdFwiLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIHByb2plY3RfbmFtZTogXCJDb3J0ZXNcIixcbiAgICAgIHNjaGVtZTogXCJDb3J0ZXNcIixcbiAgICAgIGNvbmZpZzogXCJEZWJ1Z1wiXG4gICAgfSxcbiAgICByZWFzb246IGBDaGFuZ2VzIGRldGVjdGVkOiBHaXQoJHtjb25zb2xpZGF0ZWREYXRhLmdpdF9jaGFuZ2VzfSkgQ29udGV4dCgke2NvbnNvbGlkYXRlZERhdGEuY29udGV4dF9jaGFuZ2VzfSkgUGFja2FnZXMoJHtjb25zb2xpZGF0ZWREYXRhLnBhY2thZ2VfY2hhbmdlc30pYCxcbiAgICByaXNrX2xldmVsOiBjb25zb2xpZGF0ZWREYXRhLnJpc2tfbGV2ZWxcbiAgfTtcbiAgXG4gIGFjdGlvbnMucHVzaChidWlsZEFjdGlvbik7XG4gIGNvbnNvbGUubG9nKGDinIUgQnVpbGQgYWN0aW9uIHBsYW5uZWQ6ICR7YnVpbGRBY3Rpb24uYWN0aW9ufWApO1xufVxuXG4vLyDwn6eqIFRFU1RJTkc6IFNpIGVsIHJpZXNnbyBlcyBtZWRpbyBvIGFsdG9cbmlmIChjb25zb2xpZGF0ZWREYXRhLnJpc2tfbGV2ZWwgIT09ICdsb3cnICYmIGNvbnNvbGlkYXRlZERhdGEuY29udGV4dF9jaGFuZ2VzKSB7XG4gIGNvbnN0IHRlc3RBY3Rpb24gPSB7XG4gICAgcHJpb3JpdHk6IDIsXG4gICAgY29tbWFuZF90eXBlOiBcInRlc3RpbmdcIixcbiAgICBhY3Rpb246IFwicnVuX3VuaXRfdGVzdHNcIixcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICBwcm9qZWN0X25hbWU6IFwiQ29ydGVzXCIsXG4gICAgICBzY2hlbWU6IFwiQ29ydGVzXCIsXG4gICAgICBkZXN0aW5hdGlvbjogXCJwbGF0Zm9ybT1pT1MgU2ltdWxhdG9yLG5hbWU9aVBob25lIDE1IFBybyxPUz0xNy4yXCIsXG4gICAgICB0YXJnZXQ6IFwiQ29ydGVzXCJcbiAgICB9LFxuICAgIHJlYXNvbjogYFJpc2sgbGV2ZWw6ICR7Y29uc29saWRhdGVkRGF0YS5yaXNrX2xldmVsfSwgQ29udGV4dCBjaGFuZ2VzIGRldGVjdGVkYCxcbiAgICByaXNrX2xldmVsOiBjb25zb2xpZGF0ZWREYXRhLnJpc2tfbGV2ZWxcbiAgfTtcbiAgXG4gIGFjdGlvbnMucHVzaCh0ZXN0QWN0aW9uKTtcbiAgY29uc29sZS5sb2coYOKchSBUZXN0IGFjdGlvbiBwbGFubmVkOiAke3Rlc3RBY3Rpb24uYWN0aW9ufWApO1xufVxuXG4vLyDwn5SNIEFOQUxZU0lTOiBTaSBoYXkgcHJvYmxlbWFzIGRlIHBlcmZvcm1hbmNlIG8gZXMgdmllcm5lcyAoYW7DoWxpc2lzIHNlbWFuYWwpXG5jb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuY29uc3QgaXNGcmlkYXkgPSBub3cuZ2V0RGF5KCkgPT09IDU7XG5jb25zdCBpczVQTSA9IG5vdy5nZXRIb3VycygpID09PSAxNztcbmNvbnN0IG5lZWRzQW5hbHlzaXMgPSBjb25zb2xpZGF0ZWREYXRhLnBlcmZvcm1hbmNlX2lzc3VlcyB8fCAoaXNGcmlkYXkgJiYgaXM1UE0pO1xuXG5pZiAobmVlZHNBbmFseXNpcykge1xuICBjb25zdCBhbmFseXNpc0FjdGlvbiA9IHtcbiAgICBwcmlvcml0eTogMyxcbiAgICBjb21tYW5kX3R5cGU6IFwiYW5hbHlzaXNcIixcbiAgICBhY3Rpb246IFwiYnVpbGRfdGltZV9hbmFseXNpc19kZXRhaWxlZFwiLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIHByb2plY3RfbmFtZTogXCJDb3J0ZXNcIixcbiAgICAgIHNjaGVtZTogXCJDb3J0ZXNcIlxuICAgIH0sXG4gICAgcmVhc29uOiBjb25zb2xpZGF0ZWREYXRhLnBlcmZvcm1hbmNlX2lzc3VlcyA/IFwiUGVyZm9ybWFuY2UgaXNzdWVzIGRldGVjdGVkXCIgOiBcIldlZWtseSBhbmFseXNpcyAoRnJpZGF5IDVQTSlcIixcbiAgICByaXNrX2xldmVsOiBjb25zb2xpZGF0ZWREYXRhLnBlcmZvcm1hbmNlX2lzc3VlcyA/ICdoaWdoJyA6ICdsb3cnXG4gIH07XG4gIFxuICBhY3Rpb25zLnB1c2goYW5hbHlzaXNBY3Rpb24pO1xuICBjb25zb2xlLmxvZyhg4pyFIEFuYWx5c2lzIGFjdGlvbiBwbGFubmVkOiAke2FuYWx5c2lzQWN0aW9uLmFjdGlvbn1gKTtcbn1cblxuLy8g8J+TiiBSRVBPUlRTOiBTaSBubyBoYXkgY2FtYmlvcyBwZXJvIHF1ZXJlbW9zIHZlcmlmaWNhciBlc3RhZG9cbmlmIChhY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICBjb25zdCBzdGF0dXNBY3Rpb24gPSB7XG4gICAgcHJpb3JpdHk6IDQsXG4gICAgY29tbWFuZF90eXBlOiBcInByb2plY3RcIixcbiAgICBhY3Rpb246IFwidmVyc2lvbl9pbmZvXCIsXG4gICAgcGFyYW1ldGVyczoge30sXG4gICAgcmVhc29uOiBcIk5vIGNoYW5nZXMgZGV0ZWN0ZWQgLSByb3V0aW5lIHN5c3RlbSBjaGVja1wiLFxuICAgIHJpc2tfbGV2ZWw6ICdsb3cnXG4gIH07XG4gIFxuICBhY3Rpb25zLnB1c2goc3RhdHVzQWN0aW9uKTtcbiAgY29uc29sZS5sb2coYOKchSBTdGF0dXMgY2hlY2sgcGxhbm5lZDogJHtzdGF0dXNBY3Rpb24uYWN0aW9ufWApO1xufVxuXG5jb25zb2xlLmxvZyhgXFxu8J+agCBGSU5BTCBERUNJU0lPTjogJHthY3Rpb25zLmxlbmd0aH0gYWN0aW9uKHMpIHBsYW5uZWRgKTtcblxuaWYgKGFjdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gIGNvbnNvbGUubG9nKFwi4pqg77iPIE5vIGFjdGlvbnMgcGxhbm5lZCAtIHRoaXMgc2hvdWxkbid0IGhhcHBlbiBkdWUgdG8gZmFsbGJhY2sgc3RhdHVzIGNoZWNrXCIpO1xuICByZXR1cm4gW3sgXG4gICAganNvbjogeyBcbiAgICAgIG5vX2FjdGlvbl9uZWVkZWQ6IHRydWUsIFxuICAgICAgcmVhc29uOiBcIlN5c3RlbSBzdGFibGUsIG5vIHNpZ25pZmljYW50IGNoYW5nZXMgZGV0ZWN0ZWRcIixcbiAgICAgIHRpbWVzdGFtcDogdGltZXN0YW1wLFxuICAgICAgYW5hbHlzaXM6IGNvbnNvbGlkYXRlZERhdGEsXG4gICAgICBkZWJ1Z19pbmZvOiB7XG4gICAgICAgIHRvdGFsX2lucHV0czogYW5hbHlzaXNSZXN1bHRzLmxlbmd0aCxcbiAgICAgICAgdmFsaWRfaW5wdXRzOiBjb25zb2xpZGF0ZWREYXRhLnZhbGlkX2lucHV0c1xuICAgICAgfVxuICAgIH0gXG4gIH1dO1xufVxuXG4vLyBPcmRlbmFyIGFjY2lvbmVzIHBvciBwcmlvcmlkYWQgeSBwcmVwYXJhciBwYXJhIGVqZWN1Y2nDs25cbmFjdGlvbnMuc29ydCgoYSwgYikgPT4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHkpO1xuXG5jb25zdCBmaW5hbEFjdGlvbnMgPSBhY3Rpb25zLm1hcCgoYWN0aW9uLCBpbmRleCkgPT4gKHtcbiAgLi4uYWN0aW9uLFxuICBleGVjdXRpb25fb3JkZXI6IGluZGV4ICsgMSxcbiAgdG90YWxfYWN0aW9uczogYWN0aW9ucy5sZW5ndGgsXG4gIHRpbWVzdGFtcDogdGltZXN0YW1wLFxuICBhdXRvX3RyaWdnZXJlZDogdHJ1ZSxcbiAgYW5hbHlzaXNfc3VtbWFyeTogY29uc29saWRhdGVkRGF0YVxufSkpO1xuXG5jb25zb2xlLmxvZyhcIj09PSBBQ1RJT05TIFRPIEVYRUNVVEUgPT09XCIpO1xuZmluYWxBY3Rpb25zLmZvckVhY2goKGFjdGlvbiwgaW5kZXgpID0+IHtcbiAgY29uc29sZS5sb2coYCR7aW5kZXggKyAxfS4gJHthY3Rpb24uY29tbWFuZF90eXBlfS4ke2FjdGlvbi5hY3Rpb259IC0gJHthY3Rpb24ucmVhc29ufWApO1xufSk7XG5cbnJldHVybiBmaW5hbEFjdGlvbnMubWFwKGFjdGlvbiA9PiAoeyBqc29uOiBhY3Rpb24gfSkpOyIKICAgICAgfSwKICAgICAgInR5cGUiOiAibjhuLW5vZGVzLWJhc2UuY29kZSIsCiAgICAgICJ0eXBlVmVyc2lvbiI6IDIsCiAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAxNzIwLAogICAgICAgIC02NDAKICAgICAgXSwKICAgICAgImlkIjogImQxMGM0ZjYwLWFkMjAtNDYxZi05MzI4LTg0ZjRhMjdhYjliNyIsCiAgICAgICJuYW1lIjogIlNtYXJ0IEFuYWx5c2lzIEVuZ2luZSIsCiAgICAgICJyZXRyeU9uRmFpbCI6IHRydWUsCiAgICAgICJ3YWl0QmV0d2VlblRyaWVzIjogNTAwMCwKICAgICAgIm1heFRyaWVzIjogMiwKICAgICAgImFsd2F5c091dHB1dERhdGEiOiB0cnVlCiAgICB9LAogICAgewogICAgICAicGFyYW1ldGVycyI6IHsKICAgICAgICAianNDb2RlIjogIi8vIFNNQVJUIEFOQUxZU0lTIEVOR0lORSAtIFZlcnNpw7NuIFJvYnVzdGEgY29uIG1hbmVqbyBkZSBlcnJvcmVzXG4vLyBUaXBvOiBDb2RlIChKYXZhU2NyaXB0KVxuXG5jb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5jb25zb2xlLmxvZyhgWyR7dGltZXN0YW1wfV0gU21hcnQgQW5hbHlzaXMgRW5naW5lIC0gU3RhcnRpbmcgYW5hbHlzaXMuLi5gKTtcblxuLy8gT2J0ZW5lciBkYXRvcyBkZSBlbnRyYWRhIGNvbiBtYW5lam8gc2VndXJvXG5sZXQgYW5hbHlzaXNSZXN1bHRzO1xudHJ5IHtcbiAgYW5hbHlzaXNSZXN1bHRzID0gJGlucHV0LmFsbCgpO1xuICBjb25zb2xlLmxvZyhgUmVjZWl2ZWQgJHthbmFseXNpc1Jlc3VsdHMubGVuZ3RofSBpbnB1dChzKSBmcm9tIHByZXZpb3VzIG5vZGVzYCk7XG59IGNhdGNoIChlcnJvcikge1xuICBjb25zb2xlLmxvZyhgRXJyb3IgZ2V0dGluZyBpbnB1dCBkYXRhOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIGFuYWx5c2lzUmVzdWx0cyA9IFtdO1xufVxuXG4vLyBEZWJ1ZzogTW9zdHJhciBlc3RydWN0dXJhIGRlIGRhdG9zIHJlY2liaWRvc1xuY29uc29sZS5sb2coXCI9PT0gREVCVUc6IElucHV0IERhdGEgU3RydWN0dXJlID09PVwiKTtcbmFuYWx5c2lzUmVzdWx0cy5mb3JFYWNoKChyZXN1bHQsIGluZGV4KSA9PiB7XG4gIGNvbnNvbGUubG9nKGBJbnB1dCAke2luZGV4fTpgLCB7XG4gICAgaGFzSnNvbjogISFyZXN1bHQ/Lmpzb24sXG4gICAganNvbktleXM6IHJlc3VsdD8uanNvbiA/IE9iamVjdC5rZXlzKHJlc3VsdC5qc29uKSA6ICdObyBKU09OJyxcbiAgICBoYXNEYXRhOiAhIXJlc3VsdCxcbiAgICB0eXBlOiB0eXBlb2YgcmVzdWx0XG4gIH0pO1xufSk7XG5cbi8vIEluaWNpYWxpemFyIGRhdG9zIGNvbnNvbGlkYWRvcyBjb24gdmFsb3JlcyBwb3IgZGVmZWN0b1xuY29uc3QgY29uc29saWRhdGVkRGF0YSA9IHtcbiAgZ2l0X2NoYW5nZXM6IGZhbHNlLFxuICBkZXBlbmRlbmN5X2NoYW5nZXM6IGZhbHNlLFxuICBjb250ZXh0X2NoYW5nZXM6IGZhbHNlLFxuICBwYWNrYWdlX2NoYW5nZXM6IGZhbHNlLFxuICBucG1fY2hhbmdlczogZmFsc2UsXG4gIHBlcmZvcm1hbmNlX2lzc3VlczogZmFsc2UsXG4gIG1lbW9yeV9pc3N1ZXM6IGZhbHNlLFxuICBuZXdfY29tbWl0czogMCxcbiAgY2hhbmdlZF9maWxlczogW10sXG4gIHJpc2tfbGV2ZWw6ICdsb3cnLFxuICB0b3RhbF9pbnB1dHM6IGFuYWx5c2lzUmVzdWx0cy5sZW5ndGgsXG4gIHZhbGlkX2lucHV0czogMFxufTtcblxuLy8gUHJvY2VzYXIgY2FkYSByZXN1bHRhZG8gZGUgbWFuZXJhIHNlZ3VyYVxuaWYgKGFuYWx5c2lzUmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gIGFuYWx5c2lzUmVzdWx0cy5mb3JFYWNoKChyZXN1bHQsIGluZGV4KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFZlcmlmaWNhciBxdWUgcmVzdWx0IGV4aXN0ZSB5IHRpZW5lIGVzdHJ1Y3R1cmEgdsOhbGlkYVxuICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgY29uc29sZS5sb2coYElucHV0ICR7aW5kZXh9OiBudWxsIG9yIHVuZGVmaW5lZCByZXN1bHRgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBFeHRyYWVyIGRhdG9zIGRlIG1hbmVyYSBzZWd1cmFcbiAgICAgIGNvbnN0IGRhdGEgPSByZXN1bHQuanNvbiB8fCByZXN1bHQgfHwge307XG4gICAgICBjb25zb2xlLmxvZyhgUHJvY2Vzc2luZyBpbnB1dCAke2luZGV4fTpgLCBPYmplY3Qua2V5cyhkYXRhKS5zbGljZSgwLCAxMCkpOyAvLyBTb2xvIHByaW1lcmFzIDEwIGtleXNcbiAgICAgIFxuICAgICAgY29uc29saWRhdGVkRGF0YS52YWxpZF9pbnB1dHMrKztcblxuICAgICAgLy8gRGV0ZWN0YXIgY2FtYmlvcyBlbiBHaXQgKG1hbmVqbyBzZWd1cm8pXG4gICAgICBpZiAoZGF0YS5jb21taXRzX2FoZWFkICYmIHR5cGVvZiBkYXRhLmNvbW1pdHNfYWhlYWQgPT09ICdudW1iZXInICYmIGRhdGEuY29tbWl0c19haGVhZCA+IDApIHtcbiAgICAgICAgY29uc29saWRhdGVkRGF0YS5naXRfY2hhbmdlcyA9IHRydWU7XG4gICAgICAgIGNvbnNvbGlkYXRlZERhdGEubmV3X2NvbW1pdHMgKz0gZGF0YS5jb21taXRzX2FoZWFkO1xuICAgICAgICBjb25zb2xlLmxvZyhgICBHaXQgY2hhbmdlcyBkZXRlY3RlZDogJHtkYXRhLmNvbW1pdHNfYWhlYWR9IGNvbW1pdHMgYWhlYWRgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGEuY29tbWl0c19iZWhpbmQgJiYgdHlwZW9mIGRhdGEuY29tbWl0c19iZWhpbmQgPT09ICdudW1iZXInICYmIGRhdGEuY29tbWl0c19iZWhpbmQgPiAwKSB7XG4gICAgICAgIGNvbnNvbGlkYXRlZERhdGEuZ2l0X2NoYW5nZXMgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmxvZyhgICBHaXQgc3luYyBuZWVkZWQ6ICR7ZGF0YS5jb21taXRzX2JlaGluZH0gY29tbWl0cyBiZWhpbmRgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGEudW5jb21taXR0ZWRfY2hhbmdlcyA9PT0gdHJ1ZSB8fCBkYXRhLmhhc191bmNvbW1pdHRlZF9jaGFuZ2VzID09PSB0cnVlKSB7XG4gICAgICAgIGNvbnNvbGlkYXRlZERhdGEuZ2l0X2NoYW5nZXMgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmxvZyhgICBVbmNvbW1pdHRlZCBjaGFuZ2VzIGRldGVjdGVkYCk7XG4gICAgICB9XG5cbiAgICAgIC8vIERldGVjdGFyIGNhbWJpb3MgZW4gYXJjaGl2b3MgKG1hbmVqbyBzZWd1cm8pXG4gICAgICBpZiAoZGF0YS5tb2RpZmllZF9maWxlcyAmJiBBcnJheS5pc0FycmF5KGRhdGEubW9kaWZpZWRfZmlsZXMpICYmIGRhdGEubW9kaWZpZWRfZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zb2xpZGF0ZWREYXRhLmNoYW5nZWRfZmlsZXMgPSBbLi4uY29uc29saWRhdGVkRGF0YS5jaGFuZ2VkX2ZpbGVzLCAuLi5kYXRhLm1vZGlmaWVkX2ZpbGVzXTtcbiAgICAgICAgY29uc29sZS5sb2coYCAgTW9kaWZpZWQgZmlsZXM6ICR7ZGF0YS5tb2RpZmllZF9maWxlcy5sZW5ndGh9YCk7XG4gICAgICAgIFxuICAgICAgICAvLyBBbmFsaXphciB0aXBvcyBkZSBhcmNoaXZvc1xuICAgICAgICBjb25zdCBzd2lmdEZpbGVzID0gZGF0YS5tb2RpZmllZF9maWxlcy5maWx0ZXIoZiA9PiBmICYmIHR5cGVvZiBmID09PSAnc3RyaW5nJyAmJiBmLmVuZHNXaXRoKCcuc3dpZnQnKSk7XG4gICAgICAgIGNvbnN0IHRlc3RGaWxlcyA9IGRhdGEubW9kaWZpZWRfZmlsZXMuZmlsdGVyKGYgPT4gZiAmJiB0eXBlb2YgZiA9PT0gJ3N0cmluZycgJiYgZi5pbmNsdWRlcygnVGVzdCcpKTtcbiAgICAgICAgY29uc3QgY29uZmlnRmlsZXMgPSBkYXRhLm1vZGlmaWVkX2ZpbGVzLmZpbHRlcihmID0+IGYgJiYgdHlwZW9mIGYgPT09ICdzdHJpbmcnICYmIChmLmluY2x1ZGVzKCcucGxpc3QnKSB8fCBmLmluY2x1ZGVzKCcueGNjb25maWcnKSkpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHN3aWZ0RmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnNvbGlkYXRlZERhdGEuY29udGV4dF9jaGFuZ2VzID0gdHJ1ZTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgICAgIFN3aWZ0IGZpbGVzIGNoYW5nZWQ6ICR7c3dpZnRGaWxlcy5sZW5ndGh9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRlc3RGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc29saWRhdGVkRGF0YS5yaXNrX2xldmVsID0gJ21lZGl1bSc7XG4gICAgICAgICAgY29uc29sZS5sb2coYCAgICBUZXN0IGZpbGVzIGNoYW5nZWQ6ICR7dGVzdEZpbGVzLmxlbmd0aH1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZmlnRmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnNvbGlkYXRlZERhdGEucmlza19sZXZlbCA9ICdoaWdoJztcbiAgICAgICAgICBjb25zb2xlLmxvZyhgICAgIENvbmZpZyBmaWxlcyBjaGFuZ2VkOiAke2NvbmZpZ0ZpbGVzLmxlbmd0aH1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBEZXRlY3RhciBjYW1iaW9zIGVuIGRlcGVuZGVuY2lhcyAobWFuZWpvIHNlZ3VybylcbiAgICAgIGlmIChkYXRhLnBhY2thZ2VfcmVzb2x2ZWRfY2hhbmdlZCA9PT0gdHJ1ZSB8fCBkYXRhLnBhY2thZ2Vfc3dpZnRfY2hhbmdlZCA9PT0gdHJ1ZSkge1xuICAgICAgICBjb25zb2xpZGF0ZWREYXRhLnBhY2thZ2VfY2hhbmdlcyA9IHRydWU7XG4gICAgICAgIGNvbnNvbGlkYXRlZERhdGEucmlza19sZXZlbCA9ICdoaWdoJztcbiAgICAgICAgY29uc29sZS5sb2coYCAgUGFja2FnZSBkZXBlbmRlbmNpZXMgY2hhbmdlZGApO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS5wYWNrYWdlX2xvY2tfY2hhbmdlZCA9PT0gdHJ1ZSB8fCBkYXRhLm5wbV9hdWRpdF9pc3N1ZXMgPT09IHRydWUpIHtcbiAgICAgICAgY29uc29saWRhdGVkRGF0YS5ucG1fY2hhbmdlcyA9IHRydWU7XG4gICAgICAgIGNvbnNvbGUubG9nKGAgIE5QTSBkZXBlbmRlbmNpZXMgY2hhbmdlZGApO1xuICAgICAgfVxuXG4gICAgICAvLyBEZXRlY3RhciBwcm9ibGVtYXMgZGUgcGVyZm9ybWFuY2UgKG1hbmVqbyBzZWd1cm8pXG4gICAgICBpZiAoZGF0YS5idWlsZF90aW1lX2RlZ3JhZGF0aW9uID09PSB0cnVlIHx8IGRhdGEubWVtb3J5X3VzYWdlX2hpZ2ggPT09IHRydWUpIHtcbiAgICAgICAgY29uc29saWRhdGVkRGF0YS5wZXJmb3JtYW5jZV9pc3N1ZXMgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmxvZyhgICBQZXJmb3JtYW5jZSBpc3N1ZXMgZGV0ZWN0ZWRgKTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKHByb2Nlc3NpbmdFcnJvcikge1xuICAgICAgY29uc29sZS5sb2coYEVycm9yIHByb2Nlc3NpbmcgaW5wdXQgJHtpbmRleH06ICR7cHJvY2Vzc2luZ0Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAvLyBDb250aW51YXIgY29uIGVsIHNpZ3VpZW50ZSBpbnB1dCBlbiBjYXNvIGRlIGVycm9yXG4gICAgfVxuICB9KTtcbn0gZWxzZSB7XG4gIGNvbnNvbGUubG9nKFwiTm8gaW5wdXQgZGF0YSByZWNlaXZlZCBmcm9tIHByZXZpb3VzIG5vZGVzXCIpO1xufVxuXG5jb25zb2xlLmxvZyhcIj09PSBDT05TT0xJREFUSU9OIFNVTU1BUlkgPT09XCIpO1xuY29uc29sZS5sb2coYFZhbGlkIGlucHV0cyBwcm9jZXNzZWQ6ICR7Y29uc29saWRhdGVkRGF0YS52YWxpZF9pbnB1dHN9LyR7Y29uc29saWRhdGVkRGF0YS50b3RhbF9pbnB1dHN9YCk7XG5jb25zb2xlLmxvZyhgR2l0IGNoYW5nZXM6ICR7Y29uc29saWRhdGVkRGF0YS5naXRfY2hhbmdlc31gKTtcbmNvbnNvbGUubG9nKGBOZXcgY29tbWl0czogJHtjb25zb2xpZGF0ZWREYXRhLm5ld19jb21taXRzfWApO1xuY29uc29sZS5sb2coYFJpc2sgbGV2ZWw6ICR7Y29uc29saWRhdGVkRGF0YS5yaXNrX2xldmVsfWApO1xuY29uc29sZS5sb2coYENoYW5nZWQgZmlsZXM6ICR7Y29uc29saWRhdGVkRGF0YS5jaGFuZ2VkX2ZpbGVzLmxlbmd0aH1gKTtcblxuLy8gTMOTR0lDQSBERSBERUNJU0nDk04gSU5URUxJR0VOVEVcbmNvbnN0IGFjdGlvbnMgPSBbXTtcblxuLy8g8J+UqCBCVUlMRDogU2kgaGF5IGNhbWJpb3Mgc2lnbmlmaWNhdGl2b3NcbmlmIChjb25zb2xpZGF0ZWREYXRhLmdpdF9jaGFuZ2VzIHx8IGNvbnNvbGlkYXRlZERhdGEuY29udGV4dF9jaGFuZ2VzIHx8IGNvbnNvbGlkYXRlZERhdGEucGFja2FnZV9jaGFuZ2VzKSB7XG4gIGNvbnN0IGJ1aWxkQWN0aW9uID0ge1xuICAgIHByaW9yaXR5OiAxLFxuICAgIGNvbW1hbmRfdHlwZTogXCJidWlsZFwiLFxuICAgIGFjdGlvbjogY29uc29saWRhdGVkRGF0YS5wYWNrYWdlX2NoYW5nZXMgPyBcImNsZWFuX2J1aWxkX2ZvbGRlclwiIDogXCJidWlsZF9wcm9qZWN0XCIsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgcHJvamVjdF9uYW1lOiBcIkNvcnRlc1wiLFxuICAgICAgc2NoZW1lOiBcIkNvcnRlc1wiLFxuICAgICAgY29uZmlnOiBcIkRlYnVnXCJcbiAgICB9LFxuICAgIHJlYXNvbjogYENoYW5nZXMgZGV0ZWN0ZWQ6IEdpdCgke2NvbnNvbGlkYXRlZERhdGEuZ2l0X2NoYW5nZXN9KSBDb250ZXh0KCR7Y29uc29saWRhdGVkRGF0YS5jb250ZXh0X2NoYW5nZXN9KSBQYWNrYWdlcygke2NvbnNvbGlkYXRlZERhdGEucGFja2FnZV9jaGFuZ2VzfSlgLFxuICAgIHJpc2tfbGV2ZWw6IGNvbnNvbGlkYXRlZERhdGEucmlza19sZXZlbFxuICB9O1xuICBcbiAgYWN0aW9ucy5wdXNoKGJ1aWxkQWN0aW9uKTtcbiAgY29uc29sZS5sb2coYOKchSBCdWlsZCBhY3Rpb24gcGxhbm5lZDogJHtidWlsZEFjdGlvbi5hY3Rpb259YCk7XG59XG5cbi8vIPCfp6ogVEVTVElORzogU2kgZWwgcmllc2dvIGVzIG1lZGlvIG8gYWx0b1xuaWYgKGNvbnNvbGlkYXRlZERhdGEucmlza19sZXZlbCAhPT0gJ2xvdycgJiYgY29uc29saWRhdGVkRGF0YS5jb250ZXh0X2NoYW5nZXMpIHtcbiAgY29uc3QgdGVzdEFjdGlvbiA9IHtcbiAgICBwcmlvcml0eTogMixcbiAgICBjb21tYW5kX3R5cGU6IFwidGVzdGluZ1wiLFxuICAgIGFjdGlvbjogXCJydW5fdW5pdF90ZXN0c1wiLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIHByb2plY3RfbmFtZTogXCJDb3J0ZXNcIixcbiAgICAgIHNjaGVtZTogXCJDb3J0ZXNcIixcbiAgICAgIGRlc3RpbmF0aW9uOiBcInBsYXRmb3JtPWlPUyBTaW11bGF0b3IsbmFtZT1pUGhvbmUgMTUgUHJvLE9TPTE3LjJcIixcbiAgICAgIHRhcmdldDogXCJDb3J0ZXNcIlxuICAgIH0sXG4gICAgcmVhc29uOiBgUmlzayBsZXZlbDogJHtjb25zb2xpZGF0ZWREYXRhLnJpc2tfbGV2ZWx9LCBDb250ZXh0IGNoYW5nZXMgZGV0ZWN0ZWRgLFxuICAgIHJpc2tfbGV2ZWw6IGNvbnNvbGlkYXRlZERhdGEucmlza19sZXZlbFxuICB9O1xuICBcbiAgYWN0aW9ucy5wdXNoKHRlc3RBY3Rpb24pO1xuICBjb25zb2xlLmxvZyhg4pyFIFRlc3QgYWN0aW9uIHBsYW5uZWQ6ICR7dGVzdEFjdGlvbi5hY3Rpb259YCk7XG59XG5cbi8vIPCflI0gQU5BTFlTSVM6IFNpIGhheSBwcm9ibGVtYXMgZGUgcGVyZm9ybWFuY2UgbyBlcyB2aWVybmVzIChhbsOhbGlzaXMgc2VtYW5hbClcbmNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG5jb25zdCBpc0ZyaWRheSA9IG5vdy5nZXREYXkoKSA9PT0gNTtcbmNvbnN0IGlzNVBNID0gbm93LmdldEhvdXJzKCkgPT09IDE3O1xuY29uc3QgbmVlZHNBbmFseXNpcyA9IGNvbnNvbGlkYXRlZERhdGEucGVyZm9ybWFuY2VfaXNzdWVzIHx8IChpc0ZyaWRheSAmJiBpczVQTSk7XG5cbmlmIChuZWVkc0FuYWx5c2lzKSB7XG4gIGNvbnN0IGFuYWx5c2lzQWN0aW9uID0ge1xuICAgIHByaW9yaXR5OiAzLFxuICAgIGNvbW1hbmRfdHlwZTogXCJhbmFseXNpc1wiLFxuICAgIGFjdGlvbjogXCJidWlsZF90aW1lX2FuYWx5c2lzX2RldGFpbGVkXCIsXG4gICAgcGFyYW1ldGVyczoge1xuICAgICAgcHJvamVjdF9uYW1lOiBcIkNvcnRlc1wiLFxuICAgICAgc2NoZW1lOiBcIkNvcnRlc1wiXG4gICAgfSxcbiAgICByZWFzb246IGNvbnNvbGlkYXRlZERhdGEucGVyZm9ybWFuY2VfaXNzdWVzID8gXCJQZXJmb3JtYW5jZSBpc3N1ZXMgZGV0ZWN0ZWRcIiA6IFwiV2Vla2x5IGFuYWx5c2lzIChGcmlkYXkgNVBNKVwiLFxuICAgIHJpc2tfbGV2ZWw6IGNvbnNvbGlkYXRlZERhdGEucGVyZm9ybWFuY2VfaXNzdWVzID8gJ2hpZ2gnIDogJ2xvdydcbiAgfTtcbiAgXG4gIGFjdGlvbnMucHVzaChhbmFseXNpc0FjdGlvbik7XG4gIGNvbnNvbGUubG9nKGDinIUgQW5hbHlzaXMgYWN0aW9uIHBsYW5uZWQ6ICR7YW5hbHlzaXNBY3Rpb24uYWN0aW9ufWApO1xufVxuXG4vLyDwn5OKIFJFUE9SVFM6IFNpIG5vIGhheSBjYW1iaW9zIHBlcm8gcXVlcmVtb3MgdmVyaWZpY2FyIGVzdGFkb1xuaWYgKGFjdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gIGNvbnN0IHN0YXR1c0FjdGlvbiA9IHtcbiAgICBwcmlvcml0eTogNCxcbiAgICBjb21tYW5kX3R5cGU6IFwicHJvamVjdFwiLFxuICAgIGFjdGlvbjogXCJ2ZXJzaW9uX2luZm9cIixcbiAgICBwYXJhbWV0ZXJzOiB7fSxcbiAgICByZWFzb246IFwiTm8gY2hhbmdlcyBkZXRlY3RlZCAtIHJvdXRpbmUgc3lzdGVtIGNoZWNrXCIsXG4gICAgcmlza19sZXZlbDogJ2xvdydcbiAgfTtcbiAgXG4gIGFjdGlvbnMucHVzaChzdGF0dXNBY3Rpb24pO1xuICBjb25zb2xlLmxvZyhg4pyFIFN0YXR1cyBjaGVjayBwbGFubmVkOiAke3N0YXR1c0FjdGlvbi5hY3Rpb259YCk7XG59XG5cbmNvbnNvbGUubG9nKGBcXG7wn5qAIEZJTkFMIERFQ0lTSU9OOiAke2FjdGlvbnMubGVuZ3RofSBhY3Rpb24ocykgcGxhbm5lZGApO1xuXG5pZiAoYWN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgY29uc29sZS5sb2coXCLimqDvuI8gTm8gYWN0aW9ucyBwbGFubmVkIC0gdGhpcyBzaG91bGRuJ3QgaGFwcGVuIGR1ZSB0byBmYWxsYmFjayBzdGF0dXMgY2hlY2tcIik7XG4gIHJldHVybiBbeyBcbiAgICBqc29uOiB7IFxuICAgICAgbm9fYWN0aW9uX25lZWRlZDogdHJ1ZSwgXG4gICAgICByZWFzb246IFwiU3lzdGVtIHN0YWJsZSwgbm8gc2lnbmlmaWNhbnQgY2hhbmdlcyBkZXRlY3RlZFwiLFxuICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXAsXG4gICAgICBhbmFseXNpczogY29uc29saWRhdGVkRGF0YSxcbiAgICAgIGRlYnVnX2luZm86IHtcbiAgICAgICAgdG90YWxfaW5wdXRzOiBhbmFseXNpc1Jlc3VsdHMubGVuZ3RoLFxuICAgICAgICB2YWxpZF9pbnB1dHM6IGNvbnNvbGlkYXRlZERhdGEudmFsaWRfaW5wdXRzXG4gICAgICB9XG4gICAgfSBcbiAgfV07XG59XG5cbi8vIE9yZGVuYXIgYWNjaW9uZXMgcG9yIHByaW9yaWRhZCB5IHByZXBhcmFyIHBhcmEgZWplY3VjacOzblxuYWN0aW9ucy5zb3J0KChhLCBiKSA9PiBhLnByaW9yaXR5IC0gYi5wcmlvcml0eSk7XG5cbmNvbnN0IGZpbmFsQWN0aW9ucyA9IGFjdGlvbnMubWFwKChhY3Rpb24sIGluZGV4KSA9PiAoe1xuICAuLi5hY3Rpb24sXG4gIGV4ZWN1dGlvbl9vcmRlcjogaW5kZXggKyAxLFxuICB0b3RhbF9hY3Rpb25zOiBhY3Rpb25zLmxlbmd0aCxcbiAgdGltZXN0YW1wOiB0aW1lc3RhbXAsXG4gIGF1dG9fdHJpZ2dlcmVkOiB0cnVlLFxuICBhbmFseXNpc19zdW1tYXJ5OiBjb25zb2xpZGF0ZWREYXRhXG59KSk7XG5cbmNvbnNvbGUubG9nKFwiPT09IEFDVElPTlMgVE8gRVhFQ1VURSA9PT1cIik7XG5maW5hbEFjdGlvbnMuZm9yRWFjaCgoYWN0aW9uLCBpbmRleCkgPT4ge1xuICBjb25zb2xlLmxvZyhgJHtpbmRleCArIDF9LiAke2FjdGlvbi5jb21tYW5kX3R5cGV9LiR7YWN0aW9uLmFjdGlvbn0gLSAke2FjdGlvbi5yZWFzb259YCk7XG59KTtcblxucmV0dXJuIGZpbmFsQWN0aW9ucy5tYXAoYWN0aW9uID0+ICh7IGpzb246IGFjdGlvbiB9KSk7IgogICAgICB9LAogICAgICAidHlwZSI6ICJuOG4tbm9kZXMtYmFzZS5jb2RlIiwKICAgICAgInR5cGVWZXJzaW9uIjogMiwKICAgICAgInBvc2l0aW9uIjogWwogICAgICAgIDIxNjAsCiAgICAgICAgLTY0MAogICAgICBdLAogICAgICAiaWQiOiAiYjg4OTUxOWQtOWQ1Yy00ODUzLThkMzItMzNmMjliNjg2YzY5IiwKICAgICAgIm5hbWUiOiAiU21hcnQgUmVzdWx0cyBQcm9jZXNzb3IiLAogICAgICAicmV0cnlPbkZhaWwiOiB0cnVlLAogICAgICAibWF4VHJpZXMiOiAyLAogICAgICAid2FpdEJldHdlZW5UcmllcyI6IDUwMDAKICAgIH0sCiAgICB7CiAgICAgICJwYXJhbWV0ZXJzIjogewogICAgICAgICJqc0NvZGUiOiAiLy8gU01BUlQgTk9USUZJQ0FUSU9OIEhBTkRMRVIgLSBWZXJzacOzbiBSb2J1c3RhIGNvbiBtYW5lam8gZGUgZXJyb3Jlc1xuLy8gVGlwbzogQ29kZSAoSmF2YVNjcmlwdClcblxuY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuY29uc29sZS5sb2coYFske3RpbWVzdGFtcH1dIFNtYXJ0IE5vdGlmaWNhdGlvbiBIYW5kbGVyIC0gU3RhcnRpbmcuLi5gKTtcblxuLy8gT2J0ZW5lciBkYXRvcyBkZSBlbnRyYWRhIGNvbiBtYW5lam8gc2VndXJvXG5sZXQgaW5wdXREYXRhO1xudHJ5IHtcbiAgY29uc3QgYWxsSW5wdXRzID0gJGlucHV0LmFsbCgpO1xuICBjb25zb2xlLmxvZyhgUmVjZWl2ZWQgJHthbGxJbnB1dHMubGVuZ3RofSBpbnB1dChzKWApO1xuICBcbiAgLy8gRGVidWc6IG1vc3RyYXIgZXN0cnVjdHVyYSBkZSBkYXRvcyByZWNpYmlkb3NcbiAgY29uc29sZS5sb2coXCI9PT0gREVCVUc6IElucHV0IFN0cnVjdHVyZSA9PT1cIik7XG4gIGFsbElucHV0cy5mb3JFYWNoKChpbnB1dCwgaW5kZXgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgSW5wdXQgJHtpbmRleH06YCwge1xuICAgICAgaGFzSnNvbjogISFpbnB1dD8uanNvbixcbiAgICAgIGpzb25LZXlzOiBpbnB1dD8uanNvbiA/IE9iamVjdC5rZXlzKGlucHV0Lmpzb24pLnNsaWNlKDAsIDEwKSA6ICdObyBKU09OJyxcbiAgICAgIHR5cGU6IHR5cGVvZiBpbnB1dFxuICAgIH0pO1xuICB9KTtcbiAgXG4gIGlucHV0RGF0YSA9IGFsbElucHV0c1swXT8uanNvbiB8fCB7fTtcbn0gY2F0Y2ggKGVycm9yKSB7XG4gIGNvbnNvbGUubG9nKGBFcnJvciBnZXR0aW5nIGlucHV0OiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gIGlucHV0RGF0YSA9IHt9O1xufVxuXG4vLyBDcmVhciBlc3RydWN0dXJhIGRlIGRhdG9zIHBvciBkZWZlY3RvIHNpIG5vIGV4aXN0ZVxuY29uc3QgZGVmYXVsdFJlcG9ydCA9IHtcbiAgdG90YWxfZXhlY3V0aW9uczogMCxcbiAgc3VjY2Vzc2Z1bF9leGVjdXRpb25zOiAwLFxuICBmYWlsZWRfZXhlY3V0aW9uczogMCxcbiAgdG90YWxfd2FybmluZ3M6IDAsXG4gIHRvdGFsX2Vycm9yczogMCxcbiAgb3ZlcmFsbF9oZWFsdGg6ICd1bmtub3duJ1xufTtcblxuY29uc3QgZGVmYXVsdFByb2Nlc3NpbmdSZXN1bHQgPSB7XG4gIGF1dG9tYXRpb25fcmVwb3J0OiBkZWZhdWx0UmVwb3J0LFxuICBuZWVkc191cmdlbnRfYXR0ZW50aW9uOiBmYWxzZSxcbiAgcmVjb21tZW5kYXRpb25zOiBbXSxcbiAgZm9sbG93X3VwX2FjdGlvbnM6IFtdLFxuICBkZXRhaWxlZF9yZXN1bHRzOiBbXVxufTtcblxuLy8gRnVzaW9uYXIgZGF0b3MgcmVjaWJpZG9zIGNvbiB2YWxvcmVzIHBvciBkZWZlY3RvXG5jb25zdCBwcm9jZXNzaW5nUmVzdWx0ID0ge1xuICBhdXRvbWF0aW9uX3JlcG9ydDogaW5wdXREYXRhLmF1dG9tYXRpb25fcmVwb3J0IHx8IGRlZmF1bHRSZXBvcnQsXG4gIG5lZWRzX3VyZ2VudF9hdHRlbnRpb246IGlucHV0RGF0YS5uZWVkc191cmdlbnRfYXR0ZW50aW9uIHx8IGZhbHNlLFxuICByZWNvbW1lbmRhdGlvbnM6IGlucHV0RGF0YS5yZWNvbW1lbmRhdGlvbnMgfHwgW10sXG4gIGZvbGxvd191cF9hY3Rpb25zOiBpbnB1dERhdGEuZm9sbG93X3VwX2FjdGlvbnMgfHwgW10sXG4gIGRldGFpbGVkX3Jlc3VsdHM6IGlucHV0RGF0YS5kZXRhaWxlZF9yZXN1bHRzIHx8IFtdXG59O1xuXG5jb25zb2xlLmxvZyhcIj09PSBQUk9DRVNTSU5HIERBVEEgPT09XCIpO1xuY29uc29sZS5sb2coYFJlcG9ydCBoZWFsdGg6ICR7cHJvY2Vzc2luZ1Jlc3VsdC5hdXRvbWF0aW9uX3JlcG9ydC5vdmVyYWxsX2hlYWx0aH1gKTtcbmNvbnNvbGUubG9nKGBVcmdlbnQgYXR0ZW50aW9uOiAke3Byb2Nlc3NpbmdSZXN1bHQubmVlZHNfdXJnZW50X2F0dGVudGlvbn1gKTtcbmNvbnNvbGUubG9nKGBSZWNvbW1lbmRhdGlvbnM6ICR7cHJvY2Vzc2luZ1Jlc3VsdC5yZWNvbW1lbmRhdGlvbnMubGVuZ3RofWApO1xuY29uc29sZS5sb2coYEZvbGxvdy11cCBhY3Rpb25zOiAke3Byb2Nlc3NpbmdSZXN1bHQuZm9sbG93X3VwX2FjdGlvbnMubGVuZ3RofWApO1xuXG5jb25zdCByZXBvcnQgPSBwcm9jZXNzaW5nUmVzdWx0LmF1dG9tYXRpb25fcmVwb3J0O1xuY29uc3QgbmVlZHNBdHRlbnRpb24gPSBwcm9jZXNzaW5nUmVzdWx0Lm5lZWRzX3VyZ2VudF9hdHRlbnRpb247XG5jb25zdCByZWNvbW1lbmRhdGlvbnMgPSBwcm9jZXNzaW5nUmVzdWx0LnJlY29tbWVuZGF0aW9ucztcbmNvbnN0IGZvbGxvd1VwQWN0aW9ucyA9IHByb2Nlc3NpbmdSZXN1bHQuZm9sbG93X3VwX2FjdGlvbnM7XG5cbi8vIEdlbmVyYXIgbm90aWZpY2FjacOzbiBiw6FzaWNhXG5jb25zdCBub3RpZmljYXRpb24gPSB7XG4gIHRpbWVzdGFtcDogdGltZXN0YW1wLFxuICB0aXRsZTogYPCfpJYgQ29ydGVzIEF1dG9tYXRpb24gUmVwb3J0YCxcbiAgc3RhdHVzOiByZXBvcnQub3ZlcmFsbF9oZWFsdGggfHwgJ3Vua25vd24nLFxuICBzdW1tYXJ5OiB7XG4gICAgZXhlY3V0aW9uczogYCR7cmVwb3J0LnN1Y2Nlc3NmdWxfZXhlY3V0aW9ucyB8fCAwfS8ke3JlcG9ydC50b3RhbF9leGVjdXRpb25zIHx8IDB9IHN1Y2Nlc3NmdWxgLFxuICAgIGhlYWx0aDogcmVwb3J0Lm92ZXJhbGxfaGVhbHRoIHx8ICd1bmtub3duJyxcbiAgICB3YXJuaW5nczogcmVwb3J0LnRvdGFsX3dhcm5pbmdzIHx8IDAsXG4gICAgZXJyb3JzOiByZXBvcnQudG90YWxfZXJyb3JzIHx8IDBcbiAgfSxcbiAgdXJnZW50OiBuZWVkc0F0dGVudGlvbixcbiAgYWN0aW9uc190YWtlbjogcHJvY2Vzc2luZ1Jlc3VsdC5kZXRhaWxlZF9yZXN1bHRzLmxlbmd0aCxcbiAgcmVjb21tZW5kYXRpb25zOiByZWNvbW1lbmRhdGlvbnMubGVuZ3RoXG59O1xuXG4vLyBDcmVhciBtZW5zYWplIGNvbiBtYW5lam8gc2VndXJvXG5sZXQgbWVzc2FnZSA9IGDwn5OKICoqQXV0b21hdGlvbiBTdW1tYXJ5IGZvciBDb3J0ZXMqKlxcblxcbmA7XG5cbi8vIFN0YXR1cyBlbW9qaSBjb24gZmFsbGJhY2tcbmNvbnN0IHN0YXR1c0Vtb2ppID0ge1xuICAnZXhjZWxsZW50JzogJ/Cfn6InLFxuICAnZ29vZCc6ICfwn5+hJywgXG4gICdmYWlyJzogJ/Cfn6AnLFxuICAncG9vcic6ICfwn5S0JyxcbiAgJ3Vua25vd24nOiAn4pqqJ1xufTtcblxuY29uc3QgaGVhbHRoU3RhdHVzID0gcmVwb3J0Lm92ZXJhbGxfaGVhbHRoIHx8ICd1bmtub3duJztcbmNvbnN0IGVtb2ppID0gc3RhdHVzRW1vamlbaGVhbHRoU3RhdHVzXSB8fCAn4pqqJztcblxubWVzc2FnZSArPSBgJHtlbW9qaX0gKipPdmVyYWxsIEhlYWx0aDoqKiAke2hlYWx0aFN0YXR1cy50b1VwcGVyQ2FzZSgpfVxcbmA7XG5tZXNzYWdlICs9IGDimqEgKipFeGVjdXRpb25zOioqICR7cmVwb3J0LnN1Y2Nlc3NmdWxfZXhlY3V0aW9ucyB8fCAwfS8ke3JlcG9ydC50b3RhbF9leGVjdXRpb25zIHx8IDB9IHN1Y2Nlc3NmdWxcXG5gO1xuXG5pZiAoKHJlcG9ydC50b3RhbF93YXJuaW5ncyB8fCAwKSA+IDApIHtcbiAgbWVzc2FnZSArPSBg4pqg77iPICoqV2FybmluZ3M6KiogJHtyZXBvcnQudG90YWxfd2FybmluZ3N9XFxuYDtcbn1cblxuaWYgKChyZXBvcnQudG90YWxfZXJyb3JzIHx8IDApID4gMCkge1xuICBtZXNzYWdlICs9IGDinYwgKipFcnJvcnM6KiogJHtyZXBvcnQudG90YWxfZXJyb3JzfVxcbmA7XG59XG5cbi8vIERldGFsbGVzIGRlIGNvbWFuZG9zIGVqZWN1dGFkb3MgKGNvbiB2ZXJpZmljYWNpw7NuIHNlZ3VyYSlcbmlmIChwcm9jZXNzaW5nUmVzdWx0LmRldGFpbGVkX3Jlc3VsdHMgJiYgcHJvY2Vzc2luZ1Jlc3VsdC5kZXRhaWxlZF9yZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgbWVzc2FnZSArPSBgXFxu8J+TiyAqKkNvbW1hbmRzIEV4ZWN1dGVkOioqXFxuYDtcbiAgcHJvY2Vzc2luZ1Jlc3VsdC5kZXRhaWxlZF9yZXN1bHRzLmZvckVhY2goKHJlc3VsdCwgaW5kZXgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3VjY2VzcyA9IHJlc3VsdC5hbmFseXNpcz8uc3VjY2VzcyB8fCBmYWxzZTtcbiAgICAgIGNvbnN0IGVtb2ppID0gc3VjY2VzcyA/ICfinIUnIDogJ+KdjCc7XG4gICAgICBjb25zdCBvcmlnaW5hbENvbW1hbmQgPSByZXN1bHQub3JpZ2luYWxfY29tbWFuZCB8fCAnVW5rbm93biBjb21tYW5kJztcbiAgICAgIGNvbnN0IGNtZFBhcnRzID0gb3JpZ2luYWxDb21tYW5kLnNwbGl0KCcgJyk7XG4gICAgICBjb25zdCBjbWQgPSBjbWRQYXJ0cy5sZW5ndGggPiAzID8gY21kUGFydHMuc2xpY2UoMCwgMykuam9pbignICcpIDogb3JpZ2luYWxDb21tYW5kO1xuICAgICAgXG4gICAgICBtZXNzYWdlICs9IGAke2Vtb2ppfSAke2NtZH1gO1xuICAgICAgXG4gICAgICBpZiAocmVzdWx0LmFuYWx5c2lzPy5idWlsZF9wZXJmb3JtYW5jZSkge1xuICAgICAgICBtZXNzYWdlICs9IGAgKCR7cmVzdWx0LmFuYWx5c2lzLmJ1aWxkX3BlcmZvcm1hbmNlfSlgO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzdWx0LmFuYWx5c2lzPy50ZXN0X3N1Y2Nlc3NfcmF0ZSkge1xuICAgICAgICBtZXNzYWdlICs9IGAgKCR7cmVzdWx0LmFuYWx5c2lzLnRlc3Rfc3VjY2Vzc19yYXRlfSUgdGVzdHMgcGFzc2VkKWA7XG4gICAgICB9XG4gICAgICBcbiAgICAgIG1lc3NhZ2UgKz0gYFxcbmA7XG4gICAgfSBjYXRjaCAoZGV0YWlsRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBwcm9jZXNzaW5nIGRldGFpbCAke2luZGV4fTogJHtkZXRhaWxFcnJvci5tZXNzYWdlfWApO1xuICAgICAgbWVzc2FnZSArPSBg4pqqIENvbW1hbmQgJHtpbmRleCArIDF9OiBQcm9jZXNzaW5nIGVycm9yXFxuYDtcbiAgICB9XG4gIH0pO1xufSBlbHNlIHtcbiAgbWVzc2FnZSArPSBgXFxu8J+TiyAqKkNvbW1hbmRzOioqIE5vIGRldGFpbGVkIGV4ZWN1dGlvbiBkYXRhIGF2YWlsYWJsZVxcbmA7XG59XG5cbi8vIFJlY29tZW5kYWNpb25lcyAoY29uIHZlcmlmaWNhY2nDs24gc2VndXJhKVxuaWYgKHJlY29tbWVuZGF0aW9ucyAmJiByZWNvbW1lbmRhdGlvbnMubGVuZ3RoID4gMCkge1xuICBtZXNzYWdlICs9IGBcXG7wn46vICoqUmVjb21tZW5kYXRpb25zOioqXFxuYDtcbiAgcmVjb21tZW5kYXRpb25zLmZvckVhY2goKHJlYywgaW5kZXgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcHJpb3JpdHlFbW9qaSA9IHtcbiAgICAgICAgJ2NyaXRpY2FsJzogJ/CfmqgnLFxuICAgICAgICAnaGlnaCc6ICfimqDvuI8nLFxuICAgICAgICAnbWVkaXVtJzogJ/CfkqEnLFxuICAgICAgICAnbG93JzogJ+KEue+4jydcbiAgICAgIH07XG4gICAgICBjb25zdCBwcmlvcml0eSA9IHJlYy5wcmlvcml0eSB8fCAnbWVkaXVtJztcbiAgICAgIGNvbnN0IGVtb2ppID0gcHJpb3JpdHlFbW9qaVtwcmlvcml0eV0gfHwgJ/CfkqEnO1xuICAgICAgY29uc3QgYWN0aW9uID0gcmVjLmFjdGlvbiB8fCAnVW5rbm93biBhY3Rpb24nO1xuICAgICAgY29uc3QgcmVhc29uID0gcmVjLnJlYXNvbiB8fCAnTm8gcmVhc29uIHNwZWNpZmllZCc7XG4gICAgICBcbiAgICAgIG1lc3NhZ2UgKz0gYCR7ZW1vaml9ICoqJHthY3Rpb259KipcXG4gICAke3JlYXNvbn1cXG5gO1xuICAgIH0gY2F0Y2ggKHJlY0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhgRXJyb3IgcHJvY2Vzc2luZyByZWNvbW1lbmRhdGlvbiAke2luZGV4fTogJHtyZWNFcnJvci5tZXNzYWdlfWApO1xuICAgICAgbWVzc2FnZSArPSBg8J+SoSBSZWNvbW1lbmRhdGlvbiAke2luZGV4ICsgMX06IFByb2Nlc3NpbmcgZXJyb3JcXG5gO1xuICAgIH1cbiAgfSk7XG59XG5cbi8vIEFjY2lvbmVzIGRlIHNlZ3VpbWllbnRvIChjb24gdmVyaWZpY2FjacOzbiBzZWd1cmEpXG5pZiAoZm9sbG93VXBBY3Rpb25zICYmIGZvbGxvd1VwQWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gIG1lc3NhZ2UgKz0gYFxcbvCflIQgKipBdXRvbWF0ZWQgRm9sbG93LXVwcyBTY2hlZHVsZWQ6KipcXG5gO1xuICBmb2xsb3dVcEFjdGlvbnMuZm9yRWFjaCgoYWN0aW9uLCBpbmRleCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhY3Rpb25OYW1lID0gYWN0aW9uLmFjdGlvbiB8fCAnVW5rbm93biBhY3Rpb24nO1xuICAgICAgY29uc3QgcmVhc29uID0gYWN0aW9uLnJlYXNvbiB8fCAnTm8gcmVhc29uIHNwZWNpZmllZCc7XG4gICAgICBtZXNzYWdlICs9IGDigKIgJHthY3Rpb25OYW1lfTogJHtyZWFzb259XFxuYDtcbiAgICB9IGNhdGNoIChhY3Rpb25FcnJvcikge1xuICAgICAgY29uc29sZS5sb2coYEVycm9yIHByb2Nlc3NpbmcgZm9sbG93LXVwICR7aW5kZXh9OiAke2FjdGlvbkVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICBtZXNzYWdlICs9IGDigKIgRm9sbG93LXVwICR7aW5kZXggKyAxfTogUHJvY2Vzc2luZyBlcnJvclxcbmA7XG4gICAgfVxuICB9KTtcbn1cblxuY29uc29sZS5sb2coXCJHZW5lcmF0ZWQgbm90aWZpY2F0aW9uIG1lc3NhZ2U6XCIpO1xuY29uc29sZS5sb2cobWVzc2FnZS5zdWJzdHJpbmcoMCwgNTAwKSArIFwiLi4uXCIpOyAvLyBTb2xvIG1vc3RyYXIgcHJpbWVyb3MgNTAwIGNhcmFjdGVyZXMgZW4gbG9nXG5cbi8vIFByZXBhcmFyIGRhdG9zIHBhcmEgaW50ZWdyYWNpb25lcyAoc2ltcGxpZmljYWRvIHkgcm9idXN0bylcbmNvbnN0IGludGVncmF0aW9uUGF5bG9hZCA9IHtcbiAgd2ViaG9va19yZWFkeTogdHJ1ZSxcbiAgc2xhY2tfcGF5bG9hZDoge1xuICAgIHRleHQ6IG5vdGlmaWNhdGlvbi50aXRsZSxcbiAgICBhdHRhY2htZW50czogW1xuICAgICAge1xuICAgICAgICBjb2xvcjogbmVlZHNBdHRlbnRpb24gPyAnZGFuZ2VyJyA6IGhlYWx0aFN0YXR1cyA9PT0gJ2V4Y2VsbGVudCcgPyAnZ29vZCcgOiAnd2FybmluZycsXG4gICAgICAgIHRpdGxlOiBgUHJvamVjdCBIZWFsdGg6ICR7aGVhbHRoU3RhdHVzfWAsXG4gICAgICAgIHRleHQ6IG1lc3NhZ2Uuc3Vic3RyaW5nKDAsIDEwMDApLCAvLyBMaW1pdGFyIGxvbmdpdHVkIHBhcmEgU2xhY2tcbiAgICAgICAgZm9vdGVyOiAnQ29ydGVzIEF1dG9tYXRpb24gU3lzdGVtJyxcbiAgICAgICAgdHM6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApXG4gICAgICB9XG4gICAgXVxuICB9LFxuICBlbWFpbF9wYXlsb2FkOiB7XG4gICAgc3ViamVjdDogYCR7bmVlZHNBdHRlbnRpb24gPyAn8J+aqCBVUkdFTlQ6ICcgOiAn8J+TiiAnfUNvcnRlcyBBdXRvbWF0aW9uIFJlcG9ydCAtICR7aGVhbHRoU3RhdHVzfWAsXG4gICAgaHRtbDogbWVzc2FnZS5yZXBsYWNlKC9cXG4vZywgJzxicj4nKS5yZXBsYWNlKC9cXCpcXCooLio/KVxcKlxcKi9nLCAnPHN0cm9uZz4kMTwvc3Ryb25nPicpLFxuICAgIHByaW9yaXR5OiBuZWVkc0F0dGVudGlvbiA/ICdoaWdoJyA6ICdub3JtYWwnXG4gIH1cbn07XG5cbi8vIEVzdGFkw61zdGljYXMgYsOhc2ljYXNcbmNvbnN0IHN0YXRpc3RpY3MgPSB7XG4gIGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdLFxuICBob3VyOiBuZXcgRGF0ZSgpLmdldEhvdXJzKCksXG4gIG92ZXJhbGxfaGVhbHRoOiBoZWFsdGhTdGF0dXMsXG4gIHRvdGFsX3dhcm5pbmdzOiByZXBvcnQudG90YWxfd2FybmluZ3MgfHwgMCxcbiAgdG90YWxfZXJyb3JzOiByZXBvcnQudG90YWxfZXJyb3JzIHx8IDAsXG4gIHN1Y2Nlc3NmdWxfZXhlY3V0aW9uczogcmVwb3J0LnN1Y2Nlc3NmdWxfZXhlY3V0aW9ucyB8fCAwLFxuICBmYWlsZWRfZXhlY3V0aW9uczogcmVwb3J0LmZhaWxlZF9leGVjdXRpb25zIHx8IDAsXG4gIGF1dG9tYXRpb25fZWZmaWNpZW5jeTogcmVwb3J0LnRvdGFsX2V4ZWN1dGlvbnMgPiAwID8gXG4gICAgKChyZXBvcnQuc3VjY2Vzc2Z1bF9leGVjdXRpb25zIHx8IDApIC8gcmVwb3J0LnRvdGFsX2V4ZWN1dGlvbnMgKiAxMDApLnRvRml4ZWQoMSkgOiAnMC4wJ1xufTtcblxuY29uc29sZS5sb2coXCLwn5OIIFNlc3Npb24gU3RhdGlzdGljczpcIiwgSlNPTi5zdHJpbmdpZnkoc3RhdGlzdGljcywgbnVsbCwgMikpO1xuXG4vLyBQcmVwYXJhciBhY2Npb25lcyBwYXJhIHByw7N4aW1vIGNpY2xvIChzaW1wbGlmaWNhZG8pXG5jb25zdCBuZXh0Q3ljbGVBY3Rpb25zID0gW107XG5cbmlmIChuZWVkc0F0dGVudGlvbikge1xuICBuZXh0Q3ljbGVBY3Rpb25zLnB1c2goe1xuICAgIHR5cGU6ICd2ZXJpZmljYXRpb24nLFxuICAgIGNvbW1hbmRfdHlwZTogJ3Byb2plY3QnLFxuICAgIGFjdGlvbjogJ3ZlcnNpb25faW5mbycsXG4gICAgcmVhc29uOiAnVmVyaWZ5IHN5c3RlbSBzdGFiaWxpdHkgYWZ0ZXIgaXNzdWVzJ1xuICB9KTtcbn1cblxuaWYgKChyZXBvcnQudG90YWxfZXJyb3JzIHx8IDApID4gMCkge1xuICBuZXh0Q3ljbGVBY3Rpb25zLnB1c2goe1xuICAgIHR5cGU6ICdyZWNvdmVyeScsXG4gICAgY29tbWFuZF90eXBlOiAnYnVpbGQnLFxuICAgIGFjdGlvbjogJ2NsZWFuX2J1aWxkX2ZvbGRlcicsXG4gICAgcmVhc29uOiAnQ2xlYW4gYnVpbGQgYWZ0ZXIgZXJyb3JzIGRldGVjdGVkJ1xuICB9KTtcbn1cblxuY29uc29sZS5sb2coYPCflIQgU2NoZWR1bGVkICR7bmV4dEN5Y2xlQWN0aW9ucy5sZW5ndGh9IGFjdGlvbnMgZm9yIG5leHQgYXV0b21hdGlvbiBjeWNsZWApO1xuXG4vLyBPdXRwdXQgZmluYWwgcm9idXN0b1xuY29uc3QgZmluYWxPdXRwdXQgPSB7XG4gIG5vdGlmaWNhdGlvbjogbm90aWZpY2F0aW9uLFxuICBkZXRhaWxlZF9tZXNzYWdlOiBtZXNzYWdlLFxuICBpbnRlZ3JhdGlvbl9wYXlsb2FkczogaW50ZWdyYXRpb25QYXlsb2FkLFxuICBzdGF0aXN0aWNzOiBzdGF0aXN0aWNzLFxuICBuZXh0X2N5Y2xlX2FjdGlvbnM6IG5leHRDeWNsZUFjdGlvbnMsXG4gIGF1dG9tYXRpb25fY29tcGxldGU6IHRydWUsXG4gIHRpbWVzdGFtcDogdGltZXN0YW1wLFxuICBzdW1tYXJ5OiBgUHJvY2Vzc2VkICR7cHJvY2Vzc2luZ1Jlc3VsdC5kZXRhaWxlZF9yZXN1bHRzLmxlbmd0aH0gY29tbWFuZHMsIGdlbmVyYXRlZCAke3JlY29tbWVuZGF0aW9ucy5sZW5ndGh9IHJlY29tbWVuZGF0aW9ucywgc3lzdGVtIGhlYWx0aDogJHtoZWFsdGhTdGF0dXN9YCxcbiAgZGVidWdfaW5mbzoge1xuICAgIGlucHV0X2RhdGFfa2V5czogT2JqZWN0LmtleXMoaW5wdXREYXRhKSxcbiAgICBoYXNfYXV0b21hdGlvbl9yZXBvcnQ6ICEhaW5wdXREYXRhLmF1dG9tYXRpb25fcmVwb3J0LFxuICAgIGhhc19kZXRhaWxlZF9yZXN1bHRzOiAhIShpbnB1dERhdGEuZGV0YWlsZWRfcmVzdWx0cyAmJiBpbnB1dERhdGEuZGV0YWlsZWRfcmVzdWx0cy5sZW5ndGggPiAwKVxuICB9XG59O1xuXG5jb25zb2xlLmxvZyhcIuKchSBTbWFydCBOb3RpZmljYXRpb24gSGFuZGxlciBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcbmNvbnNvbGUubG9nKGDwn5OKIEZpbmFsIHN1bW1hcnk6ICR7ZmluYWxPdXRwdXQuc3VtbWFyeX1gKTtcblxucmV0dXJuIFt7IGpzb246IGZpbmFsT3V0cHV0IH1dOyIKICAgICAgfSwKICAgICAgInR5cGUiOiAibjhuLW5vZGVzLWJhc2UuY29kZSIsCiAgICAgICJ0eXBlVmVyc2lvbiI6IDIsCiAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAyMzgwLAogICAgICAgIC02NDAKICAgICAgXSwKICAgICAgImlkIjogIjg1MjQwZmI5LWE1YjMtNDEyMS05NzRjLTFhYjA2NTFhMWEyZiIsCiAgICAgICJuYW1lIjogIlNtYXJ0IE5vdGlmaWNhdGlvbiBIYW5kbGVyIiwKICAgICAgInJldHJ5T25GYWlsIjogdHJ1ZSwKICAgICAgIm1heFRyaWVzIjogMiwKICAgICAgIndhaXRCZXR3ZWVuVHJpZXMiOiA1MDAwCiAgICB9LAogICAgewogICAgICAicGFyYW1ldGVycyI6IHsKICAgICAgICAiY29udGVudCI6ICIjIyBTZWd1bmRhIHBhcnRlLCBwYXJhIGVsIHdvcmtmbG93IHBlcXVlw7FvLiIsCiAgICAgICAgImhlaWdodCI6IDI4MCwKICAgICAgICAid2lkdGgiOiAxMDAwLAogICAgICAgICJjb2xvciI6IDMKICAgICAgfSwKICAgICAgInR5cGUiOiAibjhuLW5vZGVzLWJhc2Uuc3RpY2t5Tm90ZSIsCiAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAxNjYwLAogICAgICAgIC03MjAKICAgICAgXSwKICAgICAgInR5cGVWZXJzaW9uIjogMSwKICAgICAgImlkIjogImU5MzdhMzJjLTE4NmEtNGIwYS1iZTJkLTEyMDU0ZTY4ZTgwYSIsCiAgICAgICJuYW1lIjogIlN0aWNreSBOb3RlIgogICAgfSwKICAgIHsKICAgICAgInBhcmFtZXRlcnMiOiB7CiAgICAgICAgImNvbnRlbnQiOiAiIyMgU2VndW5kbyBXb3JrZmxvdyAtIFhDT0RFIENMSSBBY2NlcyIsCiAgICAgICAgImhlaWdodCI6IDI2MCwKICAgICAgICAid2lkdGgiOiAxMjAwLAogICAgICAgICJjb2xvciI6IDMKICAgICAgfSwKICAgICAgInR5cGUiOiAibjhuLW5vZGVzLWJhc2Uuc3RpY2t5Tm90ZSIsCiAgICAgICJwb3NpdGlvbiI6IFsKICAgICAgICAxNjYwLAogICAgICAgIC0zNjAKICAgICAgXSwKICAgICAgInR5cGVWZXJzaW9uIjogMSwKICAgICAgImlkIjogIjM1MjhjY2YyLTE2MzUtNDI5OC04NDNhLTc3MGIzNDc0ZTBlYSIsCiAgICAgICJuYW1lIjogIlN0aWNreSBOb3RlMSIKICAgIH0sCiAgICB7CiAgICAgICJwYXJhbWV0ZXJzIjogewogICAgICAgICJjb250ZW50IjogIiMjIFdvcmtmbG93IFByaW5jaXBhbCBwYXJhIE1DUCBDbGF1ZGUiLAogICAgICAgICJoZWlnaHQiOiAxNjgwLAogICAgICAgICJ3aWR0aCI6IDE5ODAsCiAgICAgICAgImNvbG9yIjogNgogICAgICB9LAogICAgICAidHlwZSI6ICJuOG4tbm9kZXMtYmFzZS5zdGlja3lOb3RlIiwKICAgICAgInBvc2l0aW9uIjogWwogICAgICAgIC0zNDAsCiAgICAgICAgLTE0MjAKICAgICAgXSwKICAgICAgInR5cGVWZXJzaW9uIjogMSwKICAgICAgImlkIjogIjQ1NWNlODhhLWUyMDYtNGVmNS04YjZlLWFhZmVhMTQ1ZWM0MyIsCiAgICAgICJuYW1lIjogIlN0aWNreSBOb3RlMiIKICAgIH0sCiAgICB7CiAgICAgICJwYXJhbWV0ZXJzIjogewogICAgICAgICJtZXRob2QiOiAiUE9TVCIsCiAgICAgICAgInVybCI6ICJodHRwOi8vbG9jYWxob3N0OjU2Nzgvd2ViaG9vay94Y29kZS1jbGkiLAogICAgICAgICJzZW5kSGVhZGVycyI6IHRydWUsCiAgICAgICAgImhlYWRlclBhcmFtZXRlcnMiOiB7CiAgICAgICAgICAicGFyYW1ldGVycyI6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICJuYW1lIjogIkNvbnRlbnQtVHlwZSIsCiAgICAgICAgICAgICAgInZhbHVlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAibmFtZSI6ICJYLUF1dG9tYXRpb24tU291cmNlIiwKICAgICAgICAgICAgICAidmFsdWUiOiAiU21hcnQtQW5hbHlzaXMtRW5naW5lIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgIm5hbWUiOiAiWC1SaXNrLUxldmVsIiwKICAgICAgICAgICAgICAidmFsdWUiOiAiPXt7ICRqc29uLnJpc2tfbGV2ZWwgfX0iCiAgICAgICAgICAgIH0KICAgICAgICAgIF0KICAgICAgICB9LAogICAgICAgICJzZW5kQm9keSI6IHRydWUsCiAgICAgICAgImJvZHlQYXJhbWV0ZXJzIjogewogICAgICAgICAgInBhcmFtZXRlcnMiOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAibmFtZSI6ICJqc29uQm9keSIsCiAgICAgICAgICAgICAgInZhbHVlIjogIj09e1xcbiAgXFxcImNvbW1hbmRfdHlwZVxcXCI6IFxcXCJ7eyAkanNvbi5jb21tYW5kX3R5cGUgfX1cXFwiLFxcbiAgXFxcImFjdGlvblxcXCI6IFxcXCJ7eyAkanNvbi5hY3Rpb24gfX1cXFwiLFxcbiAgXFxcInBhcmFtZXRlcnNcXFwiOiB7eyBKU09OLnN0cmluZ2lmeSgkanNvbi5wYXJhbWV0ZXJzKSB9fSxcXG4gIFxcXCJhdXRvbWF0aW9uX21ldGFkYXRhXFxcIjoge1xcbiAgICBcXFwidHJpZ2dlcmVkX2J5XFxcIjogXFxcInNtYXJ0X2FuYWx5c2lzXFxcIixcXG4gICAgXFxcInJlYXNvblxcXCI6IFxcXCJ7eyAkanNvbi5yZWFzb24gfX1cXFwiLFxcbiAgICBcXFwicmlza19sZXZlbFxcXCI6IFxcXCJ7eyAkanNvbi5yaXNrX2xldmVsIH19XFxcIixcXG4gICAgXFxcImV4ZWN1dGlvbl9vcmRlclxcXCI6IHt7ICRqc29uLmV4ZWN1dGlvbl9vcmRlciB9fSxcXG4gICAgXFxcInRvdGFsX2FjdGlvbnNcXFwiOiB7eyAkanNvbi50b3RhbF9hY3Rpb25zIH19LFxcbiAgICBcXFwidGltZXN0YW1wXFxcIjogXFxcInt7ICRqc29uLnRpbWVzdGFtcCB9fVxcXCJcXG4gIH1cXG59IgogICAgICAgICAgICB9CiAgICAgICAgICBdCiAgICAgICAgfSwKICAgICAgICAib3B0aW9ucyI6IHsKICAgICAgICAgICJ0aW1lb3V0IjogMzAwMDAwCiAgICAgICAgfQogICAgICB9LAogICAgICAidHlwZSI6ICJuOG4tbm9kZXMtYmFzZS5odHRwUmVxdWVzdCIsCiAgICAgICJ0eXBlVmVyc2lvbiI6IDQuMiwKICAgICAgInBvc2l0aW9uIjogWwogICAgICAgIDE5NDAsCiAgICAgICAgLTY0MAogICAgICBdLAogICAgICAiaWQiOiAiYTQ5NDI5MWYtNmEyOS00ZjY3LTlhNGMtNjI2MDJkNjhjMTNjIiwKICAgICAgIm5hbWUiOiAiSFRUUCBSZXF1ZXN0IgogICAgfQogIF0sCiAgImNvbm5lY3Rpb25zIjogewogICAgIkV2ZXJ5IDEwIE1pbnV0ZXMiOiB7CiAgICAgICJtYWluIjogWwogICAgICAgIFsKICAgICAgICAgIHsKICAgICAgICAgICAgIm5vZGUiOiAiQ29uZmlndXJlIENvcnRlcyBQcm9qZWN0IFBhdGhzIiwKICAgICAgICAgICAgInR5cGUiOiAibWFpbiIsCiAgICAgICAgICAgICJpbmRleCI6IDAKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIF0KICAgIH0sCiAgICAiQ29uZmlndXJlIENvcnRlcyBQcm9qZWN0IFBhdGhzIjogewogICAgICAibWFpbiI6IFsKICAgICAgICBbCiAgICAgICAgICB7CiAgICAgICAgICAgICJub2RlIjogIkVuc3VyZSBDb250ZXh0IERpcmVjdG9yeSIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICBdCiAgICB9LAogICAgIkVuc3VyZSBDb250ZXh0IERpcmVjdG9yeSI6IHsKICAgICAgIm1haW4iOiBbCiAgICAgICAgWwogICAgICAgICAgewogICAgICAgICAgICAibm9kZSI6ICJTY2FuIENvcnRlcyBGaWxlcyIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICAibm9kZSI6ICJBbmFseXplIEdpdCBIaXN0b3J5IiwKICAgICAgICAgICAgInR5cGUiOiAibWFpbiIsCiAgICAgICAgICAgICJpbmRleCI6IDAKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgICJub2RlIjogIkFuYWx5emUgR2l0IFN0YXRzIiwKICAgICAgICAgICAgInR5cGUiOiAibWFpbiIsCiAgICAgICAgICAgICJpbmRleCI6IDAKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgICJub2RlIjogIkFuYWx5emUgVGVzdCBDb3ZlcmFnZSIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICAibm9kZSI6ICJBbmFseXplIEFzc2V0cyBQZXJmb3JtYW5jZSIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICAibm9kZSI6ICJBbmFseXplIFN3aWZ0IERlcGVuZGVuY2llcyIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICAibm9kZSI6ICJBbmFseXplIFN3aWZ0IFBhY2thZ2UgTG9jayIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICAibm9kZSI6ICJBbmFseXplIE5QTSBEZXBlbmRlbmNpZXMiLAogICAgICAgICAgICAidHlwZSI6ICJtYWluIiwKICAgICAgICAgICAgImluZGV4IjogMAogICAgICAgICAgfQogICAgICAgIF0KICAgICAgXQogICAgfSwKICAgICJTY2FuIENvcnRlcyBGaWxlcyI6IHsKICAgICAgIm1haW4iOiBbCiAgICAgICAgWwogICAgICAgICAgewogICAgICAgICAgICAibm9kZSI6ICJBbmFseXplIENvcnRlcyBQcm9qZWN0IFN0cnVjdHVyZSIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICBdCiAgICB9LAogICAgIkFuYWx5emUgR2l0IEhpc3RvcnkiOiB7CiAgICAgICJtYWluIjogWwogICAgICAgIFsKICAgICAgICAgIHsKICAgICAgICAgICAgIm5vZGUiOiAiQW5hbHl6ZSBDb3J0ZXMgR2l0IEludGVsbGlnZW5jZSIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICBdCiAgICB9LAogICAgIkFuYWx5emUgVGVzdCBDb3ZlcmFnZSI6IHsKICAgICAgIm1haW4iOiBbCiAgICAgICAgWwogICAgICAgICAgewogICAgICAgICAgICAibm9kZSI6ICJBbmFseXplIENvcnRlcyBUZXN0aW5nIEludGVsbGlnZW5jZSIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICBdCiAgICB9LAogICAgIkFuYWx5emUgQXNzZXRzIFBlcmZvcm1hbmNlIjogewogICAgICAibWFpbiI6IFsKICAgICAgICBbCiAgICAgICAgICB7CiAgICAgICAgICAgICJub2RlIjogIkFuYWx5emUgQ29ydGVzIFBlcmZvcm1hbmNlIEludGVsbGlnZW5jZSIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICBdCiAgICB9LAogICAgIkFuYWx5emUgU3dpZnQgRGVwZW5kZW5jaWVzIjogewogICAgICAibWFpbiI6IFsKICAgICAgICBbCiAgICAgICAgICB7CiAgICAgICAgICAgICJub2RlIjogIkFuYWx5emUgQ29ydGVzIERlcGVuZGVuY2llcyIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICBdCiAgICB9LAogICAgIkFuYWx5emUgQ29ydGVzIFByb2plY3QgU3RydWN0dXJlIjogewogICAgICAibWFpbiI6IFsKICAgICAgICBbCiAgICAgICAgICB7CiAgICAgICAgICAgICJub2RlIjogIkNyZWF0ZSBVbHRpbWF0ZSBDb3J0ZXMgQ29udGV4dCIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICBdCiAgICB9LAogICAgIkNyZWF0ZSBVbHRpbWF0ZSBDb3J0ZXMgQ29udGV4dCI6IHsKICAgICAgIm1haW4iOiBbCiAgICAgICAgWwogICAgICAgICAgewogICAgICAgICAgICAibm9kZSI6ICJTYXZlIFVsdGltYXRlIENvbnRleHQiLAogICAgICAgICAgICAidHlwZSI6ICJtYWluIiwKICAgICAgICAgICAgImluZGV4IjogMAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgIm5vZGUiOiAiU2F2ZSBDbGF1ZGUgQ29udGV4dCIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICAibm9kZSI6ICJTYXZlIEV4ZWN1dGl2ZSBEYXNoYm9hcmQiLAogICAgICAgICAgICAidHlwZSI6ICJtYWluIiwKICAgICAgICAgICAgImluZGV4IjogMAogICAgICAgICAgfQogICAgICAgIF0KICAgICAgXQogICAgfSwKICAgICJTYXZlIFVsdGltYXRlIENvbnRleHQiOiB7CiAgICAgICJtYWluIjogWwogICAgICAgIFsKICAgICAgICAgIHsKICAgICAgICAgICAgIm5vZGUiOiAiTWFuYWdlIEhpc3RvcmljYWwgRmlsZXMiLAogICAgICAgICAgICAidHlwZSI6ICJtYWluIiwKICAgICAgICAgICAgImluZGV4IjogMAogICAgICAgICAgfQogICAgICAgIF0KICAgICAgXQogICAgfSwKICAgICJTYXZlIENsYXVkZSBDb250ZXh0IjogewogICAgICAibWFpbiI6IFsKICAgICAgICBbCiAgICAgICAgICB7CiAgICAgICAgICAgICJub2RlIjogIk1hbmFnZSBIaXN0b3JpY2FsIEZpbGVzIiwKICAgICAgICAgICAgInR5cGUiOiAibWFpbiIsCiAgICAgICAgICAgICJpbmRleCI6IDAKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIF0KICAgIH0sCiAgICAiU2F2ZSBFeGVjdXRpdmUgRGFzaGJvYXJkIjogewogICAgICAibWFpbiI6IFsKICAgICAgICBbCiAgICAgICAgICB7CiAgICAgICAgICAgICJub2RlIjogIk1hbmFnZSBIaXN0b3JpY2FsIEZpbGVzIiwKICAgICAgICAgICAgInR5cGUiOiAibWFpbiIsCiAgICAgICAgICAgICJpbmRleCI6IDAKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIF0KICAgIH0sCiAgICAiTWFuYWdlIEhpc3RvcmljYWwgRmlsZXMiOiB7CiAgICAgICJtYWluIjogWwogICAgICAgIFsKICAgICAgICAgIHsKICAgICAgICAgICAgIm5vZGUiOiAiRmluYWwgRXhwb3J0IEluc3RydWN0aW9ucyIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICBdCiAgICB9LAogICAgIkFuYWx5emUgR2l0IFN0YXRzIjogewogICAgICAibWFpbiI6IFsKICAgICAgICBbCiAgICAgICAgICB7CiAgICAgICAgICAgICJub2RlIjogIkFuYWx5emUgQ29ydGVzIEdpdCBJbnRlbGxpZ2VuY2UiLAogICAgICAgICAgICAidHlwZSI6ICJtYWluIiwKICAgICAgICAgICAgImluZGV4IjogMAogICAgICAgICAgfQogICAgICAgIF0KICAgICAgXQogICAgfSwKICAgICJBbmFseXplIFN3aWZ0IFBhY2thZ2UgTG9jayI6IHsKICAgICAgIm1haW4iOiBbCiAgICAgICAgWwogICAgICAgICAgewogICAgICAgICAgICAibm9kZSI6ICJBbmFseXplIENvcnRlcyBEZXBlbmRlbmNpZXMiLAogICAgICAgICAgICAidHlwZSI6ICJtYWluIiwKICAgICAgICAgICAgImluZGV4IjogMAogICAgICAgICAgfQogICAgICAgIF0KICAgICAgXQogICAgfSwKICAgICJBbmFseXplIE5QTSBEZXBlbmRlbmNpZXMiOiB7CiAgICAgICJtYWluIjogWwogICAgICAgIFsKICAgICAgICAgIHsKICAgICAgICAgICAgIm5vZGUiOiAiQW5hbHl6ZSBDb3J0ZXMgRGVwZW5kZW5jaWVzIiwKICAgICAgICAgICAgInR5cGUiOiAibWFpbiIsCiAgICAgICAgICAgICJpbmRleCI6IDAKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIF0KICAgIH0sCiAgICAiQW5hbHl6ZSBDb3J0ZXMgR2l0IEludGVsbGlnZW5jZSI6IHsKICAgICAgIm1haW4iOiBbCiAgICAgICAgWwogICAgICAgICAgewogICAgICAgICAgICAibm9kZSI6ICJDcmVhdGUgVWx0aW1hdGUgQ29ydGVzIENvbnRleHQiLAogICAgICAgICAgICAidHlwZSI6ICJtYWluIiwKICAgICAgICAgICAgImluZGV4IjogMAogICAgICAgICAgfQogICAgICAgIF0KICAgICAgXQogICAgfSwKICAgICJBbmFseXplIENvcnRlcyBUZXN0aW5nIEludGVsbGlnZW5jZSI6IHsKICAgICAgIm1haW4iOiBbCiAgICAgICAgWwogICAgICAgICAgewogICAgICAgICAgICAibm9kZSI6ICJDcmVhdGUgVWx0aW1hdGUgQ29ydGVzIENvbnRleHQiLAogICAgICAgICAgICAidHlwZSI6ICJtYWluIiwKICAgICAgICAgICAgImluZGV4IjogMAogICAgICAgICAgfQogICAgICAgIF0KICAgICAgXQogICAgfSwKICAgICJBbmFseXplIENvcnRlcyBQZXJmb3JtYW5jZSBJbnRlbGxpZ2VuY2UiOiB7CiAgICAgICJtYWluIjogWwogICAgICAgIFsKICAgICAgICAgIHsKICAgICAgICAgICAgIm5vZGUiOiAiQ3JlYXRlIFVsdGltYXRlIENvcnRlcyBDb250ZXh0IiwKICAgICAgICAgICAgInR5cGUiOiAibWFpbiIsCiAgICAgICAgICAgICJpbmRleCI6IDAKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIF0KICAgIH0sCiAgICAiQW5hbHl6ZSBDb3J0ZXMgRGVwZW5kZW5jaWVzIjogewogICAgICAibWFpbiI6IFsKICAgICAgICBbCiAgICAgICAgICB7CiAgICAgICAgICAgICJub2RlIjogIkNyZWF0ZSBVbHRpbWF0ZSBDb3J0ZXMgQ29udGV4dCIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICBdCiAgICB9LAogICAgIlhjb2RlIENMSSBXZWJob29rIjogewogICAgICAibWFpbiI6IFsKICAgICAgICBbCiAgICAgICAgICB7CiAgICAgICAgICAgICJub2RlIjogIkNvbW1hbmQgUGFyc2VyIiwKICAgICAgICAgICAgInR5cGUiOiAibWFpbiIsCiAgICAgICAgICAgICJpbmRleCI6IDAKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIF0KICAgIH0sCiAgICAiQ29tbWFuZCBQYXJzZXIiOiB7CiAgICAgICJtYWluIjogWwogICAgICAgIFsKICAgICAgICAgIHsKICAgICAgICAgICAgIm5vZGUiOiAiWGNvZGUgRXhlY3V0b3IiLAogICAgICAgICAgICAidHlwZSI6ICJtYWluIiwKICAgICAgICAgICAgImluZGV4IjogMAogICAgICAgICAgfQogICAgICAgIF0KICAgICAgXQogICAgfSwKICAgICJYY29kZSBFeGVjdXRvciI6IHsKICAgICAgIm1haW4iOiBbCiAgICAgICAgWwogICAgICAgICAgewogICAgICAgICAgICAibm9kZSI6ICJSZXN1bHQgRm9ybWF0dGVyIiwKICAgICAgICAgICAgInR5cGUiOiAibWFpbiIsCiAgICAgICAgICAgICJpbmRleCI6IDAKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIF0KICAgIH0sCiAgICAiUmVzdWx0IEZvcm1hdHRlciI6IHsKICAgICAgIm1haW4iOiBbCiAgICAgICAgWwogICAgICAgICAgewogICAgICAgICAgICAibm9kZSI6ICJSZXNwb25zZSIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICBdCiAgICB9LAogICAgIkZpbmFsIEV4cG9ydCBJbnN0cnVjdGlvbnMiOiB7CiAgICAgICJtYWluIjogWwogICAgICAgIFsKICAgICAgICAgIHsKICAgICAgICAgICAgIm5vZGUiOiAiU21hcnQgQW5hbHlzaXMgRW5naW5lIiwKICAgICAgICAgICAgInR5cGUiOiAibWFpbiIsCiAgICAgICAgICAgICJpbmRleCI6IDAKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIF0KICAgIH0sCiAgICAiU21hcnQgQW5hbHlzaXMgRW5naW5lIjogewogICAgICAibWFpbiI6IFsKICAgICAgICBbCiAgICAgICAgICB7CiAgICAgICAgICAgICJub2RlIjogIkhUVFAgUmVxdWVzdCIsCiAgICAgICAgICAgICJ0eXBlIjogIm1haW4iLAogICAgICAgICAgICAiaW5kZXgiOiAwCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICBdCiAgICB9LAogICAgIlNtYXJ0IFJlc3VsdHMgUHJvY2Vzc29yIjogewogICAgICAibWFpbiI6IFsKICAgICAgICBbCiAgICAgICAgICB7CiAgICAgICAgICAgICJub2RlIjogIlNtYXJ0IE5vdGlmaWNhdGlvbiBIYW5kbGVyIiwKICAgICAgICAgICAgInR5cGUiOiAibWFpbiIsCiAgICAgICAgICAgICJpbmRleCI6IDAKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIF0KICAgIH0sCiAgICAiSFRUUCBSZXF1ZXN0IjogewogICAgICAibWFpbiI6IFsKICAgICAgICBbCiAgICAgICAgICB7CiAgICAgICAgICAgICJub2RlIjogIlNtYXJ0IFJlc3VsdHMgUHJvY2Vzc29yIiwKICAgICAgICAgICAgInR5cGUiOiAibWFpbiIsCiAgICAgICAgICAgICJpbmRleCI6IDAKICAgICAgICAgIH0KICAgICAgICBdCiAgICAgIF0KICAgIH0KICB9LAogICJzZXR0aW5ncyI6IHsKICAgICJleGVjdXRpb25PcmRlciI6ICJ2MSIsCiAgICAidGltZXpvbmUiOiAiRXVyb3BlL01hZHJpZCIsCiAgICAiY2FsbGVyUG9saWN5IjogIndvcmtmbG93c0Zyb21TYW1lT3duZXIiCiAgfSwKICAic3RhdGljRGF0YSI6IG51bGwsCiAgIm1ldGEiOiB7CiAgICAidGVtcGxhdGVDcmVkc1NldHVwQ29tcGxldGVkIjogdHJ1ZQogIH0sCiAgInBpbkRhdGEiOiB7fSwKICAidmVyc2lvbklkIjogImYxOGU4OTgxLWVmMjAtNDZkZi1iY2JmLTBkMmUxZDdhOWRhNiIsCiAgInRyaWdnZXJDb3VudCI6IDIsCiAgInRhZ3MiOiBbXQp9